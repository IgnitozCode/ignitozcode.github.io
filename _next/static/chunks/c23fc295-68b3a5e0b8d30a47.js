"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{6509:(e,t,n)=>{let i;n.r(t),n.d(t,{BackLink:()=>eF,ChildLink:()=>eK,ComponentBuilder:()=>ls,ComponentViewBuilder:()=>lc,ConfirmDeleteDialogContainer:()=>tt,DEFAULT_INTENT_HANDLER:()=>lw,DocumentBuilder:()=>lg,DocumentInspectorHeader:()=>ng,DocumentListBuilder:()=>lz,DocumentListItemBuilder:()=>lH,DocumentPane:()=>se,DocumentPaneProviderWrapper:()=>r9,DocumentTypeListBuilder:()=>lY,FormViewBuilder:()=>lu,GenericListBuilder:()=>lT,GenericViewBuilder:()=>lo,HELP_URL:()=>s3,InitialValueTemplateItemBuilder:()=>lb,LOADING_PANE:()=>ni,ListBuilder:()=>lL,ListItemBuilder:()=>lO,LoadingPane:()=>t8,MenuItemBuilder:()=>s8,MenuItemGroupBuilder:()=>lt,Pane:()=>tl,PaneContainer:()=>s1,PaneContent:()=>td,PaneHeader:()=>tT,PaneHeaderActions:()=>tJ,PaneItem:()=>t0,PaneLayout:()=>t$,ParameterizedLink:()=>eQ,ReferenceChildLink:()=>eq,SerializeError:()=>s2,StructureToolProvider:()=>o$,_DEBUG:()=>nt,component:()=>lm,createStructureBuilder:()=>lK,defaultInitialValueTemplateItems:()=>lj,defaultIntentChecker:()=>lI,documentFromEditor:()=>lx,documentFromEditorWithInitialValue:()=>ly,form:()=>lp,getOrderingMenuItem:()=>s7,getOrderingMenuItemsForSchemaType:()=>s9,getTypeNamesFromFilter:()=>lR,isDocumentListItem:()=>lN,maybeSerializeInitialValueTemplateItem:()=>lv,maybeSerializeMenuItem:()=>s6,maybeSerializeMenuItemGroup:()=>le,maybeSerializeView:()=>la,menuItemsFromInitialValueTemplateItems:()=>l_,pane:()=>oL,pane$1:()=>oO,setActivePanes:()=>lJ,shallowIntentChecker:()=>lk,structureLocaleNamespace:()=>eM,structureTool:()=>oM,useDocumentPane:()=>t7,useDocumentTitle:()=>nu,usePane:()=>ta,usePaneLayout:()=>eW,usePaneOptions:()=>si,usePaneRouter:()=>eJ,useStructureTool:()=>ns});var r=n(29755),s=n(95155),l=n(988),o=n(91611),a=n(3818),d=n(12115),c=n(27959),u=n(64775),p=n(43954),m=n(41062),h=n(35574),f=n(58449),g=n(36126),x=n(90372),y=n(20209),b=n(49861),j=n(34703),v=n(84631),_=n(78592),w=n(40869),I=n(65285),S=n(90447),E=n(19510),k=n(49611),T=n(6509),C=n(31561),D=n(41413),z=n(68072),R=n(77013),A=n(40065),P=n(71317),M=n(70560),$=n(31190),L=n(25500),O=n(87463),B=n(49400),H=n(26125),N=n(30070),Y=n(43804),V=n(92036),U=n(59176),F=n(36806),W=n(81086),K=n(28983),Q=n(62389),q=n(43591),J=n(96761),G=n(7912),Z=n(8373),X=n(26579),ee=n(8416),et=n(54110),en=n(12260),ei=n(48795),er=n(20593),es=n(81022),el=n(5267),eo=n(75341),ea=n(36625),ed=n(66463),ec=n(79214),eu=n(88166),ep=n(68134),em=n(912),eh=n(98242),ef=n(26668),eg=n(56428),ex=n(7631),ey=n(52515),eb=n(84880),ej=n(42029),ev=n(25452),e_=n(48640),ew=n(95039),eI=n(41436),eS=n(16472),eE=n(11353),ek=n(57957),eT=n(6928),eC=n(874),eD=n(20741),ez=n(81637),eR=n(7259),eA=n(89789),eP=n(19083);let eM="structure",e$=(0,g.GW0)({locale:"en-US",namespace:eM,resources:()=>n.e(460).then(n.bind(n,31079))});function eL(e){let t,n,i,r;let o=(0,l.c)(21),{document:a}=e,d=(0,g.pDY)();o[0]!==a._type||o[1]!==d?(t=d.get(a._type),o[0]=a._type,o[1]=d,o[2]=t):t=o[2];let c=t,{t:u}=(0,g.Bdt)(eM);o[3]!==a||o[4]!==c?(n={schemaType:c,value:a},o[3]=a,o[4]=c,o[5]=n):n=o[5];let{error:p,value:m}=(0,g.MOl)(n);if(!c){let e,t;return o[6]!==a._type||o[7]!==u?(e=u("doc-title.unknown-schema-type.text",{schemaType:a._type}),o[6]=a._type,o[7]=u,o[8]=e):e=o[8],o[9]!==e?(t=(0,s.jsx)("code",{children:e}),o[9]=e,o[10]=t):t=o[10],t}if(p){let e,t;return o[11]!==p.message||o[12]!==u?(e=u("doc-title.error.text",{errorMessage:p.message}),o[11]=p.message,o[12]=u,o[13]=e):e=o[13],o[14]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),o[14]=e,o[15]=t):t=o[15],t}return o[16]!==u||o[17]!==m?.title?(i=m?.title||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:u("doc-title.fallback.text")}),o[16]=u,o[17]=m?.title,o[18]=i):i=o[18],o[19]!==i?(r=(0,s.jsx)(s.Fragment,{children:i}),o[19]=i,o[20]=r):r=o[20],r}let eO=(0,I.I4)(o.az)`
  margin-left: auto;
`,eB=I.I4.details`
  flex: none;

  &[open] ${eO} {
    transform: rotate(180deg);
  }
`,eH=I.I4.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,eN=I.I4.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,o.D0)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,o.D0)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,o.D0)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,eY=(0,I.I4)(o.so)`
  min-height: 33px;
`,eV=e=>{let t,n,i,a,d,c;let p=(0,l.c)(13),{t:m}=(0,g.Bdt)(eM),h=e.totalCount-e.references.length;return h?(p[0]!==h||p[1]!==m?(t=m("confirm-delete-dialog.other-reference-count.title",{count:h}),p[0]=h,p[1]=m,p[2]=t):t=p[2],p[3]!==t?(n=(0,s.jsx)(o.EY,{size:1,muted:!0,children:t}),p[3]=t,p[4]=n):n=p[4],p[5]!==m?(i=m("confirm-delete-dialog.other-reference-count.tooltip"),p[5]=m,p[6]=i):i=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(o.EY,{size:1,muted:!0,children:(0,s.jsx)(u.YzR,{})}),p[7]=a):a=p[7],p[8]!==i?(d=(0,s.jsx)(r.m_,{portal:!0,placement:"top",content:i,children:a}),p[8]=i,p[9]=d):d=p[9],p[10]!==n||p[11]!==d?(c=(0,s.jsx)(o.az,{padding:2,children:(0,s.jsxs)(o.cV,{space:2,children:[n,d]})}),p[10]=n,p[11]=d,p[12]=c):c=p[12],c):null};function eU(e){let t,n,i,a,c,u,p,m;let h=(0,l.c)(33),{icon:f,layout:x,presence:y,schemaType:b,value:j}=e,v=(0,g.u4i)(j.title)&&(0,d.isValidElement)(j.title)||ek(j.title)||eE(j.title)?j.title:null,{data:_,loading:w}=(0,g.K0D)(),{releasesIds:I}=(0,g.m2T)(_),{perspectiveStack:S,selectedPerspectiveName:k}=(0,g.QO2)();h[0]!==S||h[1]!==e.documentPreviewStore||h[2]!==I||h[3]!==b||h[4]!==v||h[5]!==j._id?(n=(0,g.TU6)(e.documentPreviewStore,b,j._id,v,{ids:I,stack:S}),h[0]=S,h[1]=e.documentPreviewStore,h[2]=I,h[3]=b,h[4]=v,h[5]=j._id,h[6]=n):n=h[6],t=n,h[7]===Symbol.for("react.memo_cache_sentinel")?(i={},h[7]=i):i=h[7],h[8]!==k?(a={draft:null,isLoading:!0,published:null,version:null,versions:i,selectedPerspectiveName:k},h[8]=k,h[9]=a):a=h[9];let{draft:T,published:C,version:D,versions:z,isLoading:R}=(0,E.J)(t,a),A=R||w;h[10]!==T||h[11]!==A||h[12]!==y||h[13]!==C||h[14]!==z?(c=A?null:(0,s.jsx)(r.vE,{children:(0,s.jsxs)(o.so,{align:"center",gap:3,children:[y&&y.length>0&&(0,s.jsx)(g.JEU,{presence:y}),(0,s.jsx)(g.ZDR,{draft:T,published:C,versions:z})]})}),h[10]=T,h[11]=A,h[12]=y,h[13]=C,h[14]=z,h[15]=c):c=h[15];let P=c;h[16]!==T||h[17]!==C||h[18]!==z?(u=(0,s.jsx)(g.Aii,{draft:T,published:C,versions:z}),h[16]=T,h[17]=C,h[18]=z,h[19]=u):u=h[19];let M=u;return h[20]!==T||h[21]!==C||h[22]!==k||h[23]!==j||h[24]!==D?(p=(0,g.ADU)({value:j,draft:T,published:C,version:D,perspective:k}),h[20]=T,h[21]=C,h[22]=k,h[23]=j,h[24]=D,h[25]=p):p=h[25],h[26]!==f||h[27]!==A||h[28]!==x||h[29]!==P||h[30]!==p||h[31]!==M?(m=(0,s.jsx)(g.m6P,{...p,isPlaceholder:A,icon:f,layout:x,status:P,tooltip:M}),h[26]=f,h[27]=A,h[28]=x,h[29]=P,h[30]=p,h[31]=M,h[32]=m):m=h[32],m}let eF=(0,d.forwardRef)(function(e,t){let n,i,r,o,a;let u=(0,l.c)(9),{routerPanesState:p,groupIndex:m}=(0,d.useContext)(c.l4);return u[0]!==m||u[1]!==p?(i=p.slice(0,m),u[0]=m,u[1]=p,u[2]=i):i=u[2],n=i,u[3]!==n?(o={panes:n},u[3]=n,u[4]=o):o=u[4],r=o,u[5]!==e||u[6]!==t||u[7]!==r?(a=(0,s.jsx)(k.s8,{...e,ref:t,state:r}),u[5]=e,u[6]=t,u[7]=r,u[8]=a):a=u[8],a});function eW(){let e=(0,d.useContext)(c._U);if(!e)throw Error("PaneLayout: missing context value");return e}let eK=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,u,p,m;let h=(0,l.c)(19);h[0]!==e?({childId:n,childPayload:r,childParameters:i,...o}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=o):(n=h[1],i=h[2],r=h[3],o=h[4]);let{routerPanesState:f,groupIndex:g}=(0,d.useContext)(c.l4);return h[5]!==g||h[6]!==f?(a=f.slice(0,g+1),h[5]=g,h[6]=f,h[7]=a):a=h[7],h[8]!==n||h[9]!==i||h[10]!==r?(u=[{id:n,params:i,payload:r}],h[8]=n,h[9]=i,h[10]=r,h[11]=u):u=h[11],h[12]!==a||h[13]!==u?(p={panes:[...a,u]},h[12]=a,h[13]=u,h[14]=p):p=h[14],h[15]!==t||h[16]!==o||h[17]!==p?(m=(0,s.jsx)(k.s8,{...o,ref:t,state:p}),h[15]=t,h[16]=o,h[17]=p,h[18]=m):m=h[18],m}),eQ=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,u,p,m,h,f,x,y,b;let j=(0,l.c)(34),{routerPanesState:v,groupIndex:_,siblingIndex:w}=(0,d.useContext)(c.l4);j[0]!==e?({params:n,payload:i,...r}=e,j[0]=e,j[1]=n,j[2]=i,j[3]=r):(n=j[1],i=j[2],r=j[3]);let I=(0,g.$6H)(n),S=(0,g.$6H)(i),E=v[_],T=E[w],C=I??T.params,D=S??T.payload;j[4]!==T||j[5]!==C||j[6]!==D?(a={...T,params:C,payload:D},j[4]=T,j[5]=C,j[6]=D,j[7]=a):a=j[7];let z=a;j[8]!==E||j[9]!==w?(u=E.slice(0,w),j[8]=E,j[9]=w,j[10]=u):u=j[10],j[11]!==E||j[12]!==w?(p=E.slice(w+1),j[11]=E,j[12]=w,j[13]=p):p=j[13],j[14]!==z||j[15]!==u||j[16]!==p?(m=[...u,z,...p],j[14]=z,j[15]=u,j[16]=p,j[17]=m):m=j[17];let R=m;j[18]!==v||j[19]!==_?(h=v.slice(0,_),j[18]=v,j[19]=_,j[20]=h):h=j[20],j[21]!==v||j[22]!==_?(f=v.slice(_+1),j[21]=v,j[22]=_,j[23]=f):f=j[23],j[24]!==R||j[25]!==h||j[26]!==f?(x=[...h,R,...f],j[24]=R,j[25]=h,j[26]=f,j[27]=x):x=j[27];let A=x;return j[28]!==A?(y={panes:A},j[28]=A,j[29]=y):y=j[29],o=y,j[30]!==o||j[31]!==t||j[32]!==r?(b=(0,s.jsx)(k.s8,{ref:t,...r,state:o}),j[30]=o,j[31]=t,j[32]=r,j[33]=b):b=j[33],b}),eq=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,d,c,u,p,m;let h=(0,l.c)(22);h[0]!==e?({documentId:i,documentType:r,parentRefPath:o,children:n,template:d,...a}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=o,h[5]=a,h[6]=d):(n=h[1],i=h[2],r=h[3],o=h[4],a=h[5],d=h[6]);let f=d?.params;return h[7]!==o?(c=(0,D.dI)(o),h[7]=o,h[8]=c):c=h[8],h[9]!==d?(u=d&&{template:d?.id},h[9]=d,h[10]=u):u=h[10],h[11]!==r||h[12]!==c||h[13]!==u?(p={type:r,parentRefPath:c,...u},h[11]=r,h[12]=c,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==a||h[19]!==f||h[20]!==p?(m=(0,s.jsx)(eK,{...a,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=a,h[19]=f,h[20]=p,h[21]=m):m=h[21],m});function eJ(){return(0,d.useContext)(c.l4)}let eG=[];function eZ(e){let t,n,i,r;let o=(0,l.c)(16),{onClick:a,type:d,value:c}=e,u=c?._id;o[0]!==u?(t=(0,g.IMx)(u),o[0]=u,o[1]=t):t=o[1];let p=(0,g.cVB)(t),m=(0,g.yKO)(),{ReferenceChildLink:h}=eJ();o[2]!==h||o[3]!==d?.name||o[4]!==c?._id?(n=function(e){return(0,s.jsx)(h,{documentId:c?._id,documentType:d?.name,parentRefPath:eG,...e})},o[2]=h,o[3]=d?.name,o[4]=c?._id,o[5]=n):n=o[5];let f=n,x=d?.icon,y=p?.length>0?p:eG;return o[6]!==m||o[7]!==x||o[8]!==y||o[9]!==d||o[10]!==c?(i=(0,s.jsx)(eU,{documentPreviewStore:m,icon:x,layout:"compact",presence:y,schemaType:d,value:c}),o[6]=m,o[7]=x,o[8]=y,o[9]=d,o[10]=c,o[11]=i):i=o[11],o[12]!==a||o[13]!==f||o[14]!==i?(r=(0,s.jsx)(g.Ns2,{__unstable_focusRing:!0,as:f,"data-as":"a",onClick:a,radius:2,children:i}),o[12]=a,o[13]=f,o[14]=i,o[15]=r):r=o[15],r}function eX(e){let t,n,i,d,c,p,m,h,f,x,y,b,j,v,_,w,I,S,E,k;let T=(0,l.c)(78),{crossDatasetReferences:C,internalReferences:D,documentTitle:z,totalCount:R,action:A,datasetNames:P,hasUnknownDatasetNames:M,onReferenceLinkClick:$}=e,L=(0,g.pDY)(),O=(0,a.dj)(),{t:B}=(0,g.Bdt)(eM);T[0]!==$||T[1]!==L||T[2]!==B?(t=e=>{let t=L.get(e._type);return t?(0,s.jsx)(eZ,{type:t,value:e,onClick:$}):(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(g.m6P,{icon:u.KSC,title:B("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:B("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},T[0]=$,T[1]=L,T[2]=B,T[3]=t):t=T[3];let H=t;if(D?.totalCount===0&&C?.totalCount===0){let e,t;return T[4]!==z?(e={DocumentTitle:()=>(0,s.jsx)("strong",{children:z})},T[4]=z,T[5]=e):e=T[5],T[6]!==A||T[7]!==B||T[8]!==e?(t=(0,s.jsx)(o.EY,{as:"p",size:1,children:(0,s.jsx)(g.HTc,{t:B,i18nKey:"confirm-delete-dialog.confirmation.text",context:A,components:e})}),T[6]=A,T[7]=B,T[8]=e,T[9]=t):t=T[9],t}if(T[10]!==A||T[11]!==C||T[12]!==P||T[13]!==z||T[14]!==M||T[15]!==D||T[16]!==H||T[17]!==B||T[18]!==O||T[19]!==R){let e,t,l,a;let w=[...P,...M?["unavailable"]:[]],I=B("confirm-delete-dialog.cdr-summary.subtitle",{count:w.length,datasets:w.join(", "),context:M&&w.length?"unavailable":""});d=o.so,_="column",c=4,T[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.EY,{"aria-hidden":"true",size:1,children:(0,s.jsx)(u.sAQ,{})}),T[34]=e):e=T[34],T[35]!==z?(t={DocumentTitle:()=>z},T[35]=z,T[36]=t):t=T[36],T[37]!==R?(l={count:R},T[37]=R,T[38]=l):l=T[38],T[39]!==B||T[40]!==t||T[41]!==l?(p=(0,s.jsx)(o.Zp,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,s.jsxs)(o.so,{children:[e,(0,s.jsx)(o.az,{flex:1,marginLeft:3,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:t,t:B,values:l})})})]})}),T[39]=B,T[40]=t,T[41]=l,T[42]=p):p=T[42],T[43]!==z?(a={DocumentTitle:()=>z},T[43]=z,T[44]=a):a=T[44],T[45]!==A||T[46]!==B||T[47]!==a?(m=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:B,context:A,components:a})})}),T[45]=A,T[46]=B,T[47]=a,T[48]=m):m=T[48],i=o.Zp,y=2,b=1,j="auto",v=2,n=o.so,h="column",T[49]!==D||T[50]!==H?(f=D.totalCount>0&&(0,s.jsxs)(o.BJ,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[D?.references.map(e=>s.jsx(o.az,{as:"li",children:H(e)},e._id)),D.totalCount>D.references.length&&(0,s.jsx)(o.az,{as:"li",padding:3,children:(0,s.jsx)(eV,{...D})})]}),T[49]=D,T[50]=H,T[51]=f):f=T[51],x=C.totalCount>0&&(0,s.jsxs)(eB,{"data-testid":"cross-dataset-references",style:{borderTop:D.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,s.jsx)(eH,{children:(0,s.jsx)(o.Zp,{as:"a",marginTop:D.totalCount>0?2:0,radius:2,shadow:1,paddingY:1,children:(0,s.jsxs)(o.so,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.So9,{})}),(0,s.jsxs)(o.BJ,{space:2,children:[(0,s.jsx)(o.EY,{textOverflow:"ellipsis",size:1,children:B("confirm-delete-dialog.cdr-summary.title",{count:w.length,documentCount:B("confirm-delete-dialog.cdr-summary.document-count",{count:C.totalCount})})}),(0,s.jsx)(o.EY,{title:I,textOverflow:"ellipsis",size:1,muted:!0,children:I})]}),(0,s.jsx)(eO,{children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:(0,s.jsx)(u.D3D,{})})})]})})}),(0,s.jsxs)(o.az,{overflow:"auto",paddingTop:2,children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:B("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,weight:"medium",children:B("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,weight:"medium",children:B("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,s.jsx)("tbody",{children:C.references.filter(e0).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(o.EY,{size:1,children:n})}),(0,s.jsx)("td",{children:(0,s.jsx)(o.EY,{size:1,children:i||"unavailable"})}),(0,s.jsx)("td",{children:(0,s.jsxs)(eY,{align:"center",gap:2,justify:"flex-end",children:[(0,s.jsx)(o.EY,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,s.jsx)(r.$n,{mode:"bleed",icon:u.TdU,tooltipProps:{content:B("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).then(()=>{O.push({status:"success",title:B("confirm-delete-dialog.cdr-table.id-copied-toast.title")})}).catch(()=>{O.push({status:"error",title:B("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${l}-${t}`)})})]}),(0,s.jsx)(eV,{...C})]})]}),T[10]=A,T[11]=C,T[12]=P,T[13]=z,T[14]=M,T[15]=D,T[16]=H,T[17]=B,T[18]=O,T[19]=R,T[20]=n,T[21]=i,T[22]=d,T[23]=c,T[24]=p,T[25]=m,T[26]=h,T[27]=f,T[28]=x,T[29]=y,T[30]=b,T[31]=j,T[32]=v,T[33]=_}else n=T[20],i=T[21],d=T[22],c=T[23],p=T[24],m=T[25],h=T[26],f=T[27],x=T[28],y=T[29],b=T[30],j=T[31],v=T[32],_=T[33];return T[52]!==n||T[53]!==h||T[54]!==f||T[55]!==x?(w=(0,s.jsxs)(n,{direction:h,children:[f,x]}),T[52]=n,T[53]=h,T[54]=f,T[55]=x,T[56]=w):w=T[56],T[57]!==i||T[58]!==w||T[59]!==y||T[60]!==b||T[61]!==j||T[62]!==v?(I=(0,s.jsx)(i,{radius:y,shadow:b,flex:j,padding:v,children:w}),T[57]=i,T[58]=w,T[59]=y,T[60]=b,T[61]=j,T[62]=v,T[63]=I):I=T[63],T[64]!==z?(S={DocumentTitle:()=>z},T[64]=z,T[65]=S):S=T[65],T[66]!==A||T[67]!==B||T[68]!==S?(E=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:B,context:A,components:S})})}),T[66]=A,T[67]=B,T[68]=S,T[69]=E):E=T[69],T[70]!==d||T[71]!==c||T[72]!==p||T[73]!==m||T[74]!==I||T[75]!==E||T[76]!==_?(k=(0,s.jsxs)(d,{direction:_,gap:c,children:[p,m,I,E]}),T[70]=d,T[71]=c,T[72]=p,T[73]=m,T[74]=I,T[75]=E,T[76]=_,T[77]=k):k=T[77],k}function e0(e){return"projectId"in e}let e1=()=>(i||(i=(0,z.R)(document,"visibilitychange").pipe((0,L.Z)(null),(0,$.T)(()=>"visible"===document.visibilityState),(0,ee.F)(),(0,et.n)(e=>e?(0,R.O)(0,5e3):A.w),(0,en.t)({refCount:!0,bufferSize:1}))),i),e2=(0,g.R11)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),e3=(0,g.R11)(([e,t])=>e1().pipe((0,et.n)(()=>(function(e,t){let{versionedClient:n}=t;return e1().pipe((0,et.n)(()=>(function(e,{versionedClient:t}){let n=(0,g.T4)(e),i=(0,g.IMx)(e),r={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(r).pipe((0,$.T)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,et.n)(e=>{if(!e)return(0,P.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,O.W)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,P.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function e4(e){return"string"!=typeof e.datasetName}function e5(e){return!!e&&""!==e}function e6(e){return e?.datasetName||""}function e8(e){return e.projectId}let e7=(0,I.I4)(o.az)`
  box-sizing: border-box;
`,e9=(0,I.I4)(o.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function te(e){let t,n,i,o,a,c,u,p,m,h;let f=(0,l.c)(40),{id:x,type:y,action:b,onCancel:j,onConfirm:v}=e,_=void 0===b?"delete":b,{t:w}=(0,g.Bdt)(eM),I=`deletion-confirmation-${(0,d.useId)()}`,{internalReferences:S,crossDatasetReferences:E,isLoading:k,totalCount:T,projectIds:C,datasetNames:D,hasUnknownDatasetNames:z}=function(e){let t,n,i,r,s,o,a,d,c;let u=(0,l.c)(24),p=(0,g.tH7)(g.miu),m=(0,g.q3J)();u[0]!==e?(t=(0,g.IMx)(e),u[0]=e,u[1]=t):t=u[1];let h=t;u[2]!==m||u[3]!==h?(n=[h,m],u[2]=m,u[3]=h,u[4]=n):n=u[4];let[f,x]=e2(n);u[5]!==h||u[6]!==p?(i=[h,p],u[5]=h,u[6]=p,u[7]=i):i=u[7];let[y,b]=e3(i);u[8]!==y?.references?(r=()=>Array.from(new Set(y?.references.map(e8).filter(Boolean))).sort(),u[8]=y?.references,u[9]=r):r=u[9],u[10]!==r?(s=r(),u[10]=r,u[11]=s):s=u[11];let j=s;u[12]!==y?.references?(a=Array.from(new Set(y?.references.map(e6).filter(e5))).sort(),u[12]=y?.references,u[13]=a):a=u[13],o=a,u[14]!==y?.references?(d=()=>!!y?.references.some(e4),u[14]=y?.references,u[15]=d):d=u[15];let v=d(),_=(f?.totalCount||0)+(y?.totalCount||0),w=x||b;return u[16]!==y||u[17]!==o||u[18]!==v||u[19]!==f||u[20]!==j||u[21]!==_||u[22]!==w?(c={totalCount:_,projectIds:j,datasetNames:o,hasUnknownDatasetNames:v,internalReferences:f,crossDatasetReferences:y,isLoading:w},u[16]=y,u[17]=o,u[18]=v,u[19]=f,u[20]=j,u[21]=_,u[22]=w,u[23]=c):c=u[23],c}(x);f[0]!==x||f[1]!==y?(n={_id:x,_type:y},f[0]=x,f[1]=y,f[2]=n):n=f[2],t=n,f[3]!==t?(i=(0,s.jsx)(eL,{document:t}),f[3]=t,f[4]=i):i=f[4];let R=i,A=!k;return f[5]!==_||f[6]!==w?(o=w("confirm-delete-dialog.header.text",{context:_}),f[5]=_,f[6]=w,f[7]=o):o=f[7],f[8]!==w?(a=w("confirm-delete-dialog.cancel-button.text"),f[8]=w,f[9]=a):a=f[9],f[10]!==j||f[11]!==a?(c={onClick:j,text:a},f[10]=j,f[11]=a,f[12]=c):c=f[12],f[13]!==_||f[14]!==v||f[15]!==A||f[16]!==w||f[17]!==T?(u=A?{text:w(T>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:v}:void 0,f[13]=_,f[14]=v,f[15]=A,f[16]=w,f[17]=T,f[18]=u):u=f[18],f[19]!==c||f[20]!==u?(p={cancelButton:c,confirmButton:u},f[19]=c,f[20]=u,f[21]=p):p=f[21],f[22]!==_||f[23]!==E||f[24]!==D||f[25]!==R||f[26]!==z||f[27]!==S||f[28]!==k||f[29]!==j||f[30]!==C||f[31]!==w||f[32]!==T?(m=(0,s.jsx)(e7,{children:E&&S&&!k?(0,s.jsx)(eX,{crossDatasetReferences:E,internalReferences:S,documentTitle:R,isLoading:k,totalCount:T,action:_,projectIds:C,datasetNames:D,hasUnknownDatasetNames:z,onReferenceLinkClick:j}):(0,s.jsx)(e9,{"data-testid":"loading-container",children:(0,s.jsx)(g.gd4,{showText:!0,title:w("confirm-delete-dialog.loading.text")})})}),f[22]=_,f[23]=E,f[24]=D,f[25]=R,f[26]=z,f[27]=S,f[28]=k,f[29]=j,f[30]=C,f[31]=w,f[32]=T,f[33]=m):m=f[33],f[34]!==I||f[35]!==j||f[36]!==m||f[37]!==o||f[38]!==p?(h=(0,s.jsx)(r.lG,{width:1,id:I,header:o,footer:p,onClose:j,onClickOutside:j,children:m}),f[34]=I,f[35]=j,f[36]=m,f[37]=o,f[38]=p,f[39]=h):h=f[39],h}function tt(e){let t,n;let i=(0,l.c)(6),{t:a}=(0,g.Bdt)(eM),c=(0,d.useId)(),[u,p]=(0,d.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>p(null),i[0]=t):t=i[0];let m=t;return i[1]!==u||i[2]!==c||i[3]!==e||i[4]!==a?(n=u?(0,s.jsx)(r.lG,{id:`dialog-error-${c}`,"data-testid":"confirm-delete-error-dialog",header:a("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:a("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:e.onCancel,children:(0,s.jsx)(o.az,{padding:4,children:(0,s.jsx)(o.EY,{size:1,children:a("confirm-delete-dialog.error.message.text")})})}):(0,s.jsx)(r.tH,{onCatch:p,children:(0,s.jsx)(te,{...e})}),i[1]=u,i[2]=c,i[3]=e,i[4]=a,i[5]=n):n=i[5],n}function tn(e){let t,n,i;let r=(0,l.c)(6),{children:o,ms:a}=e,c=void 0===a?0:a,[u,p]=(0,d.useState)(c<=0);if(r[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},n=[c],r[0]=c,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,d.useEffect)(t,n),!u||!o){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==o?(i="function"==typeof o?o():o,r[4]=o,r[5]=i):i=r[5],i}let ti=(0,I.I4)(o.Wd)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function tr(e){let t,n;let i=(0,l.c)(7),{disabled:r,element:o}=e,{resize:a}=eW(),[c,u]=(0,d.useState)(!1);i[0]!==o||i[1]!==a?(t=e=>{if(!o)return;u(!0),e.preventDefault();let t=e.pageX;a("start",o,0);let n=e=>{e.preventDefault(),a("move",o,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=a,i[2]=t):t=i[2];let p=t,m=r?"":void 0,h=c?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,s.jsx)(ti,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let ts=(0,I.I4)(o.Zp)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,tl=(0,d.forwardRef)(function(e,t){let n,i,r,a,u,p,m,h,f,x,y,b,j,v,_,w,I,S,E,k,T,C,D,z,R,A,P,M,$,L,O,B;let H=(0,l.c)(86);H[0]!==e?({children:n,currentMinWidth:r,currentMaxWidth:i,flex:h,id:a,minWidth:p,maxWidth:u,selected:f,...m}=e,H[0]=e,H[1]=n,H[2]=i,H[3]=r,H[4]=a,H[5]=u,H[6]=p,H[7]=m,H[8]=h,H[9]=f):(n=H[1],i=H[2],r=H[3],a=H[4],u=H[5],p=H[6],m=H[7],h=H[8],f=H[9]);let N=void 0===h?1:h,Y=void 0!==f&&f,[V,U]=(0,d.useState)(null),{collapse:F,collapsed:W,expand:K,expandedElement:Q,mount:q,panes:J}=eW();if(H[10]!==J||H[11]!==V){let e;H[14]!==V?(e=e=>e.element===V,H[14]=V,H[15]=e):e=H[15],y=(x=J.find(e))&&J.indexOf(x),H[10]=J,H[11]=V,H[12]=x,H[13]=y}else x=H[12],y=H[13];let G=y,Z="number"==typeof G?J[G+1]:void 0,X=G===J.length-1,ee=Q===V,et=!W&&(x?.collapsed||!1),en=Z?.collapsed||!1,ei=(0,d.useRef)(null),er=x?.flex??N,es=x?.currentMinWidth??r,el=x?.currentMaxWidth??i;H[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>ei.current,H[16]=b):b=H[16],(0,d.useImperativeHandle)(t,b),H[17]===Symbol.for("react.memo_cache_sentinel")?(j=e=>{U(e),ei.current=e},H[17]=j):j=H[17];let eo=j;H[18]!==i||H[19]!==r||H[20]!==N||H[21]!==a||H[22]!==u||H[23]!==p||H[24]!==q||H[25]!==V?(v=()=>{if(V)return q(V,{currentMinWidth:r,currentMaxWidth:i,flex:N,id:a,minWidth:p,maxWidth:u})},_=[r,i,N,a,p,u,q,V],H[18]=i,H[19]=r,H[20]=N,H[21]=a,H[22]=u,H[23]=p,H[24]=q,H[25]=V,H[26]=v,H[27]=_):(v=H[26],_=H[27]),(0,d.useLayoutEffect)(v,_),H[28]!==F||H[29]!==V?(w=()=>{V&&F(V)},H[28]=F,H[29]=V,H[30]=w):w=H[30];let ea=w;H[31]!==K||H[32]!==V?(I=()=>{V&&K(V)},H[31]=K,H[32]=V,H[33]=I):I=H[33];let ed=I,ec=!W&&et;H[34]!==ea||H[35]!==ed||H[36]!==X||H[37]!==G||H[38]!==V||H[39]!==ec?(E={collapse:ea,collapsed:ec,expand:ed,index:G,isLast:X,rootElement:V},H[34]=ea,H[35]=ed,H[36]=X,H[37]=G,H[38]=V,H[39]=ec,H[40]=E):E=H[40],S=E;e:{if(W){k=void 0;break e}if(et){k=51;break e}if(0===es||X){k=p||204;break e}k=es||p||204}let eu=k;t:{if(et){T=51;break t}if(W&&X){T=void 0;break t}if(X){if(u){T=el??u;break t}T=void 0;break t}T=el??u}let ep=T,em=W&&!X;H[41]!==et||H[42]!==X||H[43]!==W||H[44]!==en||H[45]!==V?(D=!X&&!W&&(0,s.jsx)(g.wG1,{zOffset:"paneResizer",children:(0,s.jsx)(tr,{disabled:et||en,element:V})}),H[41]=et,H[42]=X,H[43]=W,H[44]=en,H[45]=V,H[46]=D):D=H[46],C=D;let eh=ep===1/0?void 0:ep;H[47]!==er||H[48]!==eu||H[49]!==eh?(R={flex:er,minWidth:eu,maxWidth:eh},H[47]=er,H[48]=eu,H[49]=eh,H[50]=R):R=H[50],z=R;let ef=W?void 0:"hidden",eg=et?"":void 0,ex=Y?"":void 0;return H[51]!==et||H[52]!==el||H[53]!==es||H[54]!==ee||H[55]!==er||H[56]!==ep||H[57]!==eu||H[58]!==G?(A=!1,H[51]=et,H[52]=el,H[53]=es,H[54]=ee,H[55]=er,H[56]=ep,H[57]=eu,H[58]=G,H[59]=A):A=H[59],H[60]!==n||H[61]!==em?(P=!em&&(0,s.jsx)(o.so,{direction:"column",height:"fill",children:n}),H[60]=n,H[61]=em,H[62]=P):P=H[62],H[63]!==V||H[64]!==P?(M=(0,s.jsx)(o.EZ,{element:V,children:P}),H[63]=V,H[64]=P,H[65]=M):M=H[65],H[66]!==em||H[67]!==a||H[68]!==G||H[69]!==m||H[70]!==z||H[71]!==ef||H[72]!==eg||H[73]!==ex||H[74]!==A||H[75]!==M?($=(0,s.jsxs)(ts,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:em,id:a,overflow:ef,...m,"data-pane-collapsed":eg,"data-pane-index":G,"data-pane-selected":ex,ref:eo,style:z,children:[A,M]}),H[66]=em,H[67]=a,H[68]=G,H[69]=m,H[70]=z,H[71]=ef,H[72]=eg,H[73]=ex,H[74]=A,H[75]=M,H[76]=$):$=H[76],H[77]!==X||H[78]!==$?(L=(0,s.jsx)(g.mLG,{isLastPane:X,children:$}),H[77]=X,H[78]=$,H[79]=L):L=H[79],H[80]!==S||H[81]!==L?(O=(0,s.jsx)(g.wG1,{zOffset:"pane",children:(0,s.jsx)(c.OD.Provider,{value:S,children:L})}),H[80]=S,H[81]=L,H[82]=O):O=H[82],H[83]!==C||H[84]!==O?(B=(0,s.jsxs)(s.Fragment,{children:[O,C]}),H[83]=C,H[84]=O,H[85]=B):B=H[85],B}),to=(0,I.I4)(o.Zp)`
  position: relative;
  outline: none;
`;function ta(){let e=(0,d.useContext)(c.OD);if(!e)throw Error("Pane: missing context value");return e}to.displayName="PaneContent__root";let td=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,d;let c=(0,l.c)(14);c[0]!==e?({as:n,children:i,overflow:r,padding:o,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=r,c[4]=o,c[5]=a):(n=c[1],i=c[2],r=c[3],o=c[4],a=c[5]);let{collapsed:u}=ta(),{collapsed:p}=eW(),m=p?void 0:r;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==o||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,s.jsx)(to,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=o,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function tc(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let tu={constrainSize:!0,placement:"left-start",portal:!0};function tp(e){let t,n,i,r;let a=(0,l.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,g.Bvg)("i18n"in u?u:void 0);if("divider"===u.type){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.Nj,{}),a[0]=e):e=a[0],e}a[1]!==p||a[2]!==u?(t=p(u),a[1]=p,a[2]=u,a[3]=t):t=a[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return a[4]!==c?(e=c&&(0,s.jsx)(o.Nj,{}),a[4]=c,a[5]=e):e=a[5],a[6]!==d||a[7]!==u.children||a[8]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tp,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[6]=d,a[7]=u.children,a[8]=u.disabled,a[9]=t):t=a[9],a[10]!==e||a[11]!==t?(n=(0,s.jsxs)(s.Fragment,{children:[e,t]}),a[10]=e,a[11]=t,a[12]=n):n=a[12],n}a[13]!==c?(e=c&&(0,s.jsx)(o.Nj,{}),a[13]=c,a[14]=e):e=a[14];let r=u.icon;return a[15]!==d||a[16]!==u.children||a[17]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tp,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[15]=d,a[16]=u.children,a[17]=u.disabled,a[18]=t):t=a[18],a[19]!==d||a[20]!==u.icon||a[21]!==t||a[22]!==m?(n=(0,s.jsx)(j.r,{disabled:d,icon:r,popover:tu,text:m,children:t}),a[19]=d,a[20]=u.icon,a[21]=t,a[22]=m,a[23]=n):n=a[23],a[24]!==e||a[25]!==n?(i=(0,s.jsxs)(s.Fragment,{children:[e,n]}),a[24]=e,a[25]=n,a[26]=i):i=a[26],i}return a[27]!==c?(n=c&&(0,s.jsx)(o.Nj,{}),a[27]=c,a[28]=n):n=a[28],a[29]!==d||a[30]!==u?(i=(0,s.jsx)(tm,{disabled:d,node:u}),a[29]=d,a[30]=u,a[31]=i):i=a[31],a[32]!==n||a[33]!==i?(r=(0,s.jsxs)(s.Fragment,{children:[n,i]}),a[32]=n,a[33]=i,a[34]=r):r=a[34],r}function tm(e){let t;let n=(0,l.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,s.jsx)(tf,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,s.jsx)(th,{...e}),n[3]=e,n[4]=t):t=n[4],t}function th(e){let t,n,i,a;let d=(0,l.c)(17),{disabled:c,node:p}=e;d[0]!==p.disabled?(t="object"==typeof p.disabled&&(0,s.jsx)(o.EY,{size:1,children:p.disabled.reason}),d[0]=p.disabled,d[1]=t):t=d[1];let m=t,{title:h}=(0,g.FP1)(p),f=c||!!p.disabled;d[2]!==p.hotkey?(n=p.hotkey?.split("+"),d[2]=p.hotkey,d[3]=n):n=d[3];let x=p.iconRight||p.selected&&u.Nrt,y=`action-${tc(p.title)}`;return d[4]!==p.icon||d[5]!==p.onAction||d[6]!==p.selected||d[7]!==p.tone||d[8]!==f||d[9]!==n||d[10]!==x||d[11]!==y||d[12]!==h?(i=(0,s.jsx)(r.Dr,{disabled:f,hotkeys:n,icon:p.icon,iconRight:x,onClick:p.onAction,pressed:p.selected,text:h,tone:p.tone,"data-testid":y}),d[4]=p.icon,d[5]=p.onAction,d[6]=p.selected,d[7]=p.tone,d[8]=f,d[9]=n,d[10]=x,d[11]=y,d[12]=h,d[13]=i):i=d[13],d[14]!==i||d[15]!==m?(a=(0,s.jsx)(g.FUn,{content:m,placement:"left",children:i}),d[14]=i,d[15]=m,d[16]=a):a=d[16],a}function tf(e){let t,n,i,a,d,c;let p=(0,l.c)(23),{disabled:m,intent:h,node:f}=e;p[0]!==f.disabled?(t="object"==typeof f.disabled&&(0,s.jsx)(o.EY,{size:1,children:f.disabled.reason}),p[0]=f.disabled,p[1]=t):t=p[1];let x=t;p[2]!==h.params||p[3]!==h.type?(n={intent:h.type,params:h.params},p[2]=h.params,p[3]=h.type,p[4]=n):n=p[4];let y=(0,k.cQ)(n);p[5]!==y||p[6]!==f?(i=e=>{y.onClick(e),f.onAction()},p[5]=y,p[6]=f,p[7]=i):i=p[7];let b=i,{title:j}=(0,g.FP1)(f),v=m||!!f.disabled;p[8]!==f.hotkey?(a=f.hotkey?.split("+"),p[8]=f.hotkey,p[9]=a):a=p[9];let _=f.selected?u.Nrt:void 0;return p[10]!==b||p[11]!==y.href||p[12]!==f.icon||p[13]!==f.selected||p[14]!==f.tone||p[15]!==v||p[16]!==a||p[17]!==_||p[18]!==j?(d=(0,s.jsx)(r.Dr,{as:"a",disabled:v,hotkeys:a,href:y.href,icon:f.icon,iconRight:_,onClick:b,pressed:f.selected,text:j,tone:f.tone}),p[10]=b,p[11]=y.href,p[12]=f.icon,p[13]=f.selected,p[14]=f.tone,p[15]=v,p[16]=a,p[17]=_,p[18]=j,p[19]=d):d=p[19],p[20]!==d||p[21]!==x?(c=(0,s.jsx)(g.FUn,{content:x,placement:"left",children:d}),p[20]=d,p[21]=x,p[22]=c):c=p[22],c}let tg={constrainSize:!0,placement:"bottom",portal:!0};function tx(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&tx(e.children,t))}function ty(e){let t,n,i,a,c;let u=(0,l.c)(13),{nodes:p,actionsNodes:m}=e,h=(0,d.useId)(),f=tx(p,"critical"),x=tx(p,"caution"),y=f?"critical":x?"caution":void 0;return u[0]!==y?(t=(0,s.jsx)(g.VJU,{tone:y,"data-testid":"pane-context-menu-button"}),u[0]=y,u[1]=t):t=u[1],u[2]!==m?(n=m&&(0,s.jsxs)(s.Fragment,{children:[m,(0,s.jsx)(o.Nj,{})]}),u[2]=m,u[3]=n):n=u[3],u[4]!==p?(i=p.map((e,t)=>{let n=p[t-1]?.type==="group";return(0,s.jsx)(tp,{isAfterGroup:n,node:e},e.key)}),u[4]=p,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(a=(0,s.jsxs)(o.W1,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=a):a=u[8],u[9]!==h||u[10]!==t||u[11]!==a?(c=(0,s.jsx)(r.IU,{button:t,id:h,menu:a,popover:tg}),u[9]=h,u[10]=t,u[11]=a,u[12]=c):c=u[12],c}let tb=(0,I.I4)(o.Wd)`
  position: sticky;
  bottom: 0;

  &:before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    right: 0;
    top: -1px;
    border-bottom: 1px solid var(--card-border-color);
  }
`,tj=(0,I.I4)(o.Zp)`
  padding-bottom: env(safe-area-inset-bottom);
`,tv=(0,d.forwardRef)(function(e,t){let n,i;let r=(0,l.c)(7),{children:a,padding:d}=e,{collapsed:c}=ta();return r[0]!==a||r[1]!==d?(n=(0,s.jsx)(tj,{tone:"inherit",children:(0,s.jsx)(o.az,{padding:d,children:a})}),r[0]=a,r[1]=d,r[2]=n):n=r[2],r[3]!==c||r[4]!==t||r[5]!==n?(i=(0,s.jsx)(g.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(tb,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),r[3]=c,r[4]=t,r[5]=n,r[6]=i):i=r[6],i}),t_=(0,I.I4)(o.Wd)(({$border:e})=>(0,I.AH)`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),tw=(0,I.I4)(o.so)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,tI=(0,I.I4)(o.Zp)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return(0,I.AH)`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),tS=(0,I.I4)(a.r5)`
  width: 66%;
  max-width: 175px;
`,tE=(0,I.I4)(o.EY)`
  cursor: default;
  outline: none;
`,tk=(0,I.I4)(o.az)(({theme:e})=>{let{color:t,space:n}=e.sanity;return(0,I.AH)`
    overflow: hidden;
    overflow: clip;
    position: relative;

    & > div {
      white-space: nowrap;
      overflow: auto;
      /* Hide scrollbars */
      scrollbar-width: none;
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    /* right padding */
    & > div:after {
      content: '';
      display: inline-block;
      top: 0;
      right: 0;
      bottom: 0;
      width: ${n[3]}px;
      height: 1px;
    }

    /* Gradient that makes it look like tabs disappear into nothing (looks nicer) */
    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to right, ${(0,o.B3)(t.base.bg,0)}, var(--card-bg-color));
      width: ${n[3]}px;
      pointer-events: none;
    }
  `}),tT=(0,d.forwardRef)(function(e,t){let n,i,r,d,c,u,p,m,h,f,x,y,b;let j=(0,l.c)(46),{actions:v,backButton:_,border:w,contentAfter:I,loading:S,subActions:E,tabs:k,tabIndex:T,title:C}=e,{collapse:D,collapsed:z,expand:R,rootElement:A}=ta(),P=(0,a.sQ)(A||null),M=z?P?.height||window.innerHeight:void 0;j[0]!==M?(i={width:M},j[0]=M,j[1]=i):i=j[1],n=i,j[2]!==D||j[3]!==z?(r=()=>{z||D()},j[2]=D,j[3]=z,j[4]=r):r=j[4];let $=r;j[5]!==z||j[6]!==R?(d=()=>{z&&R()},j[5]=z,j[6]=R,j[7]=d):d=j[7];let L=d,O=!!(!z&&(k||E)),B=z?"":void 0,H=z?"":void 0,N=z||!O?3:2;j[8]!==_?(c=_&&(0,s.jsx)(o.az,{flex:"none",children:_}),j[8]=_,j[9]=c):c=j[9];let Y=_?1:2;j[10]!==S?(u=S&&(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(tS,{animated:!0,radius:1,size:1})}),j[10]=S,j[11]=u):u=j[11],j[12]!==S||j[13]!==C?(p=!S&&(0,s.jsx)(tE,{size:1,textOverflow:"ellipsis",weight:"semibold",children:C}),j[12]=S,j[13]=C,j[14]=p):p=j[14],j[15]!==$||j[16]!==u||j[17]!==p||j[18]!==Y||j[19]!==T?(m=(0,s.jsxs)(tI,{__unstable_focusRing:!0,flex:1,onClick:$,paddingLeft:Y,padding:2,tabIndex:T,children:[u,p]}),j[15]=$,j[16]=u,j[17]=p,j[18]=Y,j[19]=T,j[20]=m):m=j[20],j[21]!==v||j[22]!==z?(h=v&&(0,s.jsx)(o.az,{hidden:z,children:(0,s.jsx)(g.wG1,{zOffset:"paneHeader",children:v})}),j[21]=v,j[22]=z,j[23]=h):h=j[23],j[24]!==L||j[25]!==n||j[26]!==m||j[27]!==h||j[28]!==N||j[29]!==c?(f=(0,s.jsxs)(tw,{gap:1,onClick:L,padding:3,paddingBottom:N,sizing:"border",style:n,children:[c,m,h]}),j[24]=L,j[25]=n,j[26]=m,j[27]=h,j[28]=N,j[29]=c,j[30]=f):f=j[30],j[31]!==z||j[32]!==O||j[33]!==E||j[34]!==k?(x=O&&(0,s.jsxs)(o.so,{align:"center",hidden:z,overflow:"auto",paddingBottom:3,paddingX:3,children:[(0,s.jsx)(tk,{flex:1,marginRight:E?3:0,children:k}),E&&E]}),j[31]=z,j[32]=O,j[33]=E,j[34]=k,j[35]=x):x=j[35];let V=!z&&I&&I;return j[36]!==f||j[37]!==x||j[38]!==V||j[39]!==H?(y=(0,s.jsx)(g.wG1,{zOffset:"paneHeader",children:(0,s.jsxs)(o.Zp,{"data-collapsed":H,tone:"inherit",children:[f,x,V]})}),j[36]=f,j[37]=x,j[38]=V,j[39]=H,j[40]=y):y=j[40],j[41]!==w||j[42]!==t||j[43]!==y||j[44]!==B?(b=(0,s.jsx)(o.XS,{zOffset:100,children:(0,s.jsx)(t_,{$border:w,"data-collapsed":B,"data-testid":"pane-header",ref:t,children:y})}),j[41]=w,j[42]=t,j[43]=y,j[44]=B,j[45]=b):b=j[45],b});function tC(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function tD(e){let t=(0,l.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,s.jsx)(tz,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,s.jsx)(tA,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function tz(e){let t,n,i,r,o;let a=(0,l.c)(23),{node:d}=e,{title:c}=(0,g.FP1)(d),{t:u}=(0,g.Bdt)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,s.jsx)(tR,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=tC(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==u||a[7]!==c?(n=m||c||u("status-button.aria-label"),a[5]=m,a[6]=u,a[7]=c,a[8]=n):n=a[8],a[9]!==h||a[10]!==d.hotkey?(i=!h&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=h,a[10]=d.hotkey,a[11]=i):i=a[11];let f=h?p:c;return a[12]!==i||a[13]!==f?(r={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=r):r=a[14],a[15]!==h||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==n||a[21]!==r?(o=(0,s.jsx)(g.pfD,{disabled:h,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:r}),a[15]=h,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=n,a[21]=r,a[22]=o):o=a[22],o}function tR(e){let t,n,i,r,o,a,d;let c=(0,l.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let m=(0,k.cQ)(t),{t:h}=(0,g.Bdt)();c[3]!==m||c[4]!==p?(n=e=>{m.onClick(e),p.onAction()},c[3]=m,c[4]=p,c[5]=n):n=c[5];let f=n;c[6]!==p?(i=tC(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:x,ariaLabel:y,isDisabled:b}=i;c[8]!==y||c[9]!==p.title||c[10]!==h?(r=y||p.title||h("status-button.aria-label"),c[8]=y,c[9]=p.title,c[10]=h,c[11]=r):r=c[11],c[12]!==b||c[13]!==p.hotkey?(o=!b&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=b,c[13]=p.hotkey,c[14]=o):o=c[14];let j=b?x:p.title;return c[15]!==o||c[16]!==j?(a={hotkeys:o,content:j,placement:"bottom",portal:!0},c[15]=o,c[16]=j,c[17]=a):a=c[17],c[18]!==f||c[19]!==m.href||c[20]!==b||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==r||c[25]!==a?(d=(0,s.jsx)(g.pfD,{forwardedAs:"a",disabled:b,href:m.href,icon:p.icon,onClick:f,selected:p.selected,tone:p.tone,"aria-label":r,tooltipProps:a}),c[18]=f,c[19]=m.href,c[20]=b,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=r,c[25]=a,c[26]=d):d=c[26],d}function tA(e){let t,n,i,a,c;let p=(0,l.c)(16),{node:m}=e,{title:h}=(0,g.FP1)(m),f=!!m.disabled,x=m.icon??u.KSC;p[0]!==m.title?(t={content:m.title,portal:!0},p[0]=m.title,p[1]=t):t=p[1],p[2]!==f||p[3]!==x||p[4]!==t||p[5]!==h?(n=(0,s.jsx)(r.$n,{disabled:f,icon:x,label:h,mode:"bleed",tooltipProps:t}),p[2]=f,p[3]=x,p[4]=t,p[5]=h,p[6]=n):n=p[6];let y=(0,d.useId)();return p[7]!==m.children||p[8]!==m.disabled?(i=m.children.map((e,t)=>(0,s.jsx)(tp,{disabled:!!m.disabled,isAfterGroup:m.children[t-1]?.type==="group",node:e},e.key)),p[7]=m.children,p[8]=m.disabled,p[9]=i):i=p[9],p[10]!==i?(a=(0,s.jsx)(o.W1,{children:i}),p[10]=i,p[11]=a):a=p[11],p[12]!==n||p[13]!==y||p[14]!==a?(c=(0,s.jsx)(r.IU,{button:n,id:y,menu:a}),p[12]=n,p[13]=y,p[14]=a,p[15]=c):c=p[15],c}let tP=(0,I.I4)(o.Zp)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,tM=[];function t$(e){let t,n,i,r,o,u,p,m,h,f,g,x,y,b,j,v,_,w;let I=(0,l.c)(41);I[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:r,...o}=e,I[0]=e,I[1]=t,I[2]=n,I[3]=i,I[4]=r,I[5]=o):(t=I[1],n=I[2],i=I[3],r=I[4],o=I[5]);let[S]=(0,d.useState)(tL),[E,k]=(0,d.useState)(null),T=a.sQ(E)?.width||0,C=void 0!==T&&n?T<n:void 0;I[6]===Symbol.for("react.memo_cache_sentinel")?(u={expandedElement:null,panes:[],resizing:!1},I[6]=u):u=I[6];let[D,z]=(0,d.useState)(u);I[7]!==S||I[8]!==E?(p=()=>S.setRootElement(E),m=[S,E],I[7]=S,I[8]=E,I[9]=p,I[10]=m):(p=I[9],m=I[10]),(0,d.useEffect)(p,m),I[11]!==S||I[12]!==T?(h=()=>S.setRootWidth(T),f=[S,T],I[11]=S,I[12]=T,I[13]=h,I[14]=f):(h=I[13],f=I[14]),(0,d.useEffect)(h,f),I[15]!==S?(g=()=>S.subscribe(z),x=[S],I[15]=S,I[16]=g,I[17]=x):(g=I[16],x=I[17]),(0,d.useEffect)(g,x),I[18]!==C||I[19]!==i||I[20]!==r?(y=()=>{void 0!==C&&(C&&i&&i(),!C&&r&&r())},b=[C,i,r],I[18]=C,I[19]=i,I[20]=r,I[21]=y,I[22]=b):(y=I[21],b=I[22]),(0,d.useEffect)(y,b),I[23]!==C||I[24]!==S.collapse||I[25]!==S.expand||I[26]!==S.mount||I[27]!==S.resize||I[28]!==D.expandedElement||I[29]!==D.panes||I[30]!==D.resizing?(v={collapse:S.collapse,collapsed:C,expand:S.expand,expandedElement:D.expandedElement,mount:S.mount,panes:D.panes,resize:S.resize,resizing:D.resizing},I[23]=C,I[24]=S.collapse,I[25]=S.expand,I[26]=S.mount,I[27]=S.resize,I[28]=D.expandedElement,I[29]=D.panes,I[30]=D.resizing,I[31]=v):v=I[31],j=v;let R=C?"":void 0,A=D.resizing?"":void 0,P=T?"":void 0;return I[32]!==t||I[33]!==o||I[34]!==R||I[35]!==A||I[36]!==P?(_=(0,s.jsx)(tP,{"data-ui":"PaneLayout",...o,"data-collapsed":R,"data-resizing":A,"data-mounted":P,ref:k,children:t}),I[32]=t,I[33]=o,I[34]=R,I[35]=A,I[36]=P,I[37]=_):_=I[37],I[38]!==j||I[39]!==_?(w=(0,s.jsx)(c._U.Provider,{value:j,children:_}),I[38]=j,I[39]=_,I[40]=w):w=I[40],w}function tL(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,r={},s=null,l=0,o=null,a=new Map,d=!1;function c(e){i.delete(e),o=e,u()}return{collapse:function(e){i.add(e),o===e&&(o=null),u()},expand:c,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),s&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let r=Array.from(t.childNodes).indexOf(i);if(n.unshift(r),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||tM,r=n.get(t)||tM,s=Math.max(i.length,r.length);for(let e=0;e<s;e+=1){let t=i[e]||-1,n=r[e]||-1;if(t!==n)return t-n}return 0})}(s,t),c(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,s){let l=t.indexOf(i),o=n.get(i);if(!o)return;let c=t[l+1],p=n.get(c);if(p){if("start"===e&&(d=!0,r.left={element:i,flex:o.flex||1,width:i.offsetWidth},r.right={element:c,flex:p.flex||1,width:c.offsetWidth},u()),"move"===e&&r.left&&r.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:l}=function(e,t,n,i){let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},s=t.minWidth??204,l=n.minWidth??204,o=Math.min(t.maxWidth||1/0,r.width-l),a=Math.min(n.maxWidth||1/0,r.width-s),d=s-e.left.width,c=e.right.width-a;d<c&&(d=c);let u=e.right.width-l,p=o-e.left.width;u>p&&(u=p);let m=Math.min(Math.max(i,d),u),h=e.left.width+m,f=e.right.width-m;return{leftFlex:h/r.width*r.flex,leftW:h,rightFlex:f/r.width*r.flex,rightW:f}}(r,o,p,s);a.set(i,{flex:n,width:e}),a.set(c,{flex:l,width:t}),u()}if("end"===e){d=!1;let e=a.get(i),t=a.get(c);n.set(i,{...o,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:e?.flex??o.flex}),n.set(c,{...p,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete r.left,delete r.right,u()}}},setRootElement:function(e){s=e},setRootWidth:function(e){l=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!l)return;let r=[];for(let e of t)e!==o&&r.unshift(e);o&&r.unshift(o);let s=new WeakMap,c=r.length,u=r[0],p=l-(c-1)*51;for(let e of r){let t=n.get(e);if(!t)continue;let r=t.currentMinWidth||t.minWidth||204,l=e===u,o=i.has(e),d=r>p,c=!l&&(o||d),m=a.get(e);s.set(e,{element:e,collapsed:c,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),c?p-=51:p-=r-51}let m=[];for(let e of t){let t=s.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:o||t[t.length-1]||null,panes:m,resizing:d})}}()}function tO(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}let tB=eC(tO);function tH(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,r=[],s=0;for(let e=0;e<t.length;e+=1){let n=t[e];r.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}s+=r.length;let l=[];for(let e of i)l.find(t=>t.key===e.id)||l.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let o=[];for(let t=0;t<n.length;t+=1){let i=n[t],r=i.group&&l.find(e=>e.key===i.group);i.group&&!r&&(r={type:"group",key:i.group,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},l.push(r)),r?r.children.push({type:"item",key:`${s+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):o.push({type:"item",key:`${s+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...o,...l,...r]}let tN=(0,d.forwardRef)(function(e,t){let n,i,o,a,c;let u=(0,l.c)(12);return u[0]!==e?({intent:n,...i}=e,u[0]=e,u[1]=n,u[2]=i):(n=u[1],i=u[2]),u[3]!==n.params||u[4]!==n.searchParams||u[5]!==n.type?(a=(0,d.forwardRef)(function(e,t){return(0,s.jsx)(k.RZ,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),u[3]=n.params,u[4]=n.searchParams,u[5]=n.type,u[6]=a):a=u[6],o=a,u[7]!==o||u[8]!==e.disabled||u[9]!==t||u[10]!==i?(c=e.disabled?(0,s.jsx)(r.$n,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,s.jsx)(r.$n,{...i,as:o,"data-as":"a",ref:t}),u[7]=o,u[8]=e.disabled,u[9]=t,u[10]=i,u[11]=c):c=u[11],c});function tY(e){let t,n,i;let o=(0,l.c)(12),{reveal:a,context:d,loading:c,children:u}=e,p=(0,g.iZK)(),{t:m}=(0,g.Bdt)(eM);if(!a){let e;return o[0]!==u?(e=(0,s.jsx)(s.Fragment,{children:u}),o[0]=u,o[1]=e):e=o[1],e}return o[2]!==d||o[3]!==p||o[4]!==c||o[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,s.jsx)(g.TLO,{context:d,currentUser:p}),o[2]=d,o[3]=p,o[4]=c,o[5]=m,o[6]=t):t=o[6],o[7]!==u?(n=(0,s.jsx)("div",{children:u}),o[7]=u,o[8]=n):n=o[8],o[9]!==t||o[10]!==n?(i=(0,s.jsx)(r.m_,{content:t,portal:!0,children:n}),o[9]=t,o[10]=n,o[11]=i):i=o[11],i}let tV={constrainSize:!0,placement:"bottom",portal:!0},tU=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let r={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[r,t.parameters]:r,searchParams:n?[["perspective",n]]:void 0}};function tF(e){let t,n,i,a,c,p,m,h,f;let x=(0,l.c)(63),{templateItems:y}=e,b=(0,g.bgA)(),{selectedReleaseId:j}=(0,g.QO2)(),v=(0,g.PGu)(),{t:_}=(0,g.Bdt)(eM),{t:w}=(0,g.Bdt)();x[0]!==y||x[1]!==b?(t=[...y,...b],x[0]=y,x[1]=b,x[2]=t):t=x[2];let I=(0,g.Bvg)(t);x[3]!==y?(n={templateItems:y},x[3]=y,x[4]=n):n=x[4];let[S,E]=(0,g.CzS)(n);i=!E&&S?.every(tK);e:{let e;if(!S){let e;x[5]===Symbol.for("react.memo_cache_sentinel")?(e={},x[5]=e):e=x[5],a=e;break e}x[6]!==S?(e=S.reduce(tW,{}),x[6]=S,x[7]=e):e=x[7],a=e}let T=a;if(i){let e,t,n;return x[8]!==_?(e=_("pane-header.disabled-created-button.aria-label"),x[8]=_,x[9]=e):e=x[9],x[10]!==e?(t=(0,s.jsx)(r.$n,{"aria-label":e,icon:u.REV,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),x[10]=e,x[11]=t):t=x[11],x[12]!==E||x[13]!==t?(n=(0,s.jsx)(tY,{context:"create-document-type",reveal:!0,loading:E,children:t}),x[12]=E,x[13]=t,x[14]=n):n=x[14],n}if(1===y.length){let e,t,n,i,r;let l=y[0],o=!T[l.id]?.granted||!v;x[15]!==l||x[16]!==j||x[17]!==b?(e=tU(b,l,j),x[15]=l,x[16]=j,x[17]=b,x[18]=e):e=x[18];let a=e;if(!a)return null;x[19]!==l||x[20]!==I?(t=I(l),x[19]=l,x[20]=I,x[21]=t):t=x[21];let d=l.icon||u.REV;return x[22]!==o||x[23]!==_||x[24]!==w?(n=o?{content:w("new-document.disabled-release.tooltip")}:{content:_("pane-header.create-new-button.tooltip")},x[22]=o,x[23]=_,x[24]=w,x[25]=n):n=x[25],x[26]!==o||x[27]!==a||x[28]!==t.title||x[29]!==d||x[30]!==n?(i=(0,s.jsx)(tN,{"aria-label":t.title,icon:d,intent:a,mode:"bleed",disabled:o,"data-testid":"action-intent-button",tooltipProps:n}),x[26]=o,x[27]=a,x[28]=t.title,x[29]=d,x[30]=n,x[31]=i):i=x[31],x[32]!==o||x[33]!==E||x[34]!==i?(r=(0,s.jsx)(tY,{reveal:o,loading:E,context:"create-document-type",children:i}),x[32]=o,x[33]=E,x[34]=i,x[35]=r):r=x[35],r}let C=!v;if(x[36]!==v||x[37]!==_||x[38]!==w?(c=v?{content:_("pane-header.create-new-button.tooltip")}:{content:w("new-document.disabled-release.tooltip")},x[36]=v,x[37]=_,x[38]=w,x[39]=c):c=x[39],x[40]!==C||x[41]!==c?(p=(0,s.jsx)(r.$n,{icon:u.REV,mode:"bleed",disabled:C,"data-testid":"multi-action-intent-button",tooltipProps:c}),x[40]=C,x[41]=c,x[42]=p):p=x[42],x[43]!==I||x[44]!==E||x[45]!==T||x[46]!==j||x[47]!==_||x[48]!==y||x[49]!==b){let e;x[51]!==I||x[52]!==E||x[53]!==T||x[54]!==j||x[55]!==_||x[56]!==b?(e=(e,t)=>{let n=!T[e.id]?.granted,i=tU(b,e,j),l=b.find(t=>t.id===e.templateId);if(!l||!i)return null;let o=(0,d.forwardRef)((e,t)=>n?(0,s.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,s.jsx)(k.RZ,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));o.displayName="Link";let{title:a}=I({...e,title:e.title||I(l).title});return(0,s.jsx)(tY,{context:"create-document-type",reveal:n,loading:E,children:(0,s.jsx)(r.Dr,{as:o,"data-as":n?"button":"a",text:a,"aria-label":n?_("pane-header.disabled-created-button.aria-label"):a,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},x[51]=I,x[52]=E,x[53]=T,x[54]=j,x[55]=_,x[56]=b,x[57]=e):e=x[57],m=y.map(e),x[43]=I,x[44]=E,x[45]=T,x[46]=j,x[47]=_,x[48]=y,x[49]=b,x[50]=m}else m=x[50];return x[58]!==m?(h=(0,s.jsx)(o.W1,{children:m}),x[58]=m,x[59]=h):h=x[59],x[60]!==p||x[61]!==h?(f=(0,s.jsx)(r.IU,{button:p,id:"create-menu",menu:h,popover:tV}),x[60]=p,x[61]=h,x[62]=f):f=x[62],f}function tW(e,t){return e[t.id]=t,e}function tK(e){return!e.granted}function tQ(e){return null!=e}let tq=e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))},tJ=(0,d.memo)(function(e){let{initialValueTemplateItems:t=g.Mlv,menuItems:n=g.Mlv,menuItemGroups:i=g.Mlv,actionHandlers:r=g.MlF}=e,l=(0,g.bgA)(),a=(0,d.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in r))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?r[e.action]:null;return!!t&&(t(e.params),!0)},[r]),c=(0,d.useMemo)(()=>tH({actionHandler:a,menuItemGroups:i,menuItems:n.filter(e=>e.intent?.type!=="create")}),[a,i,n]),u=(0,d.useMemo)(()=>c.filter(tO),[c]),p=(0,d.useMemo)(()=>c.filter(tB),[c]),m=(0,d.useMemo)(()=>n.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,r=Array.isArray(n)?n[1]:void 0,s=i.template||i.type;if(!s)return null;let o=l.find(e=>e.id===s);return o?{item:e,template:o,templateParams:r,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(tQ).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:r})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:r,schemaType:n.schemaType})),[n,l]),h=(0,d.useMemo)(()=>eT([...m,...t],e=>tq([e.initialDocumentId,e.templateId,e.parameters])),[m,t]);return(0,s.jsxs)(o.so,{gap:1,children:[h.length>0&&(0,s.jsx)(tF,{templateItems:h}),u.map(e=>(0,s.jsx)(tD,{node:e},e.key)),p.length>0&&(0,s.jsx)(ty,{nodes:p})]})});function tG(e){let t,n,i,r,o,a,d;let c=(0,l.c)(16),{t:u}=(0,g.Bdt)(eM),{layout:p,value:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},c[0]=t):t=c[0],c[1]!==m._type?(n={documentType:m._type},c[1]=m._type,c[2]=n):n=c[2],c[3]!==u||c[4]!==n?(i=(0,s.jsx)("em",{children:(0,s.jsx)(g.HTc,{t:u,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),c[3]=u,c[4]=n,c[5]=i):i=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},c[6]=r):r=c[6],c[7]!==m._id?(o={documentId:m._id},c[7]=m._id,c[8]=o):o=c[8],c[9]!==u||c[10]!==o?(a=(0,s.jsx)(g.HTc,{t:u,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:o}),c[9]=u,c[10]=o,c[11]=a):a=c[11],c[12]!==p||c[13]!==i||c[14]!==a?(d=(0,s.jsx)(g.m6P,{title:i,subtitle:a,media:tZ,layout:p}),c[12]=p,c[13]=i,c[14]=a,c[15]=d):d=c[15],d}function tZ(){return(0,s.jsx)(u.sAQ,{})}function tX(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function t0(e){let t,n,i,r,a,c,p,m;let h=(0,l.c)(42),{icon:f,id:y,layout:b,pressed:j,schemaType:v,selected:_,title:w,value:I,margin:S,marginBottom:E,marginTop:k}=e,T=void 0===b?"default":b,C=(0,g.pDY)(),D=(0,g.yKO)(),{ChildLink:z}=eJ(),R=(0,g.cVB)(y),A=!!(v&&v.name&&C.get(v.name)),[P,M]=(0,d.useState)(!1);e:{let e,n,i,r;if(I&&(0,x.ME)(I)){let e,n;if(!v||!A){let e;h[0]!==I?(e=(0,s.jsx)(tG,{value:I}),h[0]=I,h[1]=e):e=h[1],t=e;break e}h[2]!==f||h[3]!==v?(e=tX(f,v,u.pyG),h[2]=f,h[3]=v,h[4]=e):e=h[4],h[5]!==R||h[6]!==D||h[7]!==T||h[8]!==v||h[9]!==e||h[10]!==I?(n=(0,s.jsx)(eU,{documentPreviewStore:D,icon:e,layout:T,schemaType:v,value:I,presence:R}),h[5]=R,h[6]=D,h[7]=T,h[8]=v,h[9]=e,h[10]=I,h[11]=n):n=h[11],t=n;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(o.az,{style:e,children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:(0,s.jsx)(u.vKP,{})})}),h[13]=n):n=h[13],h[14]!==f||h[15]!==v?(i=tX(f,v,u.sjq),h[14]=f,h[15]=v,h[16]=i):i=h[16],h[17]!==i||h[18]!==w?(r=(0,s.jsx)(g.m6P,{status:n,icon:i,layout:"compact",title:w}),h[17]=i,h[18]=w,h[19]=r):r=h[19],t=r}let $=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey){M(!1);return}M(!0)},h[20]=n):n=h[20];let L=n;h[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>M(!1),h[21]=i):i=h[21],h[22]!==_?(r=[_],h[22]=_,h[23]=r):r=h[23],(0,d.useEffect)(i,r);let[O,B]=(0,d.useState)(!1),H=(0,d.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{H.current=setTimeout(()=>(0,d.startTransition)(()=>B(!0)),400)},h[24]=a):a=h[24];let N=a;h[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{H.current&&clearTimeout(H.current),(0,d.startTransition)(()=>B(!1))},h[25]=c):c=h[25];let Y=c,V=`pane-item-${w}`,U=_||P;return h[26]!==y||h[27]!==O||h[28]!==v||h[29]!==I?(p=O&&v?.name&&I&&(0,x.ME)(I)&&(0,s.jsx)(t1,{documentId:y,documentType:v.name}),h[26]=y,h[27]=O,h[28]=v,h[29]=I,h[30]=p):p=h[30],h[31]!==y||h[32]!==S||h[33]!==E||h[34]!==k||h[35]!==j||h[36]!==$||h[37]!==p||h[38]!==V||h[39]!==z||h[40]!==U?(m=(0,s.jsxs)(g.Ns2,{"data-testid":V,__unstable_focusRing:!0,as:z,childId:y,"data-as":"a",margin:S,marginBottom:E,marginTop:k,onClick:L,onMouseEnter:N,onMouseLeave:Y,pressed:j,radius:2,selected:U,sizing:"border",tabIndex:-1,tone:"inherit",children:[$,p]}),h[31]=y,h[32]=S,h[33]=E,h[34]=k,h[35]=j,h[36]=$,h[37]=p,h[38]=V,h[39]=z,h[40]=U,h[41]=m):m=h[41],m}function t1(e){let{documentId:t,documentType:n}=e;return(0,g.zX2)(t,n),null}t1.displayName="PreloadDocumentPane";let t2=(0,d.memo)(e=>{let t;let n=(0,l.c)(6),{actions:i,children:r,actionProps:o,onActionComplete:a,group:d}=e;return n[0]!==o||n[1]!==i||n[2]!==r||n[3]!==d||n[4]!==a?(t=(0,s.jsx)(g.N6R,{onReset:a,hooks:i,args:o,group:d,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=d,n[4]=a,n[5]=t):t=n[5],t});t2.displayName="Memo(RenderActionCollectionState)";let t3=(0,d.memo)(e=>{let t;let n=(0,l.c)(4),{badges:i,children:r,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==r?(t=(0,s.jsx)(g.N6R,{hooks:i,args:o,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=t):t=n[3],t});function t4(e){let t,n,i;let r=(0,l.c)(12),{children:a,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,g=void 0===h?"critical":h;return r[0]!==f?(t=(0,s.jsx)(tT,{title:f}),r[0]=f,r[1]=t):t=r[1],r[2]!==a?(n=(0,s.jsx)(td,{overflow:"auto",children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:a})}),r[2]=a,r[3]=n):n=r[3],r[4]!==d||r[5]!==c||r[6]!==u||r[7]!==p||r[8]!==t||r[9]!==n||r[10]!==g?(i=(0,s.jsxs)(tl,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:g,children:[t,n]}),r[4]=d,r[5]=c,r[6]=u,r[7]=p,r[8]=t,r[9]=n,r[10]=g,r[11]=i):i=r[11],i}function t5(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(g.Cu5){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,P.of)(null);return(0,M.h)(...t.map(e=>n.pipe((0,ei.u)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,er.c)(e.ms))))}t3.displayName="Memo(RenderBadgeCollectionState)";let t6=(0,I.I4)(o.so)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,t8=(0,d.memo)(e=>{let t,n,i,r,o,c,u,p,m,h;let f=(0,l.c)(28),{delay:x,flex:y,message:b,minWidth:j,paneKey:v,path:_,selected:w,title:I,tone:S}=e,E=void 0===x?300:x,k=void 0===b?t5:b,{t:T}=(0,g.Bdt)(eM);e:{if("function"==typeof k){let e;f[0]!==k||f[1]!==_?(e=k(_?_.split(";"):[]),f[0]=k,f[1]=_,f[2]=e):e=f[2],t=e;break e}t=k}let C=t;f[3]!==C||f[4]!==T?(n=()=>"string"==typeof C?C:T("panes.resolving.default-message"),f[3]=C,f[4]=T,f[5]=n):n=f[5];let[D,z]=(0,d.useState)(n);f[6]!==C||f[7]!==T?(i=()=>{if("object"!=typeof C||"function"!=typeof C.subscribe)return;let e=C.subscribe(e=>{z("messageKey"in e?T(e.messageKey):e.message)});return()=>e.unsubscribe()},r=[C,T],f[6]=C,f[7]=T,f[8]=i,f[9]=r):(i=f[8],r=f[9]),(0,d.useEffect)(i,r);let[R,A]=(0,d.useState)(null),[P,M]=(0,d.useState)(!1);f[10]!==R?(o=()=>{if(R)return(0,a.X)(()=>M(!0))},c=[R],f[10]=R,f[11]=o,f[12]=c):(o=f[11],c=f[12]),(0,d.useEffect)(o,c);let $=P?"":void 0,L=I||D;f[13]!==L?(u=(0,s.jsx)(g.gd4,{showText:!0,title:L}),f[13]=L,f[14]=u):u=f[14],f[15]!==u||f[16]!==$?(p=(0,s.jsx)(t6,{align:"center","data-mounted":$,direction:"column",height:"fill",justify:"center",ref:A,children:u}),f[15]=u,f[16]=$,f[17]=p):p=f[17];let O=p;return f[18]!==O||f[19]!==E?(m=(0,s.jsx)(td,{children:O}),f[18]=O,f[19]=E,f[20]=m):m=f[20],f[21]!==y||f[22]!==j||f[23]!==v||f[24]!==w||f[25]!==m||f[26]!==S?(h=(0,s.jsx)(tl,{flex:y,id:v,minWidth:j,selected:w,tone:S,children:m}),f[21]=y,f[22]=j,f[23]=v,f[24]=w,f[25]=m,f[26]=S,f[27]=h):h=f[27],h});function t7(){let e=(0,d.useContext)(c.Fi);if(!e)throw Error("DocumentPane: missing context value");return e}function t9(e){let t,n;let i=(0,l.c)(8),{children:r,documentId:o,documentType:a}=e;return i[0]!==r||i[1]!==o||i[2]!==a?(t=(0,s.jsx)(ne,{documentId:o,documentType:a,children:r}),i[0]=r,i[1]=o,i[2]=a,i[3]=t):t=i[3],i[4]!==o||i[5]!==a||i[6]!==t?(n=(0,s.jsx)(g.ByQ,{documentId:o,documentType:a,children:t}),i[4]=o,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function ne(e){let t,n,i,r,o,a;let c=(0,l.c)(24),{children:u,documentId:p,documentType:m}=e,{enabled:h}=(0,g.Dsj)(),{connectionState:f,onPathOpen:x,inspector:y,openInspector:b}=t7(),{selectedReleaseId:j}=(0,g.QO2)(),{params:v,setParams:_,createPathWithParams:w}=eJ(),I=v?.comment,S=(0,d.useRef)(v);c[0]!==v?(t=()=>{S.current=v},n=[v],c[0]=v,c[1]=t,c[2]=n):(t=c[1],n=c[2]),(0,d.useLayoutEffect)(t,n),c[3]!==w?(i=e=>{let t=w({...S.current,comment:e,inspect:g.nHq});return`${window.location.origin}${t}`},c[3]=w,c[4]=i):i=c[4];let E=i;c[5]!==_?(r=()=>{_({...S.current,comment:void 0})},c[5]=_,c[6]=r):r=c[6];let k=r;c[7]!==y?.name||c[8]!==b?(o=()=>{y?.name!==g.nHq&&b(g.nHq)},c[7]=y?.name,c[8]=b,c[9]=o):o=c[9];let T=o;if(!h){let e;return c[10]!==u?(e=(0,s.jsx)(s.Fragment,{children:u}),c[10]=u,c[11]=e):e=c[11],e}let C=y?.name===g.nHq,D="connecting"===f;return c[12]!==u||c[13]!==p||c[14]!==m||c[15]!==E||c[16]!==k||c[17]!==T||c[18]!==x||c[19]!==I||c[20]!==j||c[21]!==C||c[22]!==D?(a=(0,s.jsx)(g.ixz,{documentId:p,documentType:m,getCommentLink:E,isCommentsOpen:C,isConnecting:D,onClearSelectedComment:k,onCommentsOpen:T,onPathOpen:x,selectedCommentId:I,sortOrder:"desc",type:"field",releaseId:j,children:u}),c[12]=u,c[13]=p,c[14]=m,c[15]=E,c[16]=k,c[17]=T,c[18]=x,c[19]=I,c[20]=j,c[21]=C,c[22]=D,c[23]=a):a=c[23],a}t8.displayName="Memo(LoadingPane)";let nt=!1,nn={},ni=Symbol("LOADING_PANE"),nr="documentPanelPortalElement";function ns(){let e=(0,d.useContext)(c.DI);if(!e)throw Error("StructureTool: missing context value");return e}let nl={},no="inspect:",na=[{id:"inspectors"},{id:"links"}],nd="sanity/structure/history";function nc(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:r}=e,o=i.length,[a,c]=(0,d.useState)(()=>Array.from(Array(o)));(0,d.useEffect)(()=>{if(a.length!==o){let e=Array.from(Array(o));for(let t=0;t<o;t++)e[t]=a[t];c(e)}},[o,a]);let u=(0,d.useCallback)((e,t)=>{c(n=>{let i=[...n];return i[e]=t,i})},[]);(0,d.useEffect)(()=>{r(a.filter(Boolean))},[a,r]);let p=(0,d.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:r}){return(0,d.memo)(function(){let s,o,a;let c=(0,l.c)(4);c[0]===Symbol.for("react.memo_cache_sentinel")?(s={documentId:e,documentType:t},c[0]=s):s=c[0];let u=r(s),p=(0,g.$6H)(u);return c[1]!==p?(o=()=>{i(n,p)},a=[p],c[1]=p,c[2]=o,c[3]=a):(o=c[2],a=c[3]),(0,d.useEffect)(o,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:u,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,u]);return(0,s.jsx)(s.Fragment,{children:p.map(([e,t])=>t&&(0,s.jsx)(e,{},t))})}function nu(){let e,t;let n=(0,l.c)(19),{connectionState:i,schemaType:r,title:s,displayed:o}=t7(),{t:a}=(0,g.Bdt)(eM),d=!!o;n[0]!==o||n[1]!==r||n[2]!==d?(e={enabled:d,schemaType:r,value:o},n[0]=o,n[1]=r,n[2]=d,n[3]=e):e=n[3];let{error:c,value:u}=(0,g.MOl)(e);if("connecting"===i&&!d){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},n[4]=e):e=n[4],e}if(s){let e;return n[5]!==s?(e={error:void 0,title:s},n[5]=s,n[6]=e):e=n[6],e}if(!o){let e,t;let i=r?.title||r?.name;return n[7]!==a||n[8]!==i?(e=a("panes.document-header-title.new.text",{schemaType:i}),n[7]=a,n[8]=i,n[9]=e):e=n[9],n[10]!==e?(t={error:void 0,title:e},n[10]=e,n[11]=t):t=n[11],t}if(c){let e,t;return n[12]!==c.message||n[13]!==a?(e=a("panes.document-list-pane.error.text",{error:c.message}),n[12]=c.message,n[13]=a,n[14]=e):e=n[14],n[15]!==e?(t={error:e,title:void 0},n[15]=e,n[16]=t):t=n[16],t}let p=u?.title;return n[17]!==p?(t={error:void 0,title:p},n[17]=p,n[18]=t):t=n[18],t}nc.displayName="DocumentInspectorMenuItemsResolver";let np=["patch","commit"],nm=(0,d.memo)(function(){let e,t,n,i,r;let o=(0,l.c)(12),{push:c}=(0,a.dj)(),{documentId:u,documentType:p,value:m}=t7(),h=nu(),f=h.error,x=(0,g.cUp)(u,p),y=(0,d.useRef)(x),b=eJ(),{t:j}=(0,g.Bdt)(eM);e:{if(!h.title&&!f&&!np.includes(x?.op)&&"string"==typeof m.title&&x?.type==="success"){e=m.title;break e}e=h.title}let v=e;o[0]!==j||o[1]!==v?(t=v||j("panes.document-operation-results.operation-undefined-title"),o[0]=j,o[1]=v,o[2]=t):t=o[2];let _=t;o[3]!==_?(n=_.length>25?`${_.slice(0,25)}...`:_,o[3]=_,o[4]=n):n=o[4];let w=n;return o[5]!==w||o[6]!==x||o[7]!==b||o[8]!==c||o[9]!==j?(i=()=>{let e;if(x&&x!==y.current)return"error"===x.type&&c({closable:!0,duration:3e4,status:"error",title:j("panes.document-operation-results.operation-error",{context:x.op}),description:(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:j("panes.document-operation-results.error.summary.title")}),x.error.message]})}),"success"!==x.type||np.includes(x.op)||c({closable:!0,status:"success",title:(0,s.jsx)(g.HTc,{context:x.op,i18nKey:"panes.document-operation-results.operation-success",t:j,values:{op:x.op,title:w},components:{Strong:"strong"}})}),"success"===x.type&&"delete"===x.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),y.current=x,()=>clearTimeout(e)},r=[x,b,c,j,w],o[5]=w,o[6]=x,o[7]=b,o[8]=c,o[9]=j,o[10]=i,o[11]=r):(i=o[10],r=o[11]),(0,d.useEffect)(i,r),null}),nh=e=>!0===e.liveEdit,nf=(0,I.I4)(o.Zp)({position:"relative",zIndex:1,lineHeight:0});function ng(e){let t,n,i,a,d,c,p,m,h,f,x,y;let b=(0,l.c)(25);b[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:a,title:c,...d}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=i,b[4]=a,b[5]=d,b[6]=c):(t=b[1],n=b[2],i=b[3],a=b[4],d=b[5],c=b[6]);let{t:j}=(0,g.Bdt)(eM);return b[7]!==c?(p=(0,s.jsx)(o.az,{flex:1,padding:3,children:(0,s.jsx)(o.EY,{as:"h1",size:1,weight:"medium",children:c})}),b[7]=c,b[8]=p):p=b[8],b[9]!==j?(m=j("document-inspector.close-button.tooltip"),b[9]=j,b[10]=m):m=b[10],b[11]!==m?(h={content:m},b[11]=m,b[12]=h):h=b[12],b[13]!==n||b[14]!==a||b[15]!==h?(f=(0,s.jsx)(o.az,{flex:"none",padding:1,children:(0,s.jsx)(r.$n,{"aria-label":n,icon:u.USm,mode:"bleed",onClick:a,tooltipProps:h})}),b[13]=n,b[14]=a,b[15]=h,b[16]=f):f=b[16],b[17]!==p||b[18]!==f?(x=(0,s.jsxs)(o.so,{padding:2,children:[p,f]}),b[17]=p,b[18]=f,b[19]=x):x=b[19],b[20]!==t||b[21]!==i||b[22]!==d||b[23]!==x?(y=(0,s.jsxs)(nf,{...d,as:i,children:[x,t]}),b[20]=t,b[21]=i,b[22]=d,b[23]=x,b[24]=y):y=b[24],y}function nx(e){let t,n,i;let r=(0,l.c)(14),{documentId:a,documentType:d,flex:c}=e,{collapsed:u}=ta(),{closeInspector:p,inspector:m}=t7(),{features:h}=ns();r[0]!==p||r[1]!==m?(t=()=>{m&&p(m.name)},r[0]=p,r[1]=m,r[2]=t):t=r[2];let f=t;if(u||!m)return null;let x=m.component;r[3]!==x||r[4]!==a||r[5]!==d||r[6]!==f?(n=(0,s.jsx)(x,{onClose:f,documentId:a,documentType:d}),r[3]=x,r[4]=a,r[5]=d,r[6]=f,r[7]=n):n=r[7];let y=n;if(h.resizablePanes){let e;return r[8]!==y||r[9]!==c?(e=(0,s.jsx)(g.cMO,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:y}),r[8]=y,r[9]=c,r[10]=e):e=r[10],e}return r[11]!==y||r[12]!==c?(i=(0,s.jsx)(o.az,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:y}),r[11]=y,r[12]=c,r[13]=i):i=r[13],i}function ny(e,t,n){let i,r,s,o,a;let d=(0,l.c)(16),c=(0,g.P$5)();d[0]!==t||d[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),d[0]=t,d[1]=e,d[2]=i):i=d[2];let u=i.join(".");if(d[3]!==n||d[4]!==c||d[5]!==u){let e;d[7]!==n?(e=e=>null===e?n:e,d[7]=n,d[8]=e):e=d[8],s=c.getKey(u).pipe((0,$.T)(e)),d[3]=n,d[4]=c,d[5]=u,d[6]=s}else s=d[6];r=s;let p=(0,E.J)(r,n);d[9]!==c||d[10]!==u||d[11]!==p?(o=e=>{e!==p&&c.setKey(u,e)},d[9]=c,d[10]=u,d[11]=p,d[12]=o):o=d[12];let m=o;return d[13]!==m||d[14]!==p?(a=[p,m],d[13]=m,d[14]=p,d[15]=a):a=d[15],a}let nb={id:"parsed",title:"document-inspector.view-mode.parsed"},nj={id:"raw",title:"document-inspector.view-mode.raw-json"},nv=[nb,nj],n_=new ep({maxSize:1e3});function nw(e){let{path:t}=e,n=n_.get(t);void 0!==n&&n_.set(t,!n)}function nI(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function nS(e){nI(e.currentTarget)}function nE(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),nI(e.currentTarget))}let nk=I.I4.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return(0,I.AH)`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,o.D0)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,o.D0)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,o.D0)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,o.D0)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,o.D0)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function nT(e){let t,n,i;let r=(0,l.c)(8),{onChange:a,query:d}=e;r[0]!==a?(t=e=>a(e.target.value),r[0]=a,r[1]=t):t=r[1];let c=t,{t:p}=(0,g.Bdt)(eM);r[2]!==p?(n=p("document-inspector.search.placeholder"),r[2]=p,r[3]=n):n=r[3];let m=d||"";return r[4]!==c||r[5]!==n||r[6]!==m?(i=(0,s.jsx)(o.ks,{icon:u.WIv,onChange:c,placeholder:n,radius:2,value:m}),r[4]=c,r[5]=n,r[6]=m,r[7]=i):i=r[7],i}function nC(e){let t,n,i,d,c,u,p,m,h,f,x,y,b,j,v,_;let w=(0,l.c)(49),{value:I}=e,{onInspectClose:S,paneKey:E}=t7(),k=`${E}_inspect_`,[T,C]=ny("inspect-view-mode",null,"parsed");w[0]!==T?(t=nv.find(e=>e.id===T),w[0]=T,w[1]=t):t=w[1];let D=t;w[2]!==C?(n=()=>{C(nb.id)},w[2]=C,w[3]=n):n=w[3];let z=n;w[4]!==C?(i=()=>{C(nj.id)},w[4]=C,w[5]=i):i=w[5];let R=i,{t:A}=(0,g.Bdt)(eM),P=`${k}dialog`;w[6]!==A||w[7]!==I?(d=(0,g.u4i)(I)&&(0,g.KgX)(I._id)&&(0,g.KgX)(I._type)?(0,s.jsx)(g.HTc,{t:A,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,s.jsx)("em",{children:(0,s.jsx)(eL,{document:I})})}}):(0,s.jsx)("em",{children:A("document-inspector.dialog.title-no-value")}),w[6]=A,w[7]=I,w[8]=d):d=w[8],w[9]===Symbol.for("react.memo_cache_sentinel")?(c={position:"sticky",bottom:0,zIndex:3},w[9]=c):c=w[9];let M=`${k}tabpanel`,$=`${k}tab-${nb.id}`;w[10]!==A?(u=A(nb.title),w[10]=A,w[11]=u):u=w[11];let L=D===nb;w[12]!==z||w[13]!==M||w[14]!==$||w[15]!==u||w[16]!==L?(p=(0,s.jsx)(r.oz,{"aria-controls":M,id:$,label:u,onClick:z,selected:L}),w[12]=z,w[13]=M,w[14]=$,w[15]=u,w[16]=L,w[17]=p):p=w[17];let O=`${k}tabpanel`,B=`${k}tab-${nj.id}`;w[18]!==A?(m=A(nj.title),w[18]=A,w[19]=m):m=w[19];let H=D===nj;w[20]!==R||w[21]!==O||w[22]!==B||w[23]!==m||w[24]!==H?(h=(0,s.jsx)(r.oz,{"aria-controls":O,id:B,label:m,onClick:R,selected:H}),w[20]=R,w[21]=O,w[22]=B,w[23]=m,w[24]=H,w[25]=h):h=w[25],w[26]!==p||w[27]!==h?(f=(0,s.jsx)(o.Zp,{padding:3,paddingTop:0,shadow:1,style:c,children:(0,s.jsxs)(o.wb,{space:1,children:[p,h]})}),w[26]=p,w[27]=h,w[28]=f):f=w[28];let N=`${k}tab-${T}`,Y=`${k}tabpanel`;return w[29]===Symbol.for("react.memo_cache_sentinel")?(x={outline:"none"},w[29]=x):x=w[29],w[30]!==I||w[31]!==D?(y=D===nb&&(0,s.jsx)(nk,{children:(0,s.jsx)(eu.A,{data:I,isExpanded:function e(t,n){let i=n_.get(t);return void 0===i?(n_.set(t,Array.isArray(n)||(0,g.u4i)(n)),e(t,n)):i},onClick:nw,search:nT,filterOptions:{ignoreCase:!0}})}),w[30]=I,w[31]=D,w[32]=y):y=w[32],w[33]!==I||w[34]!==D?(b=D===nj&&(0,s.jsx)(o.Cy,{language:"json",tabIndex:0,onKeyDown:nE,onDoubleClick:nS,onFocus:nS,size:1,children:JSON.stringify(I,null,2)}),w[33]=I,w[34]=D,w[35]=b):b=w[35],w[36]!==N||w[37]!==Y||w[38]!==y||w[39]!==b?(j=(0,s.jsxs)(a.Kp,{"aria-labelledby":N,flex:1,id:Y,overflow:"auto",padding:4,style:x,children:[y,b]}),w[36]=N,w[37]=Y,w[38]=y,w[39]=b,w[40]=j):j=w[40],w[41]!==f||w[42]!==j?(v=(0,s.jsxs)(o.so,{direction:"column",height:"fill",children:[f,j]}),w[41]=f,w[42]=j,w[43]=v):v=w[43],w[44]!==S||w[45]!==v||w[46]!==P||w[47]!==d?(_=(0,s.jsx)(r.lG,{bodyHeight:"fill",id:P,header:d,onClose:S,onClickOutside:S,padding:!1,width:2,children:v}),w[44]=S,w[45]=v,w[46]=P,w[47]=d,w[48]=_):_=w[48],_}function nD(e){let t,n,i,a,d,c,u,p,m,h,f;let g=(0,l.c)(22);g[0]!==e?({action:n,content:i,icon:t,tone:d,paddingY:c,...a}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=a,g[5]=d,g[6]=c):(t=g[1],n=g[2],i=g[3],a=g[4],d=g[5],c=g[6]);let x=void 0===d?"transparent":d,y=void 0===c?2:c;return g[7]!==t?(u=t&&(0,s.jsx)(o.EY,{size:0,children:(0,s.jsx)(t,{})}),g[7]=t,g[8]=u):u=g[8],g[9]!==i?(p=(0,s.jsx)(o.so,{align:"center",flex:1,gap:2,paddingY:3,children:i}),g[9]=i,g[10]=p):p=g[10],g[11]!==n?(m=n&&(0,s.jsx)(r.$n,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),g[11]=n,g[12]=m):m=g[12],g[13]!==u||g[14]!==p||g[15]!==m?(h=(0,s.jsxs)(o.so,{align:"center",gap:3,children:[u,p,m]}),g[13]=u,g[14]=p,g[15]=m,g[16]=h):h=g[16],g[17]!==y||g[18]!==a||g[19]!==h||g[20]!==x?(f=(0,s.jsx)(o.Zp,{borderBottom:!0,paddingX:4,paddingY:y,tone:x,...a,children:h}),g[17]=y,g[18]=a,g[19]=h,g[20]=x,g[21]=f):f=g[21],f}function nz(){let e=(0,l.c)(3),{isDeleted:t,isDeleting:n}=t7(),{selectedPerspective:i}=(0,g.QO2)();if(!(0,g.xo4)(i)&&!(0,g.o2j)(i)&&"archived"===i.state){let t;return e[0]!==i?(t=(0,s.jsx)(nA,{release:i}),e[0]=i,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(nR,{}),e[2]=t):t=e[2],t}}function nR(){let e,t,n,i,r;let a=(0,l.c)(17),{documentId:d,documentType:c,lastNonDeletedRevId:p}=t7(),{restore:m}=(0,g.QSs)(d,c),{navigateIntent:h}=(0,k.rd)();a[0]!==d||a[1]!==c||a[2]!==p||a[3]!==h||a[4]!==m?(e=()=>{p&&(m.execute(p),h("edit",{id:d,type:c}))},a[0]=d,a[1]=c,a[2]=p,a[3]=h,a[4]=m,a[5]=e):e=a[5];let f=e,{t:x}=(0,g.Bdt)(eM);return a[6]!==f||a[7]!==p||a[8]!==x?(t=p?{onClick:f,text:x("banners.deleted-document-banner.restore-button.text")}:void 0,a[6]=f,a[7]=p,a[8]=x,a[9]=t):t=a[9],a[10]!==x?(n=x("banners.deleted-document-banner.text"),a[10]=x,a[11]=n):n=a[11],a[12]!==n?(i=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:n}),a[12]=n,a[13]=i):i=a[13],a[14]!==t||a[15]!==i?(r=(0,s.jsx)(nD,{action:t,content:i,"data-testid":"deleted-document-banner",icon:u.Eoh}),a[14]=t,a[15]=i,a[16]=r):r=a[16],r}let nA=e=>{let t,n;let i=(0,l.c)(5),{release:r}=e,{t:a}=(0,g.Bdt)(),d=r.metadata?.title;return i[0]!==d?(t={title:d},i[0]=d,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,s.jsx)(nD,{tone:"caution",content:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(g.HTc,{t:a,i18nKey:"banners.deleted-release-banner.text",values:t})}),"data-testid":"deleted-release-banner",icon:u.tkA}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n};function nP(){let e,t;let n=(0,l.c)(5),{schemaType:i}=t7(),{t:r}=(0,g.Bdt)(eM);return(0,x.fq)(i)?(n[0]!==r?(e=(0,s.jsx)(g.HTc,{t:r,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=r,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,s.jsx)(nD,{content:(0,s.jsxs)(o.EY,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:u.YZv}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let nM=(0,eh.g_)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),n$=(0,eh.g_)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),nL=(0,I.I4)(o.az)`
  box-sizing: border-box;
`;function nO(e){let t,n,i,c,u,p,m,h,f,x,y,b,j,v,_;let w=(0,l.c)(56),{onClose:I,onRequestSubmitted:S}=e,{t:k}=(0,g.Bdt)(eM),T=(0,em.Jr)(),C=`request-permissions-${(0,d.useId)()}`,D=(0,g.M91)();w[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},w[0]=t):t=w[0];let z=(0,g.tH7)(t),R=(0,a.dj)(),A=(0,g.YKH)(),[M,B]=(0,d.useState)(!1),[H,N]=(0,d.useState)(""),[Y,V]=(0,d.useState)(),[U,F]=(0,d.useState)(!1),[W,K]=(0,d.useState)(!1);e:{let e;let t="administrator";if(!D||!z){let e;w[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,P.of)(t),w[1]=e):e=w[1],n=e;break e}if(w[2]!==z.observable||w[3]!==D){let n,i;w[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(nH).find(nB)?"editor":t,w[5]=n):n=w[5],w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,P.of)(t),w[6]=i):i=w[6],e=z.observable.request({url:`/projects/${D}/roles`}).pipe((0,$.T)(n),(0,L.Z)(t),(0,O.W)(i)),w[2]=z.observable,w[3]=D,w[4]=e}else e=w[4];n=e}let Q=(0,E.J)(n);w[7]!==z||w[8]!==H||w[9]!==S||w[10]!==D||w[11]!==Q||w[12]!==T||w[13]!==R?(i=()=>{B(!0),z.request({url:`/access/project/${D}/requests`,method:"post",body:{note:H,requestUrl:window?.location.href,requestedRole:Q,type:"role"}}).then(e=>{e&&(S&&S(),T.log(n$),R.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(F(!0),V(n)),409===t?(K(!0),V(n)):R.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{B(!1)})},w[7]=z,w[8]=H,w[9]=S,w[10]=D,w[11]=Q,w[12]=T,w[13]=R,w[14]=i):i=w[14];let q=i,J=A.fullscreen;w[15]!==k?(c=k("request-permission-dialog.header.text"),w[15]=k,w[16]=c):c=w[16],w[17]!==k?(u=k("confirm-dialog.cancel-button.fallback-text"),w[17]=k,w[18]=u):u=w[18],w[19]!==I||w[20]!==u?(p={onClick:I,text:u},w[19]=I,w[20]=u,w[21]=p):p=w[21];let G=U||W;return w[22]!==k?(m=k("request-permission-dialog.confirm-button.text"),w[22]=k,w[23]=m):m=w[23],w[24]!==M||w[25]!==q||w[26]!==G||w[27]!==m?(h={onClick:q,loading:M,disabled:G,text:m,tone:"primary",type:"submit"},w[24]=M,w[25]=q,w[26]=G,w[27]=m,w[28]=h):h=w[28],w[29]!==h||w[30]!==p?(f={cancelButton:p,confirmButton:h},w[29]=h,w[30]=p,w[31]=f):f=w[31],w[32]!==k?(x=k("request-permission-dialog.description.text"),w[32]=k,w[33]=x):x=w[33],w[34]!==x?(y=(0,s.jsx)(o.EY,{children:x}),w[34]=x,w[35]=y):y=w[35],w[36]!==W||w[37]!==U||w[38]!==M||w[39]!==Y||w[40]!==H||w[41]!==q||w[42]!==k?(b=U||W?(0,s.jsx)(o.Zp,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,s.jsxs)(o.EY,{size:1,children:[U&&(0,s.jsx)(s.Fragment,{children:Y??k("request-permission-dialog.warning.limit-reached.text")}),W&&(0,s.jsx)(s.Fragment,{children:Y??k("request-permission-dialog.warning.denied.text")})]})}):(0,s.jsxs)(o.BJ,{space:3,paddingBottom:0,children:[(0,s.jsx)(o.ks,{placeholder:k("request-permission-dialog.note-input.placeholder.text"),disabled:M,onKeyDown:e=>{"Enter"===e.key&&q()},maxLength:150,value:H,onChange:e=>{N(e.currentTarget.value)}}),(0,s.jsx)(o.EY,{align:"right",muted:!0,size:1,children:`${H.length}/150`})]}),w[36]=W,w[37]=U,w[38]=M,w[39]=Y,w[40]=H,w[41]=q,w[42]=k,w[43]=b):b=w[43],w[44]!==y||w[45]!==b?(j=(0,s.jsx)(nL,{children:(0,s.jsxs)(o.BJ,{space:4,children:[y,b]})}),w[44]=y,w[45]=b,w[46]=j):j=w[46],w[47]!==C||w[48]!==I||w[49]!==f||w[50]!==j||w[51]!==c?(v=(0,s.jsx)(r.lG,{width:1,id:C,header:c,footer:f,onClose:I,onClickOutside:I,children:j}),w[47]=C,w[48]=I,w[49]=f,w[50]=j,w[51]=c,w[52]=v):v=w[52],w[53]!==v||w[54]!==A.fullscreen?(_=(0,s.jsx)(a.Co,{position:"fixed",zOffset:J,children:v}),w[53]=v,w[54]=A.fullscreen,w[55]=_):_=w[55],_}function nB(e){return"editor"===e.name}function nH(e){return e?.appliesToUsers}(0,I.I4)(o.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let nN={loading:!0,error:!1,status:void 0},nY={loading:!1,error:!1,status:"none"},nV={loading:!1,error:!1,status:"declined"},nU={loading:!1,error:!1,status:"pending"},nF={loading:!1,error:!1,status:"expired"},nW=()=>{let e,t,n;let i=(0,l.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let r=(0,g.tH7)(e),s=(0,g.M91)();e:{let e;if(!r||!s){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,P.of)(nY),i[1]=e):e=i[1],t=e;break e}i[2]!==r||i[3]!==s?(e=r.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,$.T)(e=>{if(!e||0===e.length)return nY;let t=e.filter(e=>e.resourceId===s&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,ef.A)((0,eg.A)(new Date(n.createdAt),2),new Date)?nV:t.find(e=>"pending"===e.status&&(0,ef.A)((0,eg.A)(new Date(e.createdAt),2),new Date))?nU:t.find(e=>"pending"===e.status&&(0,ex.A)((0,eg.A)(new Date(e.createdAt),2),new Date))?nF:nY}),(0,O.W)(e=>(console.error("Failed to fetch access requests",e),(0,P.of)({loading:!1,error:!0,status:void 0}))),(0,L.Z)(nN)),i[2]=r,i[3]=s,i[4]=e):e=i[4],t=e}let o=t,{loading:a,error:d,status:c}=(0,E.J)(o,nN);return i[5]!==d||i[6]!==a||i[7]!==c?(n={data:c,loading:a,error:d},i[5]=d,i[6]=a,i[7]=c,i[8]=n):n=i[8],n};function nK(e){let t,n,i,r,a,c,p,m,h,f,x,y;let b=(0,l.c)(33),{requiredPermission:j}=e,v=(0,g.iZK)(),{data:_,loading:w,error:I}=nW(),[S,E]=(0,d.useState)(!1);t="pending"===_||"declined"===_||S,b[0]!==v?.roles?(n=v?.roles||[],b[0]=v?.roles,b[1]=n):n=b[1];let k=n,T=1===k.length&&"viewer"===k[0].name,[C,D]=(0,d.useState)(!1);b[2]===Symbol.for("react.memo_cache_sentinel")?(i={style:"short"},b[2]=i):i=b[2];let z=(0,g.FfM)(i),{t:R}=(0,g.Bdt)(eM),A=(0,em.Jr)();b[3]!==k||b[4]!==z?(r=k.map(nq),a=z.formatToParts(r).map(nQ),b[3]=k,b[4]=z,b[5]=r,b[6]=a):(r=b[5],a=b[6]);let P=a;return b[7]!==P?(c={Roles:()=>(0,s.jsx)(s.Fragment,{children:P})},b[7]=P,b[8]=c):c=b[8],b[9]!==r||b[10]!==P.length?(p={count:P.length,roles:r},b[9]=r,b[10]=P.length,b[11]=p):p=b[11],b[12]!==j||b[13]!==R||b[14]!==c||b[15]!==p?(m=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(g.HTc,{t:R,i18nKey:"banners.permission-check-banner.missing-permission",components:c,values:p,context:j})}),b[12]=j,b[13]=R,b[14]=c,b[15]=p,b[16]=m):m=b[16],b[17]!==T||b[18]!==t||b[19]!==I||b[20]!==w||b[21]!==_||b[22]!==R||b[23]!==A?(h=T&&_&&!I&&!w?{onClick:t?void 0:()=>{D(!0),A.log(nM)},text:R(t?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:t?"default":"primary",disabled:t,mode:t?"bleed":void 0}:void 0,b[17]=T,b[18]=t,b[19]=I,b[20]=w,b[21]=_,b[22]=R,b[23]=A,b[24]=h):h=b[24],b[25]!==m||b[26]!==h?(f=(0,s.jsx)(nD,{content:m,action:h,"data-testid":"permission-check-banner",icon:u.Eoh}),b[25]=m,b[26]=h,b[27]=f):f=b[27],b[28]!==C?(x=C&&(0,s.jsx)(nO,{onClose:()=>D(!1),onRequestSubmitted:()=>{E(!0),D(!1)}}),b[28]=C,b[29]=x):x=b[29],b[30]!==x||b[31]!==f?(y=(0,s.jsxs)(s.Fragment,{children:[f,x]}),b[30]=x,b[31]=f,b[32]=y):y=b[32],y}function nQ(e){return"element"===e.type?(0,s.jsx)("code",{children:e.value},e.value):e.value}function nq(e){return e.title}let nJ=(0,d.memo)(()=>{let e=(0,g.yKO)(),{selectedReleaseId:t}=(0,g.QO2)(),{params:n,groupIndex:i,routerPanesState:r,replaceCurrent:l,BackLink:a}=eJ(),c=r[i]?.[0].id,p=r[i-1]?.[0],m=p?.id,h=!!p?.params?.rev,f=(0,d.useMemo)(()=>n?.parentRefPath&&(0,D.sH)(n.parentRefPath)||null,[n?.parentRefPath]),{t:x}=(0,g.Bdt)(eM),y=(0,d.useMemo)(()=>{let n=f?.[0];if(!m||!n||!f)return(0,P.of)({loading:!1});let i=(0,g.IMx)(m),r=(0,D.sH)(n),s=r.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,B.x)((0,P.of)({loading:!0}),e.unstable_observePathsDocumentPair(i,-1===s?r:r.slice(0,s),{version:t}).pipe((0,es.B)(750),(0,$.T)(({draft:e,published:t,version:n})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability,...n?.availability?{version:n.availability}:{}},refValue:D.Jt(n?.snapshot||e.snapshot||t.snapshot,f)?._ref}}))))},[t,e,m,f]),b=(0,E.J)(y,{loading:!0}),j=(0,d.useCallback)(()=>{b.loading||b.result?.refValue&&l({id:b.result.refValue,params:n})},[b.loading,b.result,l,n]);return m&&f&&!h&&!b.loading&&(b.result?.availability.draft.available||b.result?.availability.published.available)&&b.result?.refValue!==c?(0,s.jsx)(nD,{action:b.result?.refValue?{onClick:j,icon:u.Fjq,text:x("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:a,icon:u.USm,text:x("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:x(b.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:u.sAQ,tone:"caution"}):null});function nG(e){let t,n,i,a,d,c,u,p,m,h;let f=(0,l.c)(30),{documentId:x,currentRelease:y,value:b}=e,j=y??g.k0f;f[0]!==j?(t=(0,g.Y73)(j),f[0]=j,f[1]=t):t=f[1];let v=t,{t:_}=(0,g.Bdt)(T.structureLocaleNamespace),{t:w}=(0,g.Bdt)(),{createVersion:I}=(0,g.wI4)();f[2]!==I||f[3]!==y._id||f[4]!==x||f[5]!==b?(n=async()=>{y._id&&await I((0,g._hI)(y._id),x,b)},f[2]=I,f[3]=y._id,f[4]=x,f[5]=b,f[6]=n):n=f[6];let S=n;return f[7]!==y.metadata?.title||f[8]!==w?(i=y?.metadata?.title||w("release.placeholder-untitled-release"),f[7]=y.metadata?.title,f[8]=w,f[9]=i):i=f[9],f[10]!==i?(a={title:i},f[10]=i,f[11]=a):a=f[11],f[12]!==v?(d={Label:e=>{let{children:t}=e;return(0,s.jsx)("span",{style:{color:`var(--card-badge-${v??"default"}-fg-color)`,backgroundColor:`var(--card-badge-${v??"default"}-bg-color)`,borderRadius:3,textDecoration:"none",padding:"0px 2px",fontWeight:500},children:t})}},f[12]=v,f[13]=d):d=f[13],f[14]!==_||f[15]!==a||f[16]!==d?(c=(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{i18nKey:"banners.release.not-in-release",t:_,values:a,components:d})}),f[14]=_,f[15]=a,f[16]=d,f[17]=c):c=f[17],f[18]!==_?(u=_("banners.release.action.add-to-release"),f[18]=_,f[19]=u):u=f[19],f[20]!==S||f[21]!==u||f[22]!==v?(p=(0,s.jsx)(r.$n,{text:u,tone:v,onClick:S}),f[20]=S,f[21]=u,f[22]=v,f[23]=p):p=f[23],f[24]!==c||f[25]!==p?(m=(0,s.jsxs)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:[c,p]}),f[24]=c,f[25]=p,f[26]=m):m=f[26],f[27]!==m||f[28]!==v?(h=(0,s.jsx)(nD,{tone:v,paddingY:0,content:m}),f[27]=m,f[28]=v,f[29]=h):h=f[29],h}function nZ(){let e,t,n,i,r,a,d;let c=(0,l.c)(19),{t:u}=(0,g.Bdt)(T.structureLocaleNamespace),{data:p}=(0,g.gJZ)(),{params:m,setParams:h}=(0,T.usePaneRouter)();c[0]!==m||c[1]!==h?(e=()=>{h({...m,rev:m?.historyEvent||void 0,since:void 0,historyVersion:void 0})},c[0]=m,c[1]=h,c[2]=e):e=c[2];let f=e;if(c[3]!==p||c[4]!==m?.historyVersion){let e;c[6]!==m?.historyVersion?(e=e=>(0,g._hI)(e._id)===m?.historyVersion,c[6]=m?.historyVersion,c[7]=e):e=c[7],n=p.find(e),c[3]=p,c[4]=m?.historyVersion,c[5]=n}else n=c[5];t=n;let x=t?.state==="published"?"banners.published-release.description":"banners.archived-release.description";return c[8]!==t?(i={VersionBadge:e=>{let{children:n}=e;return t?(0,s.jsx)(g.RwK,{$tone:(0,g.Y73)(t),children:t?.metadata.title}):n}},c[8]=t,c[9]=i):i=c[9],c[10]!==x||c[11]!==u||c[12]!==i?(r=(0,s.jsx)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{t:u,i18nKey:x,components:i})})}),c[10]=x,c[11]=u,c[12]=i,c[13]=r):r=c[13],c[14]!==f?(a={text:"Go back to published version",onClick:f},c[14]=f,c[15]=a):a=c[15],c[16]!==r||c[17]!==a?(d=(0,s.jsx)(nD,{tone:"caution",paddingY:2,content:r,action:a}),c[16]=r,c[17]=a,c[18]=d):d=c[18],d}nJ.displayName="Memo(ReferenceChangedBanner)";let nX=(0,eh.g_)({name:"Resolved LiveEdit Draft",version:1,description:"User resolved a draft of a live edit document to continue editing"});function n0(e){let t,n,i,a,c,p,m,h,f,x,y,b,j,v;let _=(0,l.c)(38),{displayed:w,documentId:I,schemaType:S}=e,{t:E}=(0,g.Bdt)(eM),[k,T]=(0,d.useState)(!1),[C,D]=(0,d.useState)(!1),z=(0,em.Jr)(),{publish:R,discardChanges:A}=(0,g.QSs)(I,w?._type||"");_[0]!==R||_[1]!==z?(t=()=>{R.execute(),T(!0),z.log(nX,{liveEditResolveType:"publish"})},_[0]=R,_[1]=z,_[2]=t):t=_[2];let P=t;_[3]!==A||_[4]!==z?(n=()=>{A.execute(),D(!0),z.log(nX,{liveEditResolveType:"discard"})},_[3]=A,_[4]=z,_[5]=n):n=_[5];let M=n;return _[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{T(!1),D(!1)},_[6]=i):i=_[6],(0,d.useEffect)(i),_[7]!==S.title?(a={schemaType:S.title},_[7]=S.title,_[8]=a):a=_[8],_[9]!==E||_[10]!==a?(c=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(g.HTc,{t:E,i18nKey:"banners.live-edit-draft-banner.text",values:a})}),_[9]=E,_[10]=a,_[11]=c):c=_[11],_[12]!==E?(p=E("action.publish.live-edit.label"),_[12]=E,_[13]=p):p=_[13],_[14]!==E?(m=E("banners.live-edit-draft-banner.publish.tooltip"),_[14]=E,_[15]=m):m=_[15],_[16]!==m?(h={content:m},_[16]=m,_[17]=h):h=_[17],_[18]!==P||_[19]!==k||_[20]!==p||_[21]!==h?(f=(0,s.jsx)(r.$n,{onClick:P,text:p,tooltipProps:h,loading:k}),_[18]=P,_[19]=k,_[20]=p,_[21]=h,_[22]=f):f=_[22],_[23]!==E?(x=E("banners.live-edit-draft-banner.discard.tooltip"),_[23]=E,_[24]=x):x=_[24],_[25]!==E?(y=E("banners.live-edit-draft-banner.discard.tooltip"),_[25]=E,_[26]=y):y=_[26],_[27]!==y?(b={content:y},_[27]=y,_[28]=b):b=_[28],_[29]!==M||_[30]!==C||_[31]!==x||_[32]!==b?(j=(0,s.jsx)(r.$n,{onClick:M,text:x,tooltipProps:b,loading:C}),_[29]=M,_[30]=C,_[31]=x,_[32]=b,_[33]=j):j=_[33],_[34]!==j||_[35]!==c||_[36]!==f?(v=(0,s.jsx)(nD,{paddingY:0,content:(0,s.jsxs)(o.so,{align:"center",justify:"space-between",gap:2,paddingTop:1,children:[c,f,j]}),"data-testid":"live-edit-type-banner",icon:u.YZv}),_[34]=j,_[35]=c,_[36]=f,_[37]=v):v=_[37],v}function n1(e){let t,n,i,r,a,d;let c=(0,l.c)(13),{currentRelease:p}=e,m=p??g.k0f;c[0]!==m?(t=(0,g.Y73)(m),c[0]=m,c[1]=t):t=c[1];let h=t,{t:f}=(0,g.Bdt)();return c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(u.XAi,{}),c[2]=n):n=c[2],c[3]!==p?(i=(0,g.drb)(p),c[3]=p,c[4]=i):i=c[4],c[5]!==i?(r={date:i},c[5]=i,c[6]=r):r=c[6],c[7]!==r||c[8]!==f?(a=(0,s.jsx)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsxs)(o.so,{align:"center",justify:"center",gap:2,children:[n," ",(0,s.jsx)(g.HTc,{t:f,i18nKey:"release.banner.scheduled-for-publishing-on",values:r})]})})}),c[7]=r,c[8]=f,c[9]=a):a=c[9],c[10]!==a||c[11]!==h?(d=(0,s.jsx)(nD,{tone:h,paddingY:0,content:a}),c[10]=a,c[11]=h,c[12]=d):d=c[12],d}let n2=(0,I.I4)(o.BJ)`
  ${({theme:e})=>(0,I.AH)`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,n3=e=>{let t,n,i,r;let a=(0,l.c)(13),{documentId:d,schemaType:c,title:u}=e,p=d===c.name,{t:m}=(0,ec.Bd)(eM);if(!1===c.__experimental_formPreviewTitle)return null;a[0]!==p||a[1]!==c.name||a[2]!==c.title?(t=!p&&(0,s.jsx)(o.EY,{muted:!0,size:1,children:c.title??c.name}),a[0]=p,a[1]=c.name,a[2]=c.title,a[3]=t):t=a[3];let h=!u;return a[4]!==m||a[5]!==u?(n=u??m("document-view.form-view.form-title-fallback"),a[4]=m,a[5]=u,a[6]=n):n=a[6],a[7]!==h||a[8]!==n?(i=(0,s.jsx)(o.DZ,{as:"h2","data-heading":!0,muted:h,"data-testid":"document-panel-document-title",children:n}),a[7]=h,a[8]=n,a[9]=i):i=a[9],a[10]!==t||a[11]!==i?(r=(0,s.jsxs)(n2,{marginBottom:6,space:4,children:[t,i]}),a[10]=t,a[11]=i,a[12]=r):r=a[12],r},n4=e=>e.preventDefault(),n5=(0,d.forwardRef)(function(e,t){let n,i,r,c,u,p,m,h,f,x,y,b,j,v,_;let w=(0,l.c)(72),{hidden:I,margins:S}=e,{collapsedFieldSets:E,collapsedPaths:k,displayed:T,editState:C,documentId:D,documentType:z,fieldActions:R,onChange:A,validation:P,ready:M,formState:$,onFocus:L,connectionState:O,onBlur:B,onSetCollapsedPath:H,onPathOpen:N,onSetCollapsedFieldSet:Y,onSetActiveFieldGroup:V,openPath:U}=t7(),{selectedReleaseId:F}=(0,g.QO2)(),W=(0,g.q3J)(),K=(0,g.cVB)(D),{title:Q}=nu(),[q]=(0,d.useState)(n6),J=C?.transactionSyncLock?.enabled,{t:G}=(0,g.Bdt)(eM);w[0]!==G?(n=G("document-view.form-view.sync-lock-toast.title"),w[0]=G,w[1]=n):n=w[1],w[2]!==G?(i=G("document-view.form-view.sync-lock-toast.description"),w[2]=G,w[3]=i):i=w[3],w[4]!==J||w[5]!==n||w[6]!==i?(r={id:"sync-lock",status:"warning",enabled:J,title:n,description:i,closable:!0},w[4]=J,w[5]=n,w[6]=i,w[7]=r):r=w[7],function(e){let t,n;let i=(0,l.c)(4),r=(0,a.dj)();i[0]!==e||i[1]!==r?(t=()=>(e.enabled&&r.push({...e,duration:20736e5}),()=>{e.enabled&&r.push({...e,duration:.01})}),n=[e,r],i[0]=e,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,d.useEffect)(t,n)}(r),w[8]!==D||w[9]!==W.pair||w[10]!==z||w[11]!==q||w[12]!==F?(c=()=>{let e=W.pair.documentEvents(D,z,F).pipe((0,Z.M)(e=>{"mutation"===e.type&&q.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,g.i6N)(e.origin,t)}}(e)),"rebase"===e.type&&q.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,g.i6N)("remote",t).concat((0,g.i6N)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},w[8]=D,w[9]=W.pair,w[10]=z,w[11]=q,w[12]=F,w[13]=c):c=w[13],w[14]!==D||w[15]!==W||w[16]!==z||w[17]!==q||w[18]!==F?(u=[D,W,z,q,F],w[14]=D,w[15]=W,w[16]=z,w[17]=q,w[18]=F,w[19]=u):u=w[19],(0,d.useEffect)(c,u);let X=!!T?._rev;w[20]!==q||w[21]!==T?(p=()=>{q.publish({type:"mutation",patches:[],snapshot:T})},w[20]=q,w[21]=T,w[22]=p):p=w[22];let ee=(0,eb.J)(p);w[23]!==ee||w[24]!==X?(m=()=>{X&&ee()},h=[ee,X],w[23]=ee,w[24]=X,w[25]=m,w[26]=h):(m=w[25],h=w[26]),(0,d.useEffect)(m,h);let[et,en]=(0,d.useState)(null),[ei,er]=(0,d.useState)(!1);w[27]!==ei||w[28]!==et||w[29]!==$?.focusPath.length||w[30]!==M?(f=()=>{!ei&&M&&!$?.focusPath.length&&et&&(er(!0),(0,a.s5)(et))},w[27]=ei,w[28]=et,w[29]=$?.focusPath.length,w[30]=M,w[31]=f):f=w[31];let es=$?.focusPath.length;w[32]!==ei||w[33]!==et||w[34]!==M||w[35]!==es?(x=[ei,et,es,M],w[32]=ei,w[33]=et,w[34]=M,w[35]=es,w[36]=x):x=w[36],(0,d.useEffect)(f,x),w[37]!==t?(y=e=>{en(e),"function"==typeof t?t(e):t&&(t.current=e)},w[37]=t,w[38]=y):y=w[38];let el=y;return w[39]!==E||w[40]!==k||w[41]!==O||w[42]!==D||w[43]!==C?.draft||w[44]!==C?.published||w[45]!==C?.ready||w[46]!==R||w[47]!==$||w[48]!==I||w[49]!==B||w[50]!==A||w[51]!==L||w[52]!==N||w[53]!==V||w[54]!==Y||w[55]!==H||w[56]!==U||w[57]!==q||w[58]!==K||w[59]!==G||w[60]!==Q||w[61]!==P?(b="connecting"!==O||C?.draft||C?.published?null===$||I?(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(o.EY,{children:G("document-view.form-view.form-hidden")})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n3,{documentId:D,schemaType:$.schemaType,title:Q}),(0,s.jsx)(g.okx,{__internal_fieldActions:R,__internal_patchChannel:q,changed:$.changed,collapsedFieldSets:E,collapsedPaths:k,focused:$.focused,focusPath:$.focusPath,groups:$.groups,id:"root",members:$.members,onChange:A,onFieldGroupSelect:V,onPathBlur:B,onPathFocus:L,onPathOpen:N,onSetFieldSetCollapsed:Y,onSetPathCollapsed:H,openPath:U,presence:K,readOnly:"reconnecting"===O||$.readOnly||!C?.ready,schemaType:$.schemaType,validation:P,value:$.value})]}):(0,s.jsx)(tn,{ms:300,children:(0,s.jsxs)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,s.jsx)(o.y$,{muted:!0}),(0,s.jsx)(o.az,{marginTop:3,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,size:1,children:G("document-view.form-view.loading")})})]})}),w[39]=E,w[40]=k,w[41]=O,w[42]=D,w[43]=C?.draft,w[44]=C?.published,w[45]=C?.ready,w[46]=R,w[47]=$,w[48]=I,w[49]=B,w[50]=A,w[51]=L,w[52]=N,w[53]=V,w[54]=Y,w[55]=H,w[56]=U,w[57]=q,w[58]=K,w[59]=G,w[60]=Q,w[61]=P,w[62]=b):b=w[62],w[63]!==el||w[64]!==b?(j=(0,s.jsx)(o.az,{as:"form",onSubmit:n4,ref:el,children:b}),w[63]=el,w[64]=b,w[65]=j):j=w[65],w[66]!==S||w[67]!==j?(v=(0,s.jsx)(g.MLZ,{margins:S,children:j}),w[66]=S,w[67]=j,w[68]=v):v=w[68],w[69]!==I||w[70]!==v?(_=(0,s.jsx)(o.mc,{hidden:I,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:v}),w[69]=I,w[70]=v,w[71]=_):_=w[71],_});function n6(){return(0,g.Ijd)()}let n8=(0,I.I4)(o.az)({position:"relative"}),n7=(0,I.I4)(g.PaW)(({$disabled:e})=>e?{height:"100%"}:(0,I.AH)`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),n9=function(e){let t,n,i,r,a,c,u,p,m,h,f,x,y,b,j;let v=(0,l.c)(70),{footerHeight:_,headerHeight:w,isInspectOpen:I,rootElement:S,setDocumentPanelPortalElement:E}=e,{activeViewId:k,displayed:T,documentId:C,editState:D,inspector:z,value:R,views:A,ready:P,schemaType:M,permissions:$,isPermissionsLoading:L}=t7(),{params:O}=eJ(),{collapsed:B}=eW(),{collapsed:H}=ta(),N=(0,o.WP)(),{features:Y}=ns(),[V,U]=(0,d.useState)(null),[F,W]=(0,d.useState)(null),K=(0,d.useRef)(null),Q=R._createdAt?"update":"create";v[0]!==k||v[1]!==A?(n=A.find(e=>e.id===k)||A[0]||{type:"form"},v[0]=k,v[1]=A,v[2]=n):n=v[2],t=n;let q=Y.splitPanes&&V||N.element;e:{let e;if(B){let e;let t=w||0,n=_?_+2:2;v[3]!==t||v[4]!==n?(e=[t,0,n,0],v[3]=t,v[4]=n,v[5]=e):e=v[5],i=e;break e}v[6]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],v[6]=e):e=v[6],i=e}let J=i,G="form"!==t.type;v[7]!==t.component||v[8]!==t.options||v[9]!==t.type||v[10]!==T||v[11]!==C||v[12]!==D?.draft||v[13]!==D?.published||v[14]!==M||v[15]!==R?(r=()=>{if("component"===t.type&&t.component){let e=t.component;return(0,s.jsx)(e,{document:{draft:D?.draft||null,displayed:T||R,historical:T,published:D?.published||null},documentId:C,options:t.options,schemaType:M})}return!1},v[7]=t.component,v[8]=t.options,v[9]=t.type,v[10]=T,v[11]=C,v[12]=D?.draft,v[13]=D?.published,v[14]=M,v[15]=R,v[16]=r):r=v[16],v[17]!==r?(a=r(),v[17]=r,v[18]=a):a=v[18];let Z=a,X=nh(M);v[19]!==F?(c=()=>{F?.scrollTo&&F.scrollTo(0,0)},v[19]=F,v[20]=c):c=v[20],v[21]!==C||v[22]!==F?(u=[C,F],v[21]=C,v[22]=F,v[23]=u):u=v[23],(0,d.useEffect)(c,u),v[24]!==q||v[25]!==E?(p=()=>{q&&E(q)},m=[q,E],v[24]=q,v[25]=E,v[26]=p,v[27]=m):(p=v[26],m=v[27]),(0,d.useEffect)(p,m),v[28]!==T||v[29]!==I||v[30]!==R?(f=I?(0,s.jsx)(nC,{value:T||R}):null,v[28]=T,v[29]=I,v[30]=R,v[31]=f):f=v[31],h=f;let ee=!!(!H&&z),{selectedPerspective:et,selectedReleaseId:en}=(0,g.QO2)();t:{let e,n,i,r,l;if(O?.historyVersion){let e;v[32]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(nZ,{}),v[32]=e):e=v[32],x=e;break t}let o=T&&!T._createdAt;if((0,g.Jrl)(et)&&(0,g.KJ$)(et)){let e;v[33]!==et?(e=(0,s.jsx)(n1,{currentRelease:et}),v[33]=et,v[34]=e):e=v[34],x=e;break t}if(T?._id&&(0,g._Sr)(T._id)!==en&&P&&!o){let e;let t=T||void 0;v[35]!==et||v[36]!==t||v[37]!==R._id?(e=(0,s.jsx)(nG,{documentId:R._id,currentRelease:et,value:t}),v[35]=et,v[36]=t,v[37]=R._id,v[38]=e):e=v[38],x=e;break t}if("form"===t.type&&X&&P&&D?.draft?._id&&!en){let e;v[39]!==T||v[40]!==C||v[41]!==M?(e=(0,s.jsx)(n0,{displayed:T,documentId:C,schemaType:M}),v[39]=T,v[40]=C,v[41]=M,v[42]=e):e=v[42],x=e;break t}if("form"!==t.type||L||!P){x=null;break t}v[43]!==$?.granted||v[44]!==Q?(e=!$?.granted&&(0,s.jsx)(nK,{requiredPermission:Q}),v[43]=$?.granted,v[44]=Q,v[45]=e):e=v[45],v[46]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(nJ,{}),i=(0,s.jsx)(nP,{}),r=(0,s.jsx)(nz,{}),v[46]=n,v[47]=i,v[48]=r):(n=v[46],i=v[47],r=v[48]),v[49]!==e?(l=(0,s.jsxs)(s.Fragment,{children:[e,n,i,r]}),v[49]=e,v[50]=l):l=v[50],x=l}let ei=x;return v[51]!==Z||v[52]!==ei||v[53]!==F||v[54]!==Y.resizablePanes||v[55]!==G||v[56]!==h||v[57]!==B||v[58]!==J||v[59]!==q||v[60]!==ee?(y=(Y.resizablePanes||!ee)&&(0,s.jsx)(n8,{flex:2,overflow:"hidden",children:(0,s.jsx)(o.GD,{element:q,__unstable_elements:{documentScrollElement:F},children:(0,s.jsx)(o.EZ,{element:F,children:(0,s.jsxs)(g.jsZ,{scrollElement:F,containerElement:K,children:[ei,(0,s.jsxs)(n7,{$disabled:B||!1,"data-testid":"document-panel-scroller",ref:W,children:[(0,s.jsx)(n5,{hidden:G,margins:J,ref:K}),Z]}),h,(0,s.jsx)("div",{"data-testid":"document-panel-portal",ref:U})]})})})}),v[51]=Z,v[52]=ei,v[53]=F,v[54]=Y.resizablePanes,v[55]=G,v[56]=h,v[57]=B,v[58]=J,v[59]=q,v[60]=ee,v[61]=y):y=v[61],v[62]!==C||v[63]!==S||v[64]!==M||v[65]!==ee?(b=ee&&(0,s.jsx)(o.EZ,{element:S,children:(0,s.jsx)(nx,{documentId:C,documentType:M.name,flex:1})}),v[62]=C,v[63]=S,v[64]=M,v[65]=ee,v[66]=b):b=v[66],v[67]!==y||v[68]!==b?(j=(0,s.jsx)(td,{children:(0,s.jsxs)(o.so,{height:"fill",children:[y,b]})}),v[67]=y,v[68]=b,v[69]=j):j=v[69],j};n9.displayName="DocumentPanel";let ie=["left","bottom"],it={small:0,medium:1,large:2,full:"auto"};function ii(e){let t,n;let i=(0,l.c)(5),{dialog:r,referenceElement:a}=e;return i[0]!==r?(t=(0,s.jsx)(ir,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,s.jsx)(o.AM,{content:t,fallbackPlacements:ie,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function ir(e){let t,n,i,r,a,c,u,p,m,h,f;let x=(0,l.c)(29),{dialog:y}=e,{cancelButtonIcon:b,cancelButtonText:j,confirmButtonIcon:v,confirmButtonText:_,message:w,onCancel:I,onConfirm:S,tone:E}=y,{t:k}=(0,g.Bdt)(eM),{isTopLayer:T}=(0,o.Z4)(),C=(0,d.useRef)(null);return x[0]!==T||x[1]!==I?(t=e=>{"Escape"===e.key&&T&&I()},x[0]=T,x[1]=I,x[2]=t):t=x[2],(0,o.Pm)(t),x[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[C.current],x[3]=n):n=x[3],(0,o.PR)(T&&I,n),x[4]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:304,maxWidth:400},x[4]=i):i=x[4],x[5]!==w?(r=(0,s.jsx)(o.az,{flex:1,overflow:"auto",padding:4,children:(0,s.jsx)(o.EY,{children:w})}),x[5]=w,x[6]=r):r=x[6],x[7]===Symbol.for("react.memo_cache_sentinel")?(a={borderTop:"1px solid var(--card-border-color)"},x[7]=a):a=x[7],x[8]!==j||x[9]!==k?(c=j||k("confirm-dialog.cancel-button.fallback-text"),x[8]=j,x[9]=k,x[10]=c):c=x[10],x[11]!==b||x[12]!==I||x[13]!==c?(u=(0,s.jsx)(o.$n,{"data-testid":"confirm-dialog-cancel-button",icon:b,onClick:I,mode:"ghost",text:c}),x[11]=b,x[12]=I,x[13]=c,x[14]=u):u=x[14],x[15]!==_||x[16]!==k?(p=_||k("confirm-dialog.confirm-button.fallback-text"),x[15]=_,x[16]=k,x[17]=p):p=x[17],x[18]!==v||x[19]!==S||x[20]!==p||x[21]!==E?(m=(0,s.jsx)(o.$n,{"data-testid":"confirm-dialog-confirm-button",icon:v,onClick:S,text:p,tone:E}),x[18]=v,x[19]=S,x[20]=p,x[21]=E,x[22]=m):m=x[22],x[23]!==u||x[24]!==m?(h=(0,s.jsx)(o.az,{paddingX:4,paddingY:3,style:a,children:(0,s.jsxs)(o.xA,{columns:2,gap:2,children:[u,m]})}),x[23]=u,x[24]=m,x[25]=h):h=x[25],x[26]!==r||x[27]!==h?(f=(0,s.jsxs)(o.so,{direction:"column",ref:C,style:i,children:[r,h]}),x[26]=r,x[27]=h,x[28]=f):f=x[28],f}function is(e){let t,n,i;let r=(0,l.c)(12),{dialog:c}=e,u=(0,d.useId)();r[0]!==c.footer?(t=c.footer&&(0,s.jsx)(o.az,{paddingX:4,paddingY:3,children:c.footer}),r[0]=c.footer,r[1]=t):t=r[1];let p=t,m=!1===c.showCloseButton,h=void 0===c.width?1:it[c.width];return r[2]!==c.content?(n=(0,s.jsx)(o.az,{padding:4,children:c.content}),r[2]=c.content,r[3]=n):n=r[3],r[4]!==c.header||r[5]!==c.onClose||r[6]!==u||r[7]!==p||r[8]!==m||r[9]!==h||r[10]!==n?(i=(0,s.jsx)(g.wG1,{zOffset:"fullscreen",children:(0,s.jsx)(a.lG,{animate:!0,__unstable_hideCloseButton:m,footer:p,header:c.header,id:u,onClose:c.onClose,onClickOutside:c.onClose,width:h,children:n})}),r[4]=c.header,r[5]=c.onClose,r[6]=u,r[7]=p,r[8]=m,r[9]=h,r[10]=n,r[11]=i):i=r[11],i}function il(e){let t,n;let i=(0,l.c)(5),{dialog:r,referenceElement:a}=e;return i[0]!==r?(t=(0,s.jsx)(io,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,s.jsx)(o.AM,{content:t,fallbackPlacements:ie,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function io(e){let t,n,i;let r=(0,l.c)(6),{dialog:a}=e,{content:c,onClose:u}=a,{isTopLayer:p}=(0,o.Z4)(),m=(0,d.useRef)(null);return r[0]!==p||r[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},r[0]=p,r[1]=u,r[2]=t):t=r[2],(0,o.Pm)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],r[3]=n):n=r[3],(0,o.PR)(p&&u,n),r[4]!==c?(i=(0,s.jsx)("div",{ref:m,children:c}),r[4]=c,r[5]=i):i=r[5],i}function ia(e){let t;let n=(0,l.c)(3),{children:i}=e,{element:r,elements:a}=(0,o.WP)(),d=a?.[nr]||r;return n[0]!==i||n[1]!==d?(t=(0,s.jsx)(o.GD,{element:d,children:i}),n[0]=i,n[1]=d,n[2]=t):t=n[2],t}function id(e){let t,n;let i=(0,l.c)(17),{dialog:a,referenceElement:c}=e,u=void 0===c?null:c,p=(0,d.useId)();if("confirm"===a.type){let e;return i[0]!==a||i[1]!==u?(e=(0,s.jsx)(ii,{dialog:a,referenceElement:u}),i[0]=a,i[1]=u,i[2]=e):e=i[2],e}if("popover"===a.type){let e;return i[3]!==a||i[4]!==u?(e=(0,s.jsx)(il,{dialog:a,referenceElement:u}),i[3]=a,i[4]=u,i[5]=e):e=i[5],e}if("dialog"===a.type||!a.type){let e;return i[6]!==a?(e=(0,s.jsx)(ia,{children:(0,s.jsx)(is,{dialog:a})}),i[6]=a,i[7]=e):e=i[7],e}if("custom"===a.type){let e;let t=a?.component;return i[8]!==t?(e=(0,s.jsx)(ia,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${a.type}`),i[10]!==a.content||i[11]!==a.type?(t=a.content||(0,s.jsxs)(o.EY,{size:1,children:["Unexpected modal type (",(0,s.jsx)("code",{children:a.type}),")"]}),i[10]=a.content,i[11]=a.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==a.onClose?(n=(0,s.jsx)(r.lG,{id:p,onClose:a.onClose,onClickOutside:a.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=a.onClose,i[16]=n):n=i[16],n}let ic=(0,d.memo)(function(e){let t,n,i,r,o,a;let c=(0,l.c)(9),{actionStates:u,children:p,referenceElement:m}=e,[h,f]=(0,d.useState)(-1);t=u[h],c[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{f(e)},c[0]=n):n=c[0];let x=n;return c[1]!==p?(r=p({handleAction:x}),c[1]=p,c[2]=r):r=c[2],i=r,c[3]!==t||c[4]!==m?(o=t&&t.dialog&&(0,s.jsx)(g.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(id,{dialog:t.dialog,referenceElement:m})}),c[3]=t,c[4]=m,c[5]=o):o=c[5],c[6]!==i||c[7]!==o?(a=(0,s.jsxs)(s.Fragment,{children:[o,i]}),c[6]=i,c[7]=o,c[8]=a):a=c[8],a});function iu(e){let t,n,i,a;let c=(0,l.c)(10),{actionStates:u,disabled:p}=e,m=(0,d.useId)(),[h,f]=(0,d.useState)(null);c[0]===Symbol.for("react.memo_cache_sentinel")?(n={placement:"top-end",portal:!0,preventOverflow:!0},c[0]=n):n=c[0],t=n;let{t:x}=(0,g.Bdt)(eM);c[1]!==u||c[2]!==p||c[3]!==m||c[4]!==x?(i=e=>{let{handleAction:n}=e;return(0,s.jsx)(r.IU,{id:`${m}-action-menu`,button:(0,s.jsx)(g.VJU,{"aria-label":x("buttons.action-menu-button.aria-label"),disabled:p,"data-testid":"action-menu-button",size:"large",tooltipProps:{content:x("buttons.action-menu-button.tooltip")}}),menu:(0,s.jsx)(o.W1,{padding:1,children:u.map((e,t)=>(0,s.jsx)(ip,{actionState:e,disabled:p,index:t,onAction:n},t))}),popover:t,ref:f})},c[1]=u,c[2]=p,c[3]=m,c[4]=x,c[5]=i):i=c[5];let y=i;return c[6]!==u||c[7]!==h||c[8]!==y?(a=(0,s.jsx)(ic,{actionStates:u,referenceElement:h,children:y}),c[6]=u,c[7]=h,c[8]=y,c[9]=a):a=c[9],a}function ip(e){let t,n,i,o,a;let d=(0,l.c)(18),{actionState:c,disabled:u,index:p,onAction:m}=e,{onHandle:h}=c;d[0]!==p||d[1]!==m||d[2]!==h?(t=()=>{m(p),h&&h()},d[0]=p,d[1]=m,d[2]=h,d[3]=t):t=d[3];let f=t;d[4]!==c.shortcut?(i=c.shortcut?String(c.shortcut).split("+").map(im):void 0,d[4]=c.shortcut,d[5]=i):i=d[5],n=i;let g=`action-${c.label.replace(" ","")}`,x=u||!!c.disabled;return d[6]!==c.disabled||d[7]!==c.title?(o=c.disabled&&{tooltipProps:{content:c.title}},d[6]=c.disabled,d[7]=c.title,d[8]=o):o=d[8],d[9]!==c.icon||d[10]!==c.label||d[11]!==c.tone||d[12]!==f||d[13]!==n||d[14]!==g||d[15]!==x||d[16]!==o?(a=(0,s.jsx)(r.Dr,{"data-testid":g,disabled:x,hotkeys:n,icon:c.icon,onClick:f,text:c.label,tone:c.tone,...o}),d[9]=c.icon,d[10]=c.label,d[11]=c.tone,d[12]=f,d[13]=n,d[14]=g,d[15]=x,d[16]=o,d[17]=a):a=d[17],a}function im(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let ih={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},ig=e=>{let t,n,i,r,o;let a=(0,l.c)(36),{id:c,type:p,draft:m,onComplete:h,release:f}=e,{setIsDeleting:x}=t7(),{delete:y}=(0,g.QSs)(c,p,f),[b,j]=(0,d.useState)(!1),[v,_]=(0,d.useState)(!1),{t:w}=(0,g.Bdt)(eM);a[0]!==h?(t=()=>{_(!1),h()},a[0]=h,a[1]=t):t=a[1];let I=t;a[2]!==y||a[3]!==h||a[4]!==x?(n=()=>{j(!0),_(!1),x(!0),y.execute(),h()},a[2]=y,a[3]=h,a[4]=x,a[5]=n):n=a[5];let S=n;a[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{_(!0)},a[6]=i):i=a[6];let E=i;a[7]!==c||a[8]!==f||a[9]!==p?(r={id:c,type:p,version:f,permission:"delete"},a[7]=c,a[8]=f,a[9]=p,a[10]=r):r=a[10];let[k,T]=(0,g.LyQ)(r),C=(0,g.iZK)();e:{let e,t,n,i;if(!T&&!k?.granted){let e,t,n;a[11]!==w?(e=w("action.delete.label"),a[11]=w,a[12]=e):e=a[12],a[13]!==C?(t=(0,s.jsx)(g.TLO,{context:"delete-document",currentUser:C}),a[13]=C,a[14]=t):t=a[14],a[15]!==e||a[16]!==t?(n={tone:"critical",icon:u.ucK,disabled:!0,label:e,title:t},a[15]=e,a[16]=t,a[17]=n):n=a[17],o=n;break e}let r=b||!!y.disabled||T;a[18]!==y.disabled||a[19]!==w?(e=y.disabled&&w(ih[y.disabled])||"",a[18]=y.disabled,a[19]=w,a[20]=e):e=a[20],a[21]!==b||a[22]!==w?(t=w(b?"action.delete.running.label":"action.delete.label"),a[21]=b,a[22]=w,a[23]=t):t=a[23],a[24]!==m?._id||a[25]!==I||a[26]!==S||a[27]!==c||a[28]!==v||a[29]!==p?(n=v&&{type:"custom",component:(0,s.jsx)(tt,{action:"delete",id:m?._id||c,type:p,onCancel:I,onConfirm:S})},a[24]=m?._id,a[25]=I,a[26]=S,a[27]=c,a[28]=v,a[29]=p,a[30]=n):n=a[30],a[31]!==r||a[32]!==e||a[33]!==t||a[34]!==n?(i={tone:"critical",icon:u.ucK,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:E,dialog:n},a[31]=r,a[32]=e,a[33]=t,a[34]=n,a[35]=i):i=a[35],o=i}return o};ig.action="delete",ig.displayName="DeleteAction";let ix={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},iy=e=>{let t,n,i,r,o,a,c;let p=(0,l.c)(24),{id:m,type:h,published:f,liveEdit:x,onComplete:y,release:b}=e,{discardChanges:j}=(0,g.QSs)(m,h,b),[v,_]=(0,d.useState)(!1);p[0]!==m||p[1]!==b||p[2]!==h?(t={id:m,type:h,version:b,permission:"discardDraft"},p[0]=m,p[1]=b,p[2]=h,p[3]=t):t=p[3];let[w,I]=(0,g.LyQ)(t),S=(0,g.iZK)(),{t:E}=(0,g.Bdt)(eM);p[4]!==j||p[5]!==y?(n=()=>{j.execute(),y()},p[4]=j,p[5]=y,p[6]=n):n=p[6];let k=n;p[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{_(!0)},p[7]=i):i=p[7];let T=i;return p[8]!==k||p[9]!==v||p[10]!==y||p[11]!==E?(o=v&&{type:"confirm",tone:"critical",onCancel:y,onConfirm:k,message:E("action.discard-changes.confirm-dialog.confirm-discard-changes")},p[8]=k,p[9]=v,p[10]=y,p[11]=E,p[12]=o):o=p[12],r=o,p[13]!==S||p[14]!==r||p[15]!==j.disabled||p[16]!==I||p[17]!==x||p[18]!==w?.granted||p[19]!==f||p[20]!==E?(a=()=>!f||x?null:I||w?.granted?{tone:"critical",icon:u.NAP,disabled:!!j.disabled||I,title:j.disabled&&ix[j.disabled]||"",label:E("action.discard-changes.label"),onHandle:T,dialog:r}:{tone:"critical",icon:u.NAP,disabled:!0,label:E("action.discard-changes.label"),title:(0,s.jsx)(g.TLO,{context:"discard-changes",currentUser:S})},p[13]=S,p[14]=r,p[15]=j.disabled,p[16]=I,p[17]=x,p[18]=w?.granted,p[19]=f,p[20]=E,p[21]=a):a=p[21],p[22]!==a?(c=a(),p[22]=a,p[23]=c):c=p[23],c};iy.action="discardChanges",iy.displayName="DiscardChangesAction";let ib={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},ij=e=>{let t,n,i;let r=(0,l.c)(29),{id:o,type:a,onComplete:c,release:p}=e,m=(0,g.q3J)(),{duplicate:h}=(0,g.QSs)(o,a,p),{navigateIntent:f}=(0,k.rd)(),[x,y]=(0,d.useState)(!1);r[0]!==o||r[1]!==p||r[2]!==a?(t={id:o,type:a,version:p,permission:"duplicate"},r[0]=o,r[1]=p,r[2]=a,r[3]=t):t=r[3];let[b,j]=(0,g.LyQ)(t),{t:v}=(0,g.Bdt)(eM),_=(0,g.iZK)();r[4]!==m.pair||r[5]!==h||r[6]!==o||r[7]!==f||r[8]!==c||r[9]!==a?(n=async()=>{let e=(0,w.A)();y(!0);let t=(0,H._)(m.pair.operationEvents(o,a).pipe((0,N.p)(iv)));h.execute(e),await t,f("edit",{id:e,type:a}),c()},r[4]=m.pair,r[5]=h,r[6]=o,r[7]=f,r[8]=c,r[9]=a,r[10]=n):n=r[10];let I=n;e:{let e,t,n;if(!j&&!b?.granted){let e,t,n;r[11]!==v?(e=v("action.duplicate.label"),r[11]=v,r[12]=e):e=r[12],r[13]!==_?(t=(0,s.jsx)(g.TLO,{context:"duplicate-document",currentUser:_}),r[13]=_,r[14]=t):t=r[14],r[15]!==e||r[16]!==t?(n={icon:u.TdU,disabled:!0,label:e,title:t},r[15]=e,r[16]=t,r[17]=n):n=r[17],i=n;break e}let l=x||!!h.disabled||j;r[18]!==x||r[19]!==v?(e=v(x?"action.duplicate.running.label":"action.duplicate.label"),r[18]=x,r[19]=v,r[20]=e):e=r[20],r[21]!==h.disabled||r[22]!==v?(t=h.disabled?v(ib[h.disabled]):"",r[21]=h.disabled,r[22]=v,r[23]=t):t=r[23],r[24]!==I||r[25]!==l||r[26]!==e||r[27]!==t?(n={icon:u.TdU,disabled:l,label:e,title:t,onHandle:I},r[24]=I,r[25]=l,r[26]=e,r[27]=t,r[28]=n):n=r[28],i=n}return i};function iv(e){return"duplicate"===e.op&&"success"===e.type}ij.action="duplicate",ij.displayName="DuplicateAction";let i_=e=>{let t,n,i,r,s,o;let a=(0,l.c)(27),{id:c,type:p,revision:m,onComplete:h,release:f}=e,{restore:x}=(0,g.QSs)(c,p,f),y=(0,g.cUp)(c,p),{navigateIntent:b}=(0,k.rd)(),j=(0,d.useRef)(y),[v,_]=(0,d.useState)(!1),{t:w}=(0,g.Bdt)(eM);a[0]!==h||a[1]!==x||a[2]!==m?(t=()=>{x.execute(m),h()},a[0]=h,a[1]=x,a[2]=m,a[3]=t):t=a[3];let I=t;a[4]!==y||a[5]!==c||a[6]!==b||a[7]!==p?(n=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&b("edit",{id:c,type:p}),j.current=y)},i=[y,c,b,p],a[4]=y,a[5]=c,a[6]=b,a[7]=p,a[8]=n,a[9]=i):(n=a[8],i=a[9]),(0,d.useEffect)(n,i),a[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{_(!0)},a[10]=r):r=a[10];let S=r;e:{if(v){let e,t;a[11]!==w?(e=w("action.restore.confirm.message"),a[11]=w,a[12]=e):e=a[12],a[13]!==I||a[14]!==h||a[15]!==e?(t={type:"confirm",tone:"critical",onCancel:h,onConfirm:I,message:e},a[13]=I,a[14]=h,a[15]=e,a[16]=t):t=a[16],s=t;break e}s=null}let E=s,T="@initial"===m,C=void 0===m;t:{let e,t,n;if(C){o=null;break t}a[17]!==w?(e=w("action.restore.label"),a[17]=w,a[18]=e):e=a[18];let i=T?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";a[19]!==w||a[20]!==i?(t=w(i),a[19]=w,a[20]=i,a[21]=t):t=a[21],a[22]!==E||a[23]!==T||a[24]!==e||a[25]!==t?(n={label:e,tone:"caution",onHandle:S,title:t,icon:u.AAk,dialog:E,disabled:T},a[22]=E,a[23]=T,a[24]=e,a[25]=t,a[26]=n):n=a[26],o=n}return o};i_.action="restore",i_.displayName="HistoryRestoreAction";let iw=(0,eh.g_)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),iI={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"};function iS(e){let t,n,i;let r=(0,l.c)(6),{publishedAt:o}=e,{t:a}=(0,g.Bdt)(eM);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},r[0]=t):t=r[0];let d=(0,g.Vq9)(o,t);return r[1]!==a||r[2]!==d?(n=a("action.publish.already-published.tooltip",{timeSincePublished:d}),r[1]=a,r[2]=d,r[3]=n):n=r[3],r[4]!==n?(i=(0,s.jsx)("span",{children:n}),r[4]=n,r[5]=i):i=r[5],i}let iE=e=>{let t,n,i,r,o,a,c,p,m,h,f;let y=(0,l.c)(72),{id:b,type:j,liveEdit:v,draft:_,published:w,release:I}=e,[S,E]=(0,d.useState)(null),{publish:k}=(0,g.QSs)(b,j),T=(0,g.dWw)(b,j),C=(0,g.M7h)(b,j),{changesOpen:D,documentId:z,documentType:R}=t7(),A=(0,g.zX2)(z,R),{t:P}=(0,g.Bdt)(eM);y[0]!==A?.draft||y[1]!==A?.published?(t=A?.draft||A?.published||{},y[0]=A?.draft,y[1]=A?.published,y[2]=t):t=y[2];let M=t._rev;y[3]!==T.validation?(n=T.validation.some(x.Uw),y[3]=T.validation,y[4]=n):n=y[4];let $=n,[L,O]=(0,d.useState)(!1),B=C.isSyncing,H=T.isValidating;y[5]!==b||y[6]!==j?(i={id:b,type:j,permission:"publish"},y[5]=b,y[6]=j,y[7]=i):i=y[7];let[N,Y]=(0,g.LyQ)(i),V=(0,g.iZK)();y[8]!==$||y[9]!==k.disabled||y[10]!==w||y[11]!==P?(r=k.disabled?function(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,s.jsx)(iS,{publishedAt:t}):n(iI[e])}(k.disabled,(w||{})._updatedAt,P)||"":$?P("action.publish.validation-issues.tooltip"):"",y[8]=$,y[9]=k.disabled,y[10]=w,y[11]=P,y[12]=r):r=y[12];let U=r,F=!!_;y[13]!==k?(o=()=>{k.execute(),E("publishing")},y[13]=k,y[14]=o):o=y[14];let W=o;y[15]!==W||y[16]!==$||y[17]!==B||y[18]!==L||y[19]!==M||y[20]!==T.isValidating||y[21]!==T.revision?(a=()=>{let e=!1===T.isValidating&&T.revision!==M;L&&!B&&e&&($||W(),O(!1))},y[15]=W,y[16]=$,y[17]=B,y[18]=L,y[19]=M,y[20]=T.isValidating,y[21]=T.revision,y[22]=a):a=y[22],y[23]!==W||y[24]!==$||y[25]!==B||y[26]!==H||y[27]!==L||y[28]!==M||y[29]!==T.isValidating||y[30]!==T.revision?(c=[B,W,$,L,T.revision,M,H,T.isValidating],y[23]=W,y[24]=$,y[25]=B,y[26]=H,y[27]=L,y[28]=M,y[29]=T.isValidating,y[30]=T.revision,y[31]=c):c=y[31],(0,d.useEffect)(a,c),y[32]!==F||y[33]!==S?(p=()=>{let e="publishing"===S&&!F,t=e?"published":null,n=setTimeout(()=>{E(t)},e?200:4e3);return()=>clearTimeout(n)},y[32]=F,y[33]=S,y[34]=p):p=y[34],y[35]!==D||y[36]!==F||y[37]!==S?(m=[D,S,F],y[35]=D,y[36]=F,y[37]=S,y[38]=m):m=y[38],(0,d.useEffect)(p,m);let K=(0,em.Jr)();y[39]!==W||y[40]!==_?._createdAt||y[41]!==w||y[42]!==M||y[43]!==C.isSyncing||y[44]!==K||y[45]!==T.isValidating||y[46]!==T.revision?(h=()=>{K.log(iw,{publishedImmediately:!_?._createdAt,previouslyPublished:!!w}),C.isSyncing||T.isValidating||T.revision!==M?O(!0):W()},y[39]=W,y[40]=_?._createdAt,y[41]=w,y[42]=M,y[43]=C.isSyncing,y[44]=K,y[45]=T.isValidating,y[46]=T.revision,y[47]=h):h=y[47];let Q=h;e:{let e,t,n;if(I){f=null;break e}if(v){let e,t,n;y[48]!==P?(e=P("action.publish.live-edit.label"),y[48]=P,y[49]=e):e=y[49],y[50]!==P?(t=P("action.publish.live-edit.tooltip"),y[50]=P,y[51]=t):t=y[51],y[52]!==e||y[53]!==t?(n={tone:"default",icon:u.VQ$,label:e,title:t,disabled:!0},y[52]=e,y[53]=t,y[54]=n):n=y[54],f=n;break e}if(!Y&&!N?.granted){let e;y[55]!==V?(e={tone:"default",icon:u.VQ$,label:"Publish",title:(0,s.jsx)(g.TLO,{context:"publish-document",currentUser:V}),disabled:!0},y[55]=V,y[56]=e):e=y[56],f=e;break e}let i=!!(L||A?.transactionSyncLock?.enabled||"publishing"===S||"published"===S||$||k.disabled),r=i||Y;y[57]!==L||y[58]!==S||y[59]!==P?(e=P("published"===S?"action.publish.published.label":L||"publishing"===S?"action.publish.running.label":"action.publish.draft.label"),y[57]=L,y[58]=S,y[59]=P,y[60]=e):e=y[60],y[61]!==L||y[62]!==S||y[63]!==P||y[64]!==U?(t=L?P("action.publish.waiting"):"published"===S||"publishing"===S?null:U,y[61]=L,y[62]=S,y[63]=P,y[64]=U,y[65]=t):t=y[65];let l=i||L?null:"Ctrl+Alt+P";y[66]!==Q||y[67]!==r||y[68]!==e||y[69]!==t||y[70]!==l?(n={disabled:r,tone:"default",label:e,icon:u.VQ$,title:t,shortcut:l,onHandle:Q},y[66]=Q,y[67]=r,y[68]=e,y[69]=t,y[70]=l,y[71]=n):n=y[71],f=n}return f};iE.action="publish",iE.displayName="PublishAction";let ik={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},iT=({id:e,type:t,draft:n,onComplete:i,liveEdit:r,release:l})=>{let{unpublish:o}=(0,g.QSs)(e,t),[a,c]=(0,d.useState)(!1),[p,m]=(0,g.LyQ)({id:e,type:t,permission:"unpublish"}),h=(0,g.iZK)(),{t:f}=(0,g.Bdt)(eM),x=(0,d.useCallback)(()=>{c(!1),i()},[i]),y=(0,d.useCallback)(()=>{c(!1),o.execute(),i()},[i,o]),b=(0,d.useMemo)(()=>a?{type:"dialog",onClose:i,content:(0,s.jsx)(tt,{id:n?._id||e,type:t,action:"unpublish",onCancel:x,onConfirm:y})}:null,[n,e,x,y,a,i,t]);return(0,d.useMemo)(()=>l||r?null:m||p?.granted?{tone:"critical",icon:u.wvk,disabled:!!o.disabled||m,label:f("action.unpublish.label"),title:o.disabled?f(ik[o.disabled]):"",onHandle:()=>c(!0),dialog:b}:{tone:"critical",icon:u.wvk,label:"Unpublish",title:(0,s.jsx)(g.TLO,{context:"unpublish-document",currentUser:h}),disabled:!0},[l,h,b,m,r,p?.granted,f,o.disabled])};iT.action="unpublish",iT.displayName="UnpublishAction";let iC=(0,d.memo)(function(e){let t,n,i,a,c,u,p,m,h;let f=(0,l.c)(34),{disabled:x,showMenu:y,states:b}=e,{__internal_tasks:j}=t7(),{selectedReleaseId:v}=(0,g.QO2)();f[0]!==b?([t,...n]=b,f[0]=b,f[1]=t,f[2]=n):(t=f[1],n=f[2]);let[_,w]=(0,d.useState)(null);e:{let e,n,l,a;if(!t||!t.title&&!t.shortcut){i=null;break e}f[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},f[3]=e):e=f[3],f[4]!==t.title?(n=t.title&&(0,s.jsx)(o.EY,{size:1,children:t.title}),f[4]=t.title,f[5]=n):n=f[5],f[6]!==t.shortcut?(l=t.shortcut&&(0,s.jsx)(r.qW,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(iA)}),f[6]=t.shortcut,f[7]=l):l=f[7],f[8]!==n||f[9]!==l?(a=(0,s.jsxs)(o.so,{style:e,align:"center",gap:3,children:[n,l]}),f[8]=n,f[9]=l,f[10]=a):a=f[10],i=a}let I=i;f[11]!==t||f[12]!==n||f[13]!==v?(c=v?[t,...n]:n,f[11]=t,f[12]=n,f[13]=v,f[14]=c):c=f[14],a=c;let S=j&&j.footerAction;return f[15]!==x||f[16]!==t||f[17]!==v||f[18]!==I?(u=t&&!v&&(0,s.jsx)(o.XS,{zOffset:200,children:(0,s.jsx)(r.m_,{disabled:!I,content:I,placement:"top",children:(0,s.jsx)(o.BJ,{children:(0,s.jsx)(r.$n,{"data-testid":`action-${tc(t.label)}`,disabled:x||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:w,size:"large",text:t.label,tone:t.tone||"primary"})})})}),f[15]=x,f[16]=t,f[17]=v,f[18]=I,f[19]=u):u=f[19],f[20]!==x||f[21]!==n||f[22]!==v||f[23]!==y||f[24]!==a?(p=(y&&n.length>0||v)&&(0,s.jsx)(iu,{actionStates:a,disabled:x}),f[20]=x,f[21]=n,f[22]=v,f[23]=y,f[24]=a,f[25]=p):p=f[25],f[26]!==_||f[27]!==t?(m=t&&t.dialog&&(0,s.jsx)(id,{dialog:t.dialog,referenceElement:_}),f[26]=_,f[27]=t,f[28]=m):m=f[28],f[29]!==S||f[30]!==u||f[31]!==p||f[32]!==m?(h=(0,s.jsxs)(o.so,{align:"center",gap:1,children:[S,u,p,m]}),f[29]=S,f[30]=u,f[31]=p,f[32]=m,f[33]=h):h=f[33],h}),iD=(0,d.memo)(function(){let e,t,n,i,r;let o=(0,l.c)(12),{actions:a,connectionState:d,documentId:c,editState:u}=t7();o[0]!==a?(t=a??[],o[0]=a,o[1]=t):t=o[1],o[2]!==t?(n=t.filter(iP),o[2]=t,o[3]=n):n=o[3],e=n,o[4]!==e.length||o[5]!==d||o[6]!==c?(i=t=>{let{states:n}=t;return(0,s.jsx)(iC,{disabled:"connected"!==d,showMenu:e.length>1,states:n},c)},o[4]=e.length,o[5]=d,o[6]=c,o[7]=i):i=o[7];let p=i;return 0!==e.length&&u?(o[8]!==e||o[9]!==u||o[10]!==p?(r=(0,s.jsx)(t2,{actions:e,actionProps:u,group:"default",children:p}),o[8]=e,o[9]=u,o[10]=p,o[11]=r):r=o[11],r):null}),iz=(0,d.memo)(function(){let e,t,n,i,r,o,a,d;let c=(0,l.c)(16),{actions:u,connectionState:p,editState:m,revisionId:h}=t7(),f=(m?.draft||m?.published||{})._rev===h;c[0]!==m?(t=m||{},c[0]=m,c[1]=t):t=c[1],c[2]!==h||c[3]!==t?(n={...t,revision:h},c[2]=h,c[3]=t,c[4]=n):n=c[4],e=n,c[5]!==u?(r=u??[],c[5]=u,c[6]=r):r=c[6],c[7]!==r?(o=r.filter(iR).slice(-1),c[7]=r,c[8]=o):o=c[8],i=o,c[9]!==p||c[10]!==f?(a=e=>{let{states:t}=e;return(0,s.jsx)(iC,{disabled:"connected"!==p||!!f,showMenu:!1,states:t})},c[9]=p,c[10]=f,c[11]=a):a=c[11];let g=a;return c[12]!==i||c[13]!==g||c[14]!==e?(d=(0,s.jsx)(t2,{actions:i,actionProps:e,group:"default",children:g}),c[12]=i,c[13]=g,c[14]=e,c[15]=d):d=c[15],d});function iR(e){return e.action===i_.action}function iA(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function iP(e){return!iR(e)}function iM(){let e,t;let n=(0,l.c)(11),{activeViewId:i,paneKey:r,views:a}=t7(),d=`${r}tabpanel`;if(n[0]!==i||n[1]!==r||n[2]!==d||n[3]!==a){let t;n[5]!==i||n[6]!==r||n[7]!==d?(t=(e,t)=>(0,s.jsx)(i$,{icon:e.icon,id:`${r}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:d,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=r,n[7]=d,n[8]=t):t=n[8],e=a.map(t),n[0]=i,n[1]=r,n[2]=d,n[3]=a,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,s.jsx)(o.wb,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function i$(e){let t,n,i,o,a,d,c,u,p;let m=(0,l.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:o,tabPanelId:d,viewId:c,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=o,m[5]=a,m[6]=d,m[7]=c):(t=m[1],n=m[2],i=m[3],o=m[4],a=m[5],d=m[6],c=m[7]);let{ready:h,editState:f}=t7(),{setView:g}=eJ();m[8]!==g||m[9]!==c?(u=()=>g(c),m[8]=g,m[9]=c,m[10]=u):u=m[10];let x=u,y=!h&&!f?.draft&&!f?.published;return m[11]!==x||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==o||m[16]!==a||m[17]!==y||m[18]!==d?(p=(0,s.jsx)(r.oz,{...a,"aria-controls":d,disabled:y,icon:t,id:n,label:o,onClick:x,selected:i}),m[11]=x,m[12]=t,m[13]=n,m[14]=i,m[15]=o,m[16]=a,m[17]=y,m[18]=d,m[19]=p):p=m[19],p}function iL(){let e,t,n;let i=(0,l.c)(22),{connectionState:r,schemaType:o,title:a,value:d}=t7(),c=!!d;i[0]!==d||i[1]!==o||i[2]!==c?(e={enabled:c,schemaType:o,value:d},i[0]=d,i[1]=o,i[2]=c,i[3]=e):e=i[3];let{error:u,value:p}=(0,g.MOl)(e),{t:m}=(0,g.Bdt)(eM);if("connecting"===r&&!c){let e;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),i[4]=e):e=i[4],e}if(a){let e;return i[5]!==a?(e=(0,s.jsx)(s.Fragment,{children:a}),i[5]=a,i[6]=e):e=i[6],e}if(!d){let e,t;let n=o?.title||o?.name;return i[7]!==m||i[8]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),i[7]=m,i[8]=n,i[9]=e):e=i[9],i[10]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),i[10]=e,i[11]=t):t=i[11],t}if(u){let e,t;return i[12]!==u.message||i[13]!==m?(e=m("panes.document-header-title.error.text",{error:u.message}),i[12]=u.message,i[13]=m,i[14]=e):e=i[14],i[15]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),i[15]=e,i[16]=t):t=i[16],t}return i[17]!==m||i[18]!==p?.title?(t=p?.title||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:m("panes.document-header-title.untitled.text")}),i[17]=m,i[18]=p?.title,i[19]=t):t=i[19],i[20]!==t?(n=(0,s.jsx)(s.Fragment,{children:t}),i[20]=t,i[21]=n):n=i[21],n}let iO=e=>{let t=(0,l.c)(12),{release:n}=e,{t:i}=(0,g.Bdt)();if("asap"===n.metadata.releaseType){let e,n;return t[0]!==i?(e=i("release.type.asap"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,s.jsx)(o.EY,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("scheduled"===n.metadata.releaseType){let e;let r="active"===n.state;return t[4]!==r||t[5]!==n||t[6]!==i?(e=n.metadata.intendedPublishAt&&(0,s.jsx)(o.EY,{size:1,children:r?(0,s.jsx)(g.HTc,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,g.drb)(n)}}):(0,s.jsx)(g.HTc,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,g.drb)(n)}})}),t[4]=r,t[5]=n,t[6]=i,t[7]=e):e=t[7],e}if("undecided"===n.metadata.releaseType){let e,n;return t[8]!==i?(e=i("release.type.undecided"),t[8]=i,t[9]=e):e=t[9],t[10]!==e?(n=(0,s.jsx)(o.EY,{size:1,children:e}),t[10]=e,t[11]=n):n=t[11],n}return null},iB={dateStyle:"medium",timeStyle:"short"},iH=(0,d.memo)(function(){let{selectedReleaseId:e,selectedPerspectiveName:t}=(0,g.QO2)(),{t:n}=(0,g.Bdt)(),i=(0,g._T7)(),{params:r}=(0,T.usePaneRouter)(),l=(0,g.ixk)(iB),{data:a,loading:c}=(0,g.K0D)(),{data:u}=(0,g.gJZ)(),p=(0,g.pDY)(),{editState:m,displayed:h,documentType:f,documentId:x}=t7(),{data:y}=(0,g.gn8)({documentId:x}),b=h&&!h._createdAt,j=(0,d.useMemo)(()=>{if(!y)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let t=y.map(e=>(0,g._Sr)(e)),n=a.reduce((n,i)=>{let r=t.includes((0,g._hI)(i._id)),s=(0,g._hI)(i._id);return b&&s===(0,g._Sr)(h._id||"")&&s===e?n.inCreation=i:r?n.currentReleases.push(i):n.notCurrentReleases.push(i),n},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!r?.historyVersion)return n;let i=u.find(e=>(0,g._hI)(e._id)===r?.historyVersion);return i?.state==="archived"&&n.currentReleases.push(i),n},[u,b,h?._id,y,r?.historyVersion,a,e]),v=(0,d.useCallback)(e=>()=>{i(e)},[i]),_=p.get(f),w=!!_&&nh(_),I=(0,d.useMemo)(()=>(!w||!!e)&&!m?.published,[w,e,m?.published]),S=(0,d.useCallback)(e=>{if(!r?.historyVersion)return{selected:(0,g._hI)(e._id)===(0,g._Sr)(h?._id||"")};let t=(0,g._hI)(e._id)===r.historyVersion;return{selected:t,disabled:t}},[h?._id,r?.historyVersion]),E=(0,d.useMemo)(()=>!!(w&&!m?.draft?._id&&!e||(0,g._4P)(h?._id||"")&&(0,g.xo4)(t||"")),[h?._id,m?.draft?._id,w,t,e]),k=(0,d.useMemo)(()=>{let e=h?._id||"";return!(E||r?.historyVersion||t||(0,g.A_X)(e))&&(!!(0,g.R8D)(e)||!((0,g._4P)(e)&&m?.published&&(0,g.xo4)(t||"")))},[h?._id,m?.published,E,r?.historyVersion,t]),C=(0,d.useMemo)(()=>!m?.draft&&!!(b&&e||w),[m?.draft,b,w,e]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.FCT,{tooltipContent:(0,s.jsx)(o.EY,{size:1,children:m?.published&&m?.published?._updatedAt?(0,s.jsx)(g.HTc,{t:n,i18nKey:"release.chip.tooltip.published-date",values:{date:l.format(new Date(m?.published._updatedAt))}}):(0,s.jsx)(s.Fragment,{children:n("release.chip.tooltip.not-published")})}),disabled:I,onClick:v("published"),selected:E,text:n("release.chip.published"),tone:"positive",contextValues:{documentId:m?.published?._id||m?.id||"",menuReleaseId:m?.published?._id||m?.id||"",releases:j.notCurrentReleases,releasesLoading:c,documentType:f,fromRelease:"published",isVersion:!1,disabled:!m?.published}}),(0,s.jsx)(g.FCT,{tooltipContent:(0,s.jsx)(o.EY,{size:1,children:m?.draft?(0,s.jsx)(s.Fragment,{children:m?.draft._updatedAt?(0,s.jsx)(g.HTc,{t:n,i18nKey:"release.chip.tooltip.edited-date",values:{date:l.format(new Date(m?.draft._updatedAt))}}):(0,s.jsx)(g.HTc,{t:n,i18nKey:"release.chip.tooltip.created-date",values:{date:l.format(new Date(m?.draft._createdAt))}})}):(0,s.jsx)(s.Fragment,{children:n(w?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:k,disabled:C,text:n("release.chip.draft"),tone:m?.draft?"caution":"neutral",onClick:v("drafts"),contextValues:{documentId:m?.draft?._id||m?.published?._id||m?.id||"",menuReleaseId:m?.draft?._id||m?.published?._id||m?.id||"",releases:j.notCurrentReleases,releasesLoading:c,documentType:f,fromRelease:"draft",isVersion:!1,disabled:!m?.draft}}),j.inCreation&&(0,s.jsx)(g.FCT,{tooltipContent:(0,s.jsx)(iO,{release:j.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,g.Y73)(j.inCreation),text:j.inCreation.metadata.title||n("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:h?._id||"",menuReleaseId:j.inCreation._id,releases:j.notCurrentReleases,releasesLoading:c,documentType:f,fromRelease:(0,g._hI)(j.inCreation._id),releaseState:j.inCreation.state,isVersion:!0}}),h&&j.currentReleases?.map(e=>s.jsx(g.FCT,{tooltipContent:s.jsx(iO,{release:e}),...S(e),onClick:v(g._hI(e._id)),text:e.metadata.title||n("release.placeholder-untitled-release"),tone:g.Y73(e),locked:g.KJ$(e),contextValues:{documentId:h?._id||"",menuReleaseId:e._id,releases:j.notCurrentReleases,releasesLoading:c,documentType:f,fromRelease:g._hI(e._id),releaseState:e.state,isVersion:!0}},e._id))]})}),iN=(0,d.memo)((0,d.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:l,onMenuAction:a,onPaneClose:c,onPaneSplit:p,menuItemGroups:m,schemaType:h,connectionState:f,views:x,unstable_languageFilter:y}=t7(),{features:b}=ns(),{index:j,BackLink:v,hasGroupSiblings:_}=eJ(),{actions:w}=(0,g.vM8)(),[I,S]=(0,d.useState)(null),E=(0,d.useMemo)(()=>(i??[]).filter(e=>!iR(e)),[i]),k=(0,d.useMemo)(()=>tH({actionHandler:a,fieldActions:w,menuItems:n,menuItemGroups:m}),[a,w,m,n]),T=(0,d.useMemo)(()=>k.filter(tO),[k]),C=(0,d.useMemo)(()=>k.filter(tB),[k]),D=x.length>1,{collapsed:z,isLast:R}=ta(),A=b.splitViews&&p&&x.length>1,P=A&&_,M=b.backButton&&j>0,$=!P&&!M&&!!v,{t:L}=(0,g.Bdt)(eM),O=(0,d.useCallback)(({states:e})=>(0,s.jsx)(iY,{contextMenuNodes:C,setReferenceElement:S,referenceElement:I,states:e}),[C,I]),B=(0,d.useMemo)(()=>(0,s.jsx)(iL,{}),[]),H=(0,d.useMemo)(()=>D&&(0,s.jsx)(iM,{}),[D]),N=(0,d.useMemo)(()=>M&&(0,s.jsx)(r.$n,{as:v,"data-as":"a",icon:u.A60,mode:"bleed",tooltipProps:{content:L("pane-header.back-button.text")}}),[v,M,L]),Y=(0,d.useMemo)(()=>(0,s.jsxs)(o.so,{align:"center",gap:1,children:[y.length>0&&(0,s.jsx)(s.Fragment,{children:y.map((e,t)=>(0,s.jsx)(e,{schemaType:h},`language-filter-${t}`))}),T.map(e=>(0,s.jsx)(tD,{node:e},e.key)),l&&(0,s.jsx)(t2,{actions:E,actionProps:l,group:"paneActions",children:O}),A&&(0,s.jsx)(r.$n,{"aria-label":L("buttons.split-pane-button.aria-label"),icon:u.CwM,mode:"bleed",onClick:p,tooltipProps:{content:L("buttons.split-pane-button.tooltip")}},"split-pane-button"),P&&(0,s.jsx)(r.$n,{icon:u.USm,mode:"bleed",onClick:c,tooltipProps:{content:L("buttons.split-pane-close-button.title")}},"close-view-button"),$&&(0,s.jsx)(r.$n,{icon:u.USm,mode:"bleed",tooltipProps:{content:L("buttons.split-pane-close-group-button.title")},as:v},"close-view-button")]}),[v,E,l,T,c,p,O,h,$,A,P,L,y]);return(0,s.jsxs)(r.vE,{children:[(0,s.jsx)(o.Zp,{hidden:z,style:{lineHeight:0},children:(0,s.jsxs)(o.so,{children:[(0,s.jsx)(o.so,{flex:1,wrap:"wrap",gap:1,padding:3,paddingBottom:0,children:(0,s.jsx)(iH,{})}),(0,s.jsx)(o.az,{flex:"none",padding:3,paddingBottom:0,children:Y})]})}),(0,s.jsx)(tT,{border:!0,ref:t,loading:"connecting"===f&&!l?.draft&&!l?.published,title:B,tabs:H,tabIndex:R&&!z?-1:0,backButton:N})]})})),iY=(0,d.memo)(function(e){let t;let n=(0,l.c)(5),{setReferenceElement:i,referenceElement:r,contextMenuNodes:o}=e,a=(0,d.useDeferredValue)(e.states);return n[0]!==o||n[1]!==r||n[2]!==i||n[3]!==a?(t=(0,s.jsx)(iV,{setReferenceElement:i,referenceElement:r,contextMenuNodes:o,states:a}),n[0]=o,n[1]=r,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),iV=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(8),{states:r,setReferenceElement:o,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==o||i[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(ty,{nodes:a,actionsNodes:r.length>0?r.map((e,n)=>(0,s.jsx)(ip,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=o,i[2]=r,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==r?(n=(0,s.jsx)(ic,{actionStates:r,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=r,i[7]=n):n=i[7],n});function iU(e){let t,n;let i=(0,l.c)(3),{size:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==o?(n=(0,s.jsx)(r.$n,{"aria-hidden":!0,disabled:!0,size:o,style:t,text:"-"}),i[1]=o,i[2]=n):n=i[2],n}let iF={primary:"primary",success:"positive",warning:"caution",danger:"critical"},iW=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(4),{states:r}=e;return 0===r.length?null:(i[0]!==r?(t=r.map(iJ),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(o.cV,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),iK=(0,d.memo)(function(e){let t;let n=(0,l.c)(2),i=(0,d.useDeferredValue)(e.states);return n[0]!==i?(t=(0,s.jsx)(iW,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function iQ(){let e;let t=(0,l.c)(3),{badges:n,editState:i}=t7();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,s.jsx)(t3,{badges:n,badgeProps:i,children:iq}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function iq(e){let{states:t}=e;return(0,s.jsx)(iK,{states:t})}function iJ(e,t){return(0,s.jsx)(r.m_,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,s.jsx)(o.Ex,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?iF[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let iG={create:u.REV,delete:u.ucK,discardDraft:u.USm,initial:u.REV,editDraft:u.qUP,editLive:u.qUP,publish:u.VQ$,unpublish:u.wvk},iZ=(0,I.I4)(u.YJP)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function iX(e){let t,n,i,o,a;let d=(0,l.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,g.Bdt)(eM);d[0]!==c||d[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rs);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},d[0]=c,d[1]=u,d[2]=t):t=d[2];let m=t;return d[3]!==c?(n=(0,s.jsx)(iZ,{"data-expanded":c}),d[3]=c,d[4]=n):n=d[4],d[5]!==c||d[6]!==p?(i=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),d[5]=c,d[6]=p,d[7]=i):i=d[7],d[8]!==i?(o={content:i},d[8]=i,d[9]=o):o=d[9],d[10]!==m||d[11]!==n||d[12]!==o?(a=(0,s.jsx)(r.$n,{mode:"bleed",icon:n,tooltipProps:o,onClick:m}),d[10]=m,d[11]=n,d[12]=o,d[13]=a):a=d[13],a}let i0=(0,I.I4)(o.BJ)`
  max-width: 200px;
`,i1=(0,I.I4)(o.so)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,i2=(0,I.I4)(o.az)(({$visible:e})=>(0,I.AH)`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&(0,I.AH)`
      opacity: 1;
      pointer-events: auto;
    `}
  `),i3={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function i4(e){let t,n;let i=(0,l.c)(9),{maxLength:r,userIds:a,size:d,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==a||i[1]!==u){let e;i[3]!==u?(e=e=>(0,s.jsx)(g.H8m,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=a.map(e),i[0]=a,i[1]=u,i[2]=t}else t=i[2];return i[5]!==r||i[6]!==d||i[7]!==t?(n=(0,s.jsx)(o.GE,{maxLength:r,size:d,children:t}),i[5]=r,i[6]=d,i[7]=t,i[8]=n):n=i[8],n}let i5=(0,I.I4)(o.so)(e=>{let t=(0,ej.JW)(e.theme),n=e.$color;return(0,I.AH)`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),i6={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},i8={minimal:!0,useTemporalPhrase:!0},i7=(0,I.I4)(a.EA)(e=>{let t=(0,ej.JW)(e.theme);return(0,I.AH)`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),i9=e=>{let t,n,i;let r=(0,l.c)(10),{userId:a}=e,[d,c]=(0,g.Jd3)(a);return r[0]!==c||r[1]!==d?(t=(0,s.jsx)(o.az,{children:c||!d?(0,s.jsx)(g.LIN,{animated:!0}):(0,s.jsx)(g.H8m,{user:d})}),r[0]=c,r[1]=d,r[2]=t):t=r[2],r[3]!==c||r[4]!==d?(n=(0,s.jsx)(o.az,{children:c||!d?.displayName?(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(i7,{animated:!0})}):(0,s.jsx)(o.EY,{muted:!0,size:1,children:d.displayName})}),r[3]=c,r[4]=d,r[5]=n):n=r[5],r[6]!==t||r[7]!==n||r[8]!==a?(i=(0,s.jsxs)(o.so,{align:"center",gap:2,padding:1,children:[t,n]},a),r[6]=t,r[7]=n,r[8]=a,r[9]=i):i=r[9],i},re=e=>{let t,n,i,r;let a=(0,l.c)(9),{collaborators:d}=e,{t:c}=(0,g.Bdt)("studio");return a[0]!==c?(t=c("timeline.changes.title"),a[0]=c,a[1]=t):t=a[1],a[2]!==t?(n=(0,s.jsx)(o.az,{padding:1,paddingBottom:2,children:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:t})}),a[2]=t,a[3]=n):n=a[3],a[4]!==d?(i=d.map(rn),a[4]=d,a[5]=i):i=a[5],a[6]!==n||a[7]!==i?(r=(0,s.jsxs)(o.BJ,{paddingBottom:1,children:[n,i]}),a[6]=n,a[7]=i,a[8]=r):r=a[8],r};function rt(e){let t,n,i,a,d,c,u,p,m,h,f,x,y,b,j,v,_,w,I,S,E,k;let T=(0,l.c)(55),{chunk:C,isSelected:D,onSelect:z,collaborators:R,optionsMenu:A}=e,{t:P}=(0,g.Bdt)("studio"),{type:M,endTimestamp:$}=C;T[0]!==M?(t=iG[M],T[0]=M,T[1]=t):t=T[1];let L=t;T[2]!==C.authors?(n=Array.from(C.authors),T[2]=C.authors,T[3]=n):n=T[3];let O=n;T[4]!==R?(i=R?Array.from(R):[],T[4]=R,T[5]=i):i=T[5];let B=i,H="delete"!==M;T[6]===Symbol.for("react.memo_cache_sentinel")?(a={dateStyle:"medium",timeStyle:"short"},T[6]=a):a=T[6];let N=(0,g.ixk)(a);T[7]!==$?(d=new Date($),T[7]=$,T[8]=d):d=T[8];let Y=(0,g.Vq9)(d||"",i8);if(T[9]!==N||T[10]!==$){let e=new Date($);u=N.format(e),T[9]=N,T[10]=$,T[11]=u}else u=T[11];c=u,T[12]!==C||T[13]!==H||T[14]!==z?(p=e=>{e.preventDefault(),e.stopPropagation(),H&&z(C)},T[12]=C,T[13]=H,T[14]=z,T[15]=p):p=T[15];let V=p;T[16]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},T[16]=m):m=T[16],T[17]!==O?(h=(0,s.jsx)(i4,{maxLength:3,userIds:O,size:2}),T[17]=O,T[18]=h):h=T[18];let U=i6[M];return T[19]!==L?(f=L&&(0,s.jsx)(L,{}),T[19]=L,T[20]=f):f=T[20],T[21]!==f?(x=(0,s.jsx)(o.EY,{size:0,children:f}),T[21]=f,T[22]=x):x=T[22],T[23]!==U||T[24]!==x?(y=(0,s.jsx)(i5,{align:"center",justify:"center",$color:U,children:x}),T[23]=U,T[24]=x,T[25]=y):y=T[25],T[26]!==h||T[27]!==y?(b=(0,s.jsxs)("div",{style:m,children:[h,y]}),T[26]=h,T[27]=y,T[28]=b):b=T[28],T[29]!==P||T[30]!==M?(j=P(i3[M])||(0,s.jsx)("code",{children:M}),T[29]=P,T[30]=M,T[31]=j):j=T[31],T[32]!==j?(v=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:j}),T[32]=j,T[33]=v):v=T[33],T[34]!==c||T[35]!==$||T[36]!==Y?(_=(0,s.jsx)(o.EY,{as:"time",size:1,muted:!0,dateTime:$,title:c,children:Y}),T[34]=c,T[35]=$,T[36]=Y,T[37]=_):_=T[37],T[38]!==v||T[39]!==_?(w=(0,s.jsxs)(o.BJ,{space:2,children:[v,_]}),T[38]=v,T[39]=_,T[40]=w):w=T[40],T[41]!==B?(I=B.length>0&&(0,s.jsx)(o.so,{flex:1,justify:"flex-end",align:"center",children:(0,s.jsx)(r.m_,{placement:"top",content:(0,s.jsx)(re,{collaborators:B}),portal:!0,children:(0,s.jsx)(o.az,{paddingLeft:2,paddingY:2,children:(0,s.jsx)(i4,{maxLength:3,userIds:B,size:0,withTooltip:!1})})})}),T[41]=B,T[42]=I):I=T[42],T[43]!==b||T[44]!==w||T[45]!==I?(S=(0,s.jsxs)(o.so,{align:"center",gap:3,children:[b,w,I]}),T[43]=b,T[44]=w,T[45]=I,T[46]=S):S=T[46],T[47]!==C.id||T[48]!==V||T[49]!==D||T[50]!==S?(E=(0,s.jsx)(o.Zp,{as:"button",onClick:V,padding:2,pressed:D,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":C.id,children:S}),T[47]=C.id,T[48]=V,T[49]=D,T[50]=S,T[51]=E):E=T[51],T[52]!==A||T[53]!==E?(k=(0,s.jsxs)(o.so,{align:"center",gap:1,children:[E,A]}),T[52]=A,T[53]=E,T[54]=k):k=T[54],k}function rn(e){return(0,s.jsx)(i9,{userId:e},e)}let ri=e=>"publish"!==e.type,rr=e=>"publish"===e.type,rs="timeline-list-wrapper",rl=({chunks:e,hasMoreChunks:t,lastChunk:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)"})=>{let[a,c]=(0,d.useState)(!1),{t:u}=(0,g.Bdt)("studio"),p=n?.id,m=(0,d.useMemo)(()=>(function(e){let t=[];for(let n of e){if(rr(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(ri(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(rr(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}ri(n)&&t.push(n)}return t})(e),[e]),[h,f]=(0,d.useState)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&ri(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,d.useEffect)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&ri(e)&&e.parentId){let t=e.parentId;f(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[m,p]);let x=(0,d.useMemo)(()=>m.filter(e=>!!rr(e)||!e.parentId||h.has(e.parentId)),[m,h]);(0,d.useEffect)(()=>{x.length<16&&t&&i()},[x,t,i]);let y=(0,d.useCallback)(e=>()=>f(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),b=(0,d.useMemo)(()=>p?x.findIndex(e=>e.id===p):-1,[p,x]),j=(0,d.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?r(n):(console.error("TimelineItem: chunk not found"),r(t))},[e,r]),v=(0,d.useCallback)((e,{activeIndex:n})=>(0,s.jsxs)(o.az,{paddingBottom:1,paddingTop:0===n?1:0,paddingRight:1,paddingLeft:ri(e)&&e.parentId?4:1,children:[(0,s.jsx)(rt,{chunk:e,isSelected:p===e.id,onSelect:j,collaborators:rr(e)?e.collaborators:void 0,optionsMenu:rr(e)&&e.children.length>0?(0,s.jsx)(iX,{isExpanded:h.has(e.id),onExpand:y(e.id)}):null}),n===x.length-1&&t&&(0,s.jsx)(g.gd4,{})]}),[h,x.length,y,j,t,p]);return(0,d.useEffect)(()=>c(!0),[]),(0,s.jsxs)(i2,{$visible:!b||a,"data-ui":"timeline",children:[0===x.length&&(0,s.jsxs)(i0,{padding:3,space:3,children:[(0,s.jsx)(o.EY,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]}),x.length>0&&(0,s.jsx)(i1,{direction:"column",$maxHeight:l,id:rs,children:(0,s.jsx)(g.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:u("timeline.list.aria-label"),autoFocus:"list",initialIndex:b,initialScrollAlign:"center",itemHeight:57,items:x,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})})]})};function ro(e){let t,n,i,r,a,d;let c=(0,l.c)(14),{versionError:p}=e,{t:m}=(0,g.Bdt)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(g.SxK,{tone:"critical",children:(0,s.jsx)(u.YZv,{})}),c[0]=t):t=c[0],c[1]!==m||c[2]!==p?(n=m(p?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=m,c[2]=p,c[3]=n):n=c[3],c[4]!==n?(i=(0,s.jsx)(g.SxK,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==m||c[7]!==p?(r=m(p?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=m,c[7]=p,c[8]=r):r=c[8],c[9]!==r?(a=(0,s.jsx)(g.SxK,{size:1,tone:"critical",children:r}),c[9]=r,c[10]=a):a=c[10],c[11]!==i||c[12]!==a?(d=(0,s.jsxs)(o.so,{align:"flex-start",gap:3,padding:4,children:[t,(0,s.jsxs)(o.BJ,{space:4,children:[i,a]})]}),c[11]=i,c[12]=a,c[13]=d):d=c[13],d}rl.displayName="Timeline";let ra=(0,I.I4)(r.AM)`
  overflow: hidden;
  overflow: clip;
`,rd="timeline-menu";function rc({chunk:e,mode:t,placement:n}){let{setTimelineRange:i,timelineError:l,ready:c,timelineStore:p}=t7(),[m,h]=(0,d.useState)(!1),[f,x]=(0,d.useState)(null),[y,b]=(0,d.useState)(null),j=(0,a.dj)(),v=(0,g.SfM)(p,e=>e.chunks),_=(0,g.SfM)(p,e=>e.isLoading),w=(0,g.SfM)(p,e=>e.hasMoreChunks),I=(0,g.SfM)(p,e=>e.realRevChunk),S=(0,g.SfM)(p,e=>e.sinceTime),{t:E}=(0,g.Bdt)("studio"),k=(0,d.useCallback)(()=>{h(!0)},[]),T=(0,d.useCallback)(()=>{h(!1)},[]),C=(0,d.useCallback)(e=>{m&&("Escape"===e.key||"Tab"===e.key)&&(T(),f?.focus())},[f,T,m]);(0,o.Pm)(C),(0,o.PR)(m&&T,()=>[f,y]);let D=(0,d.useCallback)(e=>{try{let[t,n]=p?.findRangeForRev(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[i,E,p,j]),z=(0,d.useCallback)(e=>{try{let[t,n]=p?.findRangeForSince(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[i,E,p,j]),R=(0,d.useCallback)(()=>{_||p?.loadMore()},[_,p]),A=(0,d.useMemo)(()=>{if(l)return(0,s.jsx)(ro,{});if("rev"===t)return(0,s.jsx)(rl,{chunks:v,hasMoreChunks:w,lastChunk:I,onLoadMore:R,onSelect:D});let e=I?v.filter(e=>e.index<I.index):v;return(0,s.jsx)(rl,{chunks:e,hasMoreChunks:w,lastChunk:S,onLoadMore:R,onSelect:z})},[v,R,w,t,I,D,z,S,l]),P={timestamp:{dateStyle:"medium",timeStyle:"short"}},M=e?E(i3[e.type],{context:"timestamp",timestamp:new Date(e?.endTimestamp),formatParams:P}):E("timeline.latest-revision"),$=e?E("timeline.since",{timestamp:new Date(e?.endTimestamp),formatParams:P}):E("timeline.since-version-missing"),L="rev"===t?M:$;return(0,s.jsx)(o.GD,{__unstable_elements:{[rd]:y},children:(0,s.jsx)(ra,{"data-testid":"timeline-menu",constrainSize:!0,content:m&&A,"data-ui":"versionMenu",open:m,placement:n,matchReferenceWidth:!0,portal:!0,ref:b,children:(0,s.jsx)(o.so,{width:"fill",children:(0,s.jsx)(r.$n,{"data-testid":m?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!c,mode:"ghost",onClick:m?T:k,ref:x,selected:m,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:u.D3D,text:c?L:E("timeline.loading-history")})})})})}let ru=(0,I.I4)(S.P.path)`
  transform-origin: center;
`,rp=e=>(0,s.jsx)(S.P.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),rm=e=>(0,s.jsx)(ru,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),rh=e=>(0,s.jsx)(S.P.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),rf=(0,I.i7)`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,rg=I.I4.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${rf} 1s ease-in-out infinite;
  }
`,rx={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},ry={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},rb={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rj={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function rv(e){let t,n,i,r,o;let a=(0,l.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,s.jsx)(rm,{variants:rb,initial:d,animate:d}),n=(0,s.jsx)(rp,{variants:ry,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,s.jsxs)(rg,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(r=(0,s.jsx)(rh,{variants:rj,initial:d,animate:d}),a[7]=d,a[8]=r):r=a[8],a[9]!==d||a[10]!==i||a[11]!==r?(o=(0,s.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,s.jsxs)(S.P.g,{variants:rx,initial:d,animate:d,children:[i,r]})}),a[9]=d,a[10]=i,a[11]=r,a[12]=o):o=a[12],o}let r_={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rw=e=>{let t,n,i,r,a;let d=(0,l.c)(13),{status:c}=e,{t:u}=(0,g.Bdt)(eM);if("saved"!==c&&"syncing"!==c)return null;let p=r_[c];return d[0]!==c?(t=(0,s.jsx)(rv,{status:c}),d[0]=c,d[1]=t):t=d[1],d[2]!==p.tone||d[3]!==t?(n=(0,s.jsx)(g.SxK,{size:1,tone:p.tone,children:t}),d[2]=p.tone,d[3]=t,d[4]=n):n=d[4],d[5]!==p.i18nKey||d[6]!==u?(i=u(p.i18nKey),d[5]=p.i18nKey,d[6]=u,d[7]=i):i=d[7],d[8]!==i?(r=(0,s.jsx)(o.EY,{muted:!0,size:1,children:i}),d[8]=i,d[9]=r):r=d[9],d[10]!==n||d[11]!==r?(a=(0,s.jsxs)(o.so,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,r]}),d[10]=n,d[11]=r,d[12]=a):a=d[12],a},rI={minimal:!0,useTemporalPhrase:!0},rS=S.P.create(o.$n),rE=()=>{let e,t;let n=(0,l.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(g.LIN,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)(o.so,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,s.jsx)(a.EA,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},rk=e=>{let t,n,i,r,a,d,c;let u=(0,l.c)(16),{author:p,translationKey:m,timestamp:h}=e,{onHistoryOpen:f,inspector:x,onHistoryClose:y}=t7(),{t:b}=(0,g.Bdt)(),j=(0,g.Vq9)(void 0===h?"":h,rI);u[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},u[0]=t,u[1]=n):(t=u[0],n=u[1]);let v=x?.name===nd?y:f;return u[2]!==p?(i=p&&(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(g.H8m,{user:p,size:0})}),u[2]=p,u[3]=i):i=u[3],u[4]!==b||u[5]!==m?(r=b(m),u[4]=b,u[5]=m,u[6]=r):r=u[6],u[7]!==j||u[8]!==r?(a=(0,s.jsxs)(o.EY,{muted:!0,size:1,children:[r," ",j]}),u[7]=j,u[8]=r,u[9]=a):a=u[9],u[10]!==i||u[11]!==a?(d=(0,s.jsxs)(o.so,{align:"center",flex:"none",gap:3,children:[i,a]}),u[10]=i,u[11]=a,u[12]=d):d=u[12],u[13]!==v||u[14]!==d?(c=(0,s.jsx)(rS,{"data-testid":"pane-footer-document-status",animate:t,initial:n,mode:"bleed",onClick:v,padding:2,muted:!0,children:d}),u[13]=v,u[14]=d,u[15]=c):c=u[15],c},rT=()=>{let{editState:e}=t7(),{selectedPerspective:t}=(0,g.QO2)(),n=(0,d.useMemo)(()=>(0,g.xo4)(t)&&e?.published?._updatedAt?{translationKey:g.uMx.createDocumentVersion,timestamp:e.published._updatedAt}:e?.version?._updatedAt?{translationKey:e?.version?._updatedAt===e?.version?._createdAt?g.uMx.createDocumentVersion:g.uMx.editDocumentVersion,timestamp:e.version._updatedAt}:e?.draft?._updatedAt?{translationKey:e?.draft?._updatedAt===e?.draft?._createdAt?g.uMx.createDocumentVersion:g.uMx.editDocumentVersion,timestamp:e.draft._updatedAt}:null,[t,e?.published?._updatedAt,e?.version?._updatedAt,e?.version?._createdAt,e?.draft?._updatedAt,e?.draft?._createdAt]);return n?(0,s.jsx)(rk,{author:"",translationKey:n.translationKey,timestamp:n.timestamp}):null},rC=()=>{let e;let t=(0,l.c)(6),{events:n,loading:i}=(0,g.LJN)(),r=n?.[0];if(!r&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rE,{}),t[0]=e):e=t[0],e}if(!r){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rT,{}),t[1]=e):e=t[1],e}let o=g.uMx[r.type];return t[2]!==r.author||t[3]!==r.timestamp||t[4]!==o?(e=(0,s.jsx)(rk,{author:r.author,translationKey:o,timestamp:r.timestamp}),t[2]=r.author,t[3]=r.timestamp,t[4]=o,t[5]=e):e=t[5],e},rD=()=>{let e,t;let n=(0,l.c)(8),{timelineStore:i}=t7(),r=(0,g.SfM)(i,rR),o=(0,g.SfM)(i,rA),a=r?.[0];if(!a&&o){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rE,{}),n[0]=e):e=n[0],e}if(!a){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rT,{}),n[1]=e):e=n[1],e}n[2]!==a.authors?(e=Array.from(a.authors),n[2]=a.authors,n[3]=e):e=n[3];let d=e[0],c=i3[a.type];return n[4]!==d||n[5]!==a.endTimestamp||n[6]!==c?(t=(0,s.jsx)(rk,{author:d,translationKey:c,timestamp:a.endTimestamp}),n[4]=d,n[5]=a.endTimestamp,n[6]=c,n[7]=t):t=n[7],t};function rz(){let e,t,n,i,r,o,a;let c=(0,l.c)(19),{documentId:u,documentType:p,editState:m,value:h}=t7(),[f,x]=(0,d.useState)(null),y=g.For().beta?.eventsAPI?.documents,b=(0,g.M7h)(u,p,m?.release),j=h?._updatedAt;if(c[0]!==f||c[1]!==b.isSyncing?(e=()=>{if("syncing"===f&&!b.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},c[0]=f,c[1]=b.isSyncing,c[2]=e):e=c[2],c[3]!==j||c[4]!==f||c[5]!==b.isSyncing?(t=[f,j,b.isSyncing],c[3]=j,c[4]=f,c[5]=b.isSyncing,c[6]=t):t=c[6],(0,d.useEffect)(e,t),c[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},c[7]=n):n=c[7],c[8]!==u?(i=[u],c[8]=u,c[9]=i):i=c[9],(0,d.useLayoutEffect)(n,i),c[10]!==b.isSyncing?(r=()=>{b.isSyncing&&x("syncing")},c[10]=b.isSyncing,c[11]=r):r=c[11],c[12]!==j||c[13]!==b.isSyncing?(o=[b.isSyncing,j],c[12]=j,c[13]=b.isSyncing,c[14]=o):o=c[14],(0,d.useLayoutEffect)(r,o),f){let e;let t=f||void 0;return c[15]!==t?(e=(0,s.jsx)(rw,{status:t}),c[15]=t,c[16]=e):e=c[16],e}if(y){let e;return c[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rC,{}),c[17]=e):e=c[17],e}return c[18]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(rD,{}),c[18]=a):a=c[18],a}function rR(e){return e.chunks}function rA(e){return e.isLoading}let rP=(0,I.I4)(o.EY)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rM(){let e,t,n,i;let r=(0,l.c)(8),{displayed:a}=t7(),{t:d}=(0,g.Bdt)(),c=a?._updatedAt||a?._createdAt;r[0]!==c||r[1]!==d?(e=c?(0,s.jsx)(g.HTc,{t:d,i18nKey:"document-status.revision-from",values:{date:(0,ey.A)(new Date(c),"MMM d, yyyy '@' pp")}}):null,r[0]=c,r[1]=d,r[2]=e):e=r[2],r[3]!==e?(t={name:"revision",text:e,tone:"caution"},r[3]=e,r[4]=t):t=r[4];let p=t;return r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.G2W,{})})}),r[5]=n):n=r[5],r[6]!==p.text?(i=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.so,{flex:1,gap:3,padding:2,children:[n,(0,s.jsx)(o.az,{flex:1,children:(0,s.jsx)(rP,{size:1,textOverflow:"ellipsis",children:p.text})})]})}),r[6]=p.text,r[7]=i):i=r[7],i}function r$(e){let t,n,i,r,a,c,u;let p=(0,l.c)(21),{actionsBoxRef:m,createLinkMetadata:h}=e,{editState:f,revisionId:x,onChange:y}=t7(),{selectedPerspective:b}=(0,g.QO2)(),{title:j}=nu(),v=g.eaL().components?.documentLinkedActions,_=!!x,[w,I]=(0,d.useState)(null),[S,E]=(0,d.useState)(null);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},p[0]=t):t=p[0];let k=t;p[1]!==S?(n={element:S,onResize:k},p[1]=S,p[2]=n):n=p[2],function(e){let t,n;let i=(0,l.c)(4),{element:r,onResize:s}=e;i[0]!==r||i[1]!==s?(t=()=>(r&&g.bCC.observe(r,s),()=>{r&&g.bCC.unobserve(r)}),n=[r,s],i[0]=r,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,d.useLayoutEffect)(t,n)}(n);e:{let e=!!(f?.ready&&"boolean"==typeof w);if(b){if((0,g.xo4)(b)){i=e&&!!f?.published;break e}if((0,g.Jrl)(b)){i=e&&!!f?.version;break e}}i=e}let T=i;if(h&&(0,g.Y07)(h)&&v){let e;p[3]!==v||p[4]!==h||p[5]!==y||p[6]!==j?(e=(0,s.jsx)(v,{metadata:h,panelPortalElementId:nr,onDocumentChange:y,documentTitle:j}),p[3]=v,p[4]=h,p[5]=y,p[6]=j,p[7]=e):e=p[7],r=e}else if(_){let e;p[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(iz,{}),p[8]=e):e=p[8],r=e}else{let e;p[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(iD,{}),p[9]=e):e=p[9],r=e}let C=_?"caution":void 0;return p[10]!==r||p[11]!==m||p[12]!==w||p[13]!==T||p[14]!==_?(a=T&&(0,s.jsxs)(o.so,{align:"stretch",gap:1,justify:"space-between",paddingY:2,paddingLeft:_?3:4,paddingRight:_?2:3,children:[(0,s.jsxs)(o.so,{align:"center",flex:1,gap:w?2:3,wrap:"wrap",paddingRight:3,children:[(0,s.jsxs)(o.so,{align:"center",children:[_?(0,s.jsx)(rM,{}):(0,s.jsx)(rz,{}),(0,s.jsx)(iU,{size:"large"})]}),(0,s.jsx)(iQ,{})]}),(0,s.jsxs)(o.so,{align:"flex-start",justify:"flex-end",ref:m,style:{flexShrink:0,marginLeft:"auto"},children:[(0,s.jsx)(iU,{size:"large"}),r]})]}),p[10]=r,p[11]=m,p[12]=w,p[13]=T,p[14]=_,p[15]=a):a=p[15],p[16]!==a?(c=(0,s.jsx)(o.so,{direction:"column",ref:E,sizing:"border",children:a}),p[16]=a,p[17]=c):c=p[17],p[18]!==C||p[19]!==c?(u=(0,s.jsx)(o.Zp,{tone:C,children:c}),p[18]=C,p[19]=c,p[20]=u):u=p[20],u}let rL=(0,d.memo)(function(e){let t,n,i,r,o,a,d,c,u,p,m,h,f;let x=(0,l.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:r,onActionStart:o,onKeyDown:a,rootRef:c,states:u,...d}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=r,x[5]=o,x[6]=a,x[7]=d,x[8]=c,x[9]=u,x[10]=p):(t=x[1],n=x[2],i=x[3],r=x[4],o=x[5],a=x[6],d=x[7],c=x[8],u=x[9],p=x[10]);let y=void 0===p?"div":p,b=u[n];x[11]!==o||x[12]!==a||x[13]!==u?(m=e=>{let t=u.filter(t=>t.shortcut&&(0,ed.v_)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(u.indexOf(n));return}a&&a(e)},x[11]=o,x[12]=a,x[13]=u,x[14]=m):m=x[14];let j=m;return x[15]!==t||x[16]!==b?(h=b&&b.dialog&&(0,s.jsx)(g.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(id,{dialog:b.dialog,referenceElement:t})}),x[15]=t,x[16]=b,x[17]=h):h=x[17],x[18]!==y||x[19]!==i||x[20]!==j||x[21]!==r||x[22]!==d||x[23]!==c||x[24]!==h?(f=(0,s.jsxs)(y,{id:r,onKeyDown:j,tabIndex:-1,...d,ref:c,children:[i,h]}),x[18]=y,x[19]=i,x[20]=j,x[21]=r,x[22]=d,x[23]=c,x[24]=h,x[25]=f):f=x[25],f}),rO=(0,d.memo)(e=>{let t,n,i,r,o,a,c,u,p;let m=(0,l.c)(18);m[0]!==e?({actionsBoxElement:t,as:r,children:n,...i}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=r):(t=m[1],n=m[2],i=m[3],r=m[4]);let h=void 0===r?"div":r,{actions:f,editState:g}=t7(),[x,y]=(0,d.useState)(-1);m[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{y(e)},m[5]=o):o=m[5];let b=o;m[6]!==g?(c=g&&{...g,onComplete:rB,revision:void 0},m[6]=g,m[7]=c):c=m[7],a=c,m[8]!==t||m[9]!==x||m[10]!==h||m[11]!==n||m[12]!==i?(u=e=>{let{states:r}=e;return(0,s.jsx)(rL,{...i,activeIndex:x,actionsBoxElement:t,as:h,onActionStart:b,states:r,children:n})},m[8]=t,m[9]=x,m[10]=h,m[11]=n,m[12]=i,m[13]=u):u=m[13];let j=u;return a&&f?(m[14]!==a||m[15]!==f||m[16]!==j?(p=(0,s.jsx)(t2,{actionProps:a,actions:f,children:j}),m[14]=a,m[15]=f,m[16]=j,m[17]=p):p=m[17],p):null});function rB(){}rO.displayName="Memo(DocumentActionShortcuts)";let rH=e=>(0,g.u4i)(e)&&"string"==typeof e._id&&"string"==typeof e._type;function rN(e){let t,n,i,r,s,o;let a=(0,l.c)(6),{resolveProductionUrl:c}=(0,g.For)().document;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=new Y.t(void 0),a[0]=n):n=a[0],t=n,a[1]!==e?(i=()=>{t.next(e)},r=[t,e],a[1]=e,a[2]=i,a[3]=r):(i=a[2],r=a[3]),(0,d.useEffect)(i,r),a[4]!==c?(o=t.asObservable().pipe((0,ee.F)(),(0,es.B)(500),(0,et.n)(e=>rH(e)?(0,V.H)(c({document:e})):(0,P.of)(void 0)),(0,ee.F)(),(0,O.W)(rY)),a[4]=c,a[5]=o):o=a[5],s=o,(0,E.J)(s)}function rY(e){let t=(0,g.u4i)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function rV(e){let t,n,i,r,a,d,c;let u=(0,l.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:f,minWidth:x}=e,{t:y}=(0,g.Bdt)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==y||u[3]!==t?(n=(0,s.jsx)(g.HTc,{t:y,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=y,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==y?(i=p&&(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(g.HTc,{t:y,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=y,u[7]=i):i=u[7],u[8]!==p||u[9]!==y?(r=!p&&(0,s.jsx)(o.EY,{as:"p",children:y("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=y,u[10]=r):r=u[10],u[11]!==m?(a=g.Cu5&&m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.EY,{as:"p",children:"Here is the JSON representation of the document:"}),(0,s.jsx)(o.Zp,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,s.jsx)(o.Cy,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=a):a=u[12],u[13]!==i||u[14]!==r||u[15]!==a?(d=(0,s.jsxs)(o.BJ,{space:4,children:[i,r,a]}),u[13]=i,u[14]=r,u[15]=a,u[16]=d):d=u[16],u[17]!==h||u[18]!==x||u[19]!==f||u[20]!==n||u[21]!==d?(c=(0,s.jsx)(t4,{currentMinWidth:h,flex:2.5,minWidth:x,paneKey:f,title:n,tone:"caution",children:d}),u[17]=h,u[18]=x,u[19]=f,u[20]=n,u[21]=d,u[22]=c):c=u[22],c}let rU=[],rF=["fixed","fixed","absolute"],rW=(0,I.I4)(g.olN)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function rK(){let{changesOpen:e,documentId:t,documentType:n,fieldActions:i,focusPath:l,inspectOpen:c,inspector:p,inspectors:m,onFocus:h,onHistoryOpen:f,onMenuAction:x,onPathOpen:y,paneKey:b,schemaType:j,value:v,isInitialValueLoading:_,ready:w}=t7(),{params:I}=eJ(),{features:S}=ns(),{t:E}=(0,ec.Bd)(eM),{collapsed:k}=eW(),T=(0,g.YKH)(),C=rN(v),D=(0,g.G_3)(v),{documentLinkedBannerContent:z,startInCreateBanner:R}=(0,g.eaL)().components??{},[A,P]=(0,d.useState)(null),[M,$]=(0,d.useState)(null),[L,O]=(0,d.useState)(null),[B,H]=(0,d.useState)(null),[N,Y]=(0,d.useState)(null);(0,g.ti5)({element:A,focusPath:l,value:v});let[V,U]=(0,d.useState)([]),[F,W]=(0,d.useState)([]),K=(0,a.sQ)(M),Q=(0,a.sQ)(L),q=K?.height,J=Q?.height,G=600+(p?320:0),Z=320+(p?320:0),X=(0,d.useMemo)(()=>m?.find(e=>e.name===p?.name),[m,p?.name]),ee=!!v,et=(0,d.useMemo)(()=>(function(e){let t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,r)=>{let s=i[r];return!s||s.hidden?null:{action:`${no}${n.name}`,group:s.showAsAction?void 0:"inspectors",icon:s.icon,isDisabled:!t,selected:e?.name===n.name,shortcut:s.hotkeys?.join("+"),showAsAction:s.showAsAction,title:s.title,tone:s.tone}}).filter(Boolean)}(e),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:u.Pe7,shortcut:"Ctrl+Alt+O"}:null}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:u.qYV},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:u.qzt,isDisabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:X,features:S,hasValue:ee,inspectorMenuItems:V,inspectors:m,previewUrl:C,t:E}),[X,S,ee,V,m,C,E]),en=(0,d.useCallback)(e=>{for(let t of et)if(t.shortcut&&(0,ed.v_)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),x(t);return}},[x,et]),ei=(0,d.useCallback)(e=>{y(e),h(e)},[y,h]),er=(0,d.useMemo)(()=>({[nr]:N}),[N]);return j?(0,s.jsxs)(g.niW,{value:v,children:[m.length>0&&(0,s.jsx)(nc,{documentId:t,documentType:n,inspectors:m,onMenuItems:U}),i.length>0&&j&&(0,s.jsx)(g.yW8,{actions:i,documentId:t,documentType:n,onActions:W,path:rU,schemaType:j}),(0,s.jsx)(g.tdH,{actions:F,path:rU,children:(0,s.jsxs)(rO,{actionsBoxElement:B,as:tl,currentMinWidth:G,"data-testid":"document-pane",flex:2.5,id:b,minWidth:Z,onKeyUp:en,rootRef:P,children:[(0,s.jsx)(iN,{ref:O,menuItems:et}),D&&(0,g.Y07)(D)&&z&&(0,s.jsx)(rQ,{children:(0,s.jsx)(nD,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,s.jsx)(z,{metadata:D})})}),(0,s.jsx)(a.Co,{position:rF,zOffset:T.paneDialog,children:(0,s.jsx)(o.so,{direction:"column",flex:1,height:k?void 0:"fill",children:(0,s.jsx)(rW,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&I?.changesInspectorTab==="review",onOpenReviewChanges:f,onSetFocus:ei,children:(0,s.jsx)(n9,{footerHeight:q||null,headerHeight:J||null,isInspectOpen:c,rootElement:A,setDocumentPanelPortalElement:Y})})})}),(0,s.jsx)(o.GD,{__unstable_elements:er,children:(0,s.jsxs)(a.Co,{position:rF,zOffset:T.portal,children:[R&&(0,s.jsx)(rQ,{children:(0,s.jsx)(R,{document:v,documentId:t,documentType:j,documentReady:w,isInitialValueLoading:!!_,panelPortalElementId:nr})}),(0,s.jsx)(tv,{ref:$,children:(0,s.jsx)(r.vE,{children:(0,s.jsx)(r$,{actionsBoxRef:H,createLinkMetadata:D})})})]})}),(0,s.jsx)(nm,{})]})})]}):(0,s.jsx)(rV,{currentMinWidth:G,documentType:n,minWidth:Z,paneKey:b,value:v})}function rQ(e){let{collapsed:t}=ta();return t?null:e.children}function rq(e){return e.document?.components?.unstable_layout}let rJ=(0,eh.g_)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),rG=(0,eh.g_)({name:"New Draft Created",version:1,description:"User created a new draft"}),rZ=(0,d.memo)(e=>{let{children:t,index:n,pane:i,paneKey:r,onFocusPath:l,forcedVersion:o,historyStore:u}=e,{store:p,error:m,ready:h,revisionDocument:f,onOlderRevision:x,sinceDocument:y,isPristine:b,revisionId:j,lastNonDeletedRevId:v}=u,_=(0,g.pDY)(),w=(0,g.bgA)(),{setDocumentMeta:I}=(0,g.e8q)(),{__internal_tasks:S,document:{actions:E,badges:k,unstable_fieldActions:T,unstable_languageFilter:z,inspectors:R}}=(0,g.For)(),A=(0,em.Jr)(),P=(0,g.oGK)(),M=eJ(),$=M.setParams,{features:L}=ns(),{push:O}=(0,a.dj)(),{options:B,menuItemGroups:H=na,title:N=null,views:Y=[]}=i,V=(0,g.$6H)(B),U=V.id,F=(0,g.IMx)(U),W=B.type,K=(0,g.$6H)(M.params)||nl,Q=(0,g.QO2)(),{isReleaseLocked:q,selectedReleaseId:J,selectedPerspectiveName:G}=(0,d.useMemo)(()=>o||{selectedPerspectiveName:Q.selectedPerspectiveName,selectedReleaseId:Q.selectedReleaseId,isReleaseLocked:!!(0,g.Jrl)(Q.selectedPerspective)&&(0,g.KJ$)(Q.selectedPerspective)},[o,Q.selectedPerspectiveName,Q.selectedReleaseId,Q.selectedPerspective]),Z=(0,g.$6H)(M.payload),{templateName:X,templateParams:ee}=(0,d.useMemo)(()=>(function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${i}". Using "${i}".`);let r=i||t.urlTemplate,s=e.filter(e=>e.schemaType===t.documentType),l={...t.templateParams,..."object"==typeof n&&n||{}},o=r;return r||1!==s.length||(o=s[0].id),{templateName:o,templateParams:l}})(w,{documentType:W,templateName:V.template,templateParams:V.templateParameters,panePayload:Z,urlTemplate:K.template}),[W,V,K,Z,w]),et=(0,g.nfZ)({documentId:F,documentType:W,templateName:X,templateParams:ee,version:K.version}),en=(0,g.$6H)(et),ei=en.loading,{patch:er}=(0,g.QSs)(F,W,J),es=_.get(W),el=(0,g.zX2)(F,W,"default",J),{validation:eo}=(0,g.dWw)(F,W,J),ea=(0,g.jdA)(F,W,J),ed=!!es?.liveEdit,ec=(0,d.useMemo)(()=>J?el.version||el.draft||el.published||en.value:G&&(0,g.xo4)(G)?el.published||(ed?en.value:{_id:F,_type:W}):el.draft||el.published||en.value,[F,W,el.draft,el.published,el.version,en.value,ed,G,J]),[eu,ep]=(0,d.useState)(!1),eh=(0,d.useCallback)(()=>{let e;switch(!0){case!!K.rev:e="revision";break;case J&&(0,g.A_X)(ec._id):e="version";break;case"published"===G:e="published";break;default:e="draft"}return e},[G,J,K,ec._id]),ef=(0,d.useMemo)(()=>eh(),[eh]),eg=(0,d.useMemo)(()=>({schemaType:W,documentId:F,versionType:ef,...J&&{versionName:J}}),[W,F,ef,J]),ex=(0,d.useMemo)(()=>E(eg),[E,eg]),ey=(0,d.useMemo)(()=>k({schemaType:W,documentId:F}),[k,F,W]),eb=(0,d.useMemo)(()=>z({schemaType:W,documentId:F}),[F,W,z]),ej=(0,g.$6H)(eo),eI=(0,g.$6H)(Y),[eS,eE]=(0,d.useState)(()=>K.path?(0,D.sH)(K.path):g.Mlv),ek=(0,d.useRef)([]),eT=K.view||eI[0]&&eI[0].id||null,eC=(0,d.useMemo)(()=>!!h&&!el?.draft&&!el?.published&&!el?.version&&!b,[el?.draft,el?.published,el?.version,b,h]),eD=rN(ec),[ez,eR]=(0,d.useState)([]);(0,d.useEffect)(()=>{let e=P.documentPresence(ec._id).subscribe(e=>{eR(e)});return()=>{e.unsubscribe()}},[P,ec._id]);let eA=(0,d.useMemo)(()=>R({documentId:F,documentType:W}),[F,W,R]),[eP,e$]=(0,d.useState)(()=>K.inspect||null),eL=(0,d.useRef)(K.inspect);(0,d.useEffect)(()=>{eL.current!==K.inspect&&(eL.current=K.inspect,e$(K.inspect||null))},[K.inspect]);let eO=eA?.find(e=>e.name===eP),eB=eA.find(e=>e.name===nd),eH=eO?.name===nd,{t:eN}=(0,g.Bdt)(eM),eY="on"===K.inspect,eV=eH?y:el?.published||null,eU=(0,d.useMemo)(()=>es?T({documentId:F,documentType:W,schemaType:es}):[],[F,W,T,es]),eF="connected"===ea&&el.ready&&(!K.rev||h||!!m),eW=(0,d.useMemo)(()=>x?f||{_id:ec._id,_type:ec._type}:ec,[x,f,ec]),eK=(0,d.useCallback)((e,t)=>{$({...K,since:e,rev:t||void 0})},[K,$]),eQ=(0,d.useCallback)(e=>{tw.current||(eE(g.Mlv),ek.current!==g.Mlv&&(ek.current=g.Mlv,l?.(g.Mlv)))},[l,eE]),eq=(0,d.useCallback)(e=>{let t=e&&eA.find(t=>t.name===e);if(e&&!t){console.warn(`No inspector named "${e}"`);return}if(eO){if(t){let e=t.onClose?.({params:K})??{params:K};e$(null),eL.current=void 0,$({...e.params,inspect:void 0});return}if(eO){let e=eO.onClose?.({params:K})??{params:K};e$(null),eL.current=void 0,$({...e.params,inspect:void 0})}}},[eO,eA,K,$]),eG=(0,d.useCallback)((e,t)=>{let n=eA.find(t=>t.name===e);if(!n){console.warn(`No inspector named "${e}"`);return}if(eO?.name===n.name){$({...K,...t,inspect:n.name});return}let i=K;eO&&(i=(n.onClose?.({params:i})??{params:i}).params);let r=n.onOpen?.({params:i})??{params:i};e$(n.name),eL.current=n.name,$({...r.params,...t,inspect:n.name})},[eO,eA,K,$]),eZ=(0,d.useCallback)(()=>{eB&&eq(eB.name)},[eq,eB]),eX=(0,d.useCallback)(()=>{L.reviewChanges&&eB&&eG(eB.name,{changesInspectorTab:"review"})},[L.reviewChanges,eG,eB]),e0=(0,d.useCallback)(()=>M.closeCurrent(),[M]),e1=(0,d.useCallback)(()=>M.duplicateCurrent(),[M]),e2=(0,d.useCallback)((e=!eY)=>{$(e?{...K,inspect:"on"}:C(K,"inspect"))},[eY,K,$]),e3=(0,d.useCallback)(e=>{if("production-preview"===e.action&&eD)return window.open(eD),!0;if("copy-document-url"===e.action&&navigator)return A.log(rJ),navigator.clipboard.writeText(window.location.toString()),O({id:"copy-document-url",status:"info",title:eN("panes.document-operation-results.operation-success_copy-url")}),!0;if("inspect"===e.action)return e2(!0),!0;if("reviewChanges"===e.action)return eX(),!0;if("string"==typeof e.action&&e.action.startsWith(no)){let t=e.action.slice(no.length),n=eA.find(e=>e.name===t);if(n)return n.name===eP?eq(n.name):eG(n.name),!0}return!1},[eN,eq,eX,eP,eA,eG,eD,e2,O,A]),e4=(0,d.useCallback)(()=>e2(!1),[e2]),[e5,e6]=(0,d.useState)([]),[e8,e7]=(0,d.useState)(),[e9,te]=(0,d.useState)(),[tt,tn]=(0,d.useState)(),ti=(0,d.useCallback)((e,t)=>{te(n=>(0,g.pmt)(n,e,t))},[]),tr=(0,d.useCallback)((e,t)=>{tn(n=>(0,g.pmt)(n,e,t))},[]),ts=(0,d.useCallback)((e,t)=>e7(n=>(0,g.pmt)(n,e,t)),[]),tl=ec._createdAt?"update":"create",to=ec._id?ec._id:"dummy-id",ta=(0,d.useMemo)(()=>({...ec,_id:ed?(0,g.IMx)(to):(0,g.T4)(to)}),[ed,ec,to]),[td,tc]=(0,g.Gvc)({document:ta,permission:tl}),tu=(0,g.Zr3)(ec),tp=!ec?._id,tm=(0,d.useMemo)(()=>{let e=!tc&&!td?.granted,t=!(0,ev.Yh)(es,"update"),n=tp&&!(0,ev.Yh)(es,"create"),i="reconnecting"===ea,r=el.transactionSyncLock?.enabled;return!!(ed&&el.draft?._id)||!ed&&"published"===G||!!J&&(0,g._Sr)(ec._id)!==J||!eF||null!==j||e||t||n||i||r||eu||eC||tu||q},[tc,td?.granted,es,tp,ea,el.transactionSyncLock?.enabled,el.draft?._id,ed,G,J,ec._id,eF,j,eu,eC,tu,q]),th=(0,d.useRef)(()=>{throw Error("Attempted to patch the Sanity document during initial render or in an `useInsertionEffect`. Input components should only call `onChange()` in a useEffect or an event handler.")}),tf=(0,d.useCallback)(e=>th.current(e),[]);(0,d.useInsertionEffect)(()=>{tm?th.current=()=>{throw Error("Attempted to patch a read-only document")}:th.current=e=>{el.draft||el.published||A.log(rG),er.execute((0,g.ror)(e.patches),en.value)}},[el.draft,el.published,en.value,er,A,tm]);let tg=(0,g.lNS)({schemaType:es,documentValue:eW,readOnly:tm,comparisonValue:eV,focusPath:eS,openPath:e5,collapsedPaths:e9,presence:ez,validation:ej,collapsedFieldSets:tt,fieldGroupState:e8,changesOpen:eH});(0,d.useEffect)(()=>{I({documentId:F,documentType:W,schemaType:es,onChange:tf})},[F,W,es,tf,I]);let tx=(0,d.useRef)(tg);(0,d.useEffect)(()=>{tx.current=tg},[tg]);let ty=(0,d.useCallback)(e=>{(0,g.jrg)(tx.current,e).forEach(e=>{"expandPath"===e.type&&te(t=>(0,g.pmt)(t,e.path,!1)),"expandFieldSet"===e.type&&tn(t=>(0,g.pmt)(t,e.path,!1)),"setSelectedGroup"===e.type&&e7(t=>(0,g.pmt)(t,e.path,e.groupName))}),e6(e)},[tx]),tb=(0,d.useCallback)((e,t)=>{P.setLocation([{type:"document",documentId:ec._id,path:e,lastActiveAt:new Date().toISOString(),selection:t?.selection}])},[P,ec._id]),tj=(0,d.useMemo)(()=>e_(tb,1e3,{leading:!0,trailing:!0}),[tb]),tv=(0,d.useCallback)((e,t)=>{let n=(0,D.p0)(e);n!==ek.current&&(eE((0,D.p0)(n)),ty((0,D.p0)(n.slice(0,-1))),ek.current=n,l?.(n)),tj(n,t)},[l,ty,tj]),t_=(0,d.useMemo)(()=>({actions:ex,activeViewId:eT,badges:ey,changesOpen:eH,closeInspector:eq,collapsedFieldSets:tt,collapsedPaths:e9,compareValue:eV,connectionState:ea,displayed:eW,documentId:F,documentIdRaw:U,documentType:W,editState:el,fieldActions:eU,focusPath:eS,inspector:eO||null,inspectors:eA,__internal_tasks:S,onBlur:eQ,onChange:tf,onFocus:tv,onPathOpen:ty,onHistoryClose:eZ,onHistoryOpen:eX,onInspectClose:e4,onMenuAction:e3,onPaneClose:e0,onPaneSplit:e1,onSetActiveFieldGroup:ts,onSetCollapsedPath:ti,onSetCollapsedFieldSet:tr,openInspector:eG,openPath:e5,index:n,inspectOpen:eY,validation:ej,menuItemGroups:H||[],paneKey:r,previewUrl:eD,ready:eF,schemaType:es,isPermissionsLoading:tc,isInitialValueLoading:ei,permissions:td,setTimelineRange:eK,setIsDeleting:ep,isDeleting:eu,isDeleted:eC,timelineError:m,timelineStore:p,title:N,value:ec,selectedReleaseId:J,views:eI,formState:tg,unstable_languageFilter:eb,revisionId:j,lastNonDeletedRevId:v}),[ex,eT,ey,eH,eq,tt,e9,eV,ea,eW,F,U,W,el,eU,eS,eO,eA,S,eQ,tf,tv,ty,eZ,eX,e4,e3,e0,e1,ts,ti,tr,eG,e5,n,eY,ej,H,r,eD,eF,es,tc,ei,td,eK,eu,eC,m,p,N,ec,J,eI,tg,eb,j,v]);(0,d.useEffect)(()=>{let e;return"reconnecting"===ea&&(e=setTimeout(()=>{O({id:"sanity/structure/reconnecting",status:"warning",title:eN("panes.document-pane-provider.reconnecting.title")})},2e3)),()=>{e&&clearTimeout(e)}},[ea,O,eN]);let tw=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{if(eF&&K.path){let{path:e,...t}=K,n=(0,D.Y7)(tx.current?.value,(0,D.sH)(e));tw.current=!0,ew(ek.current,n)||(eE(n),ty(n),ek.current=n,l?.(n));let i=setTimeout(()=>{tw.current=!1},0);return M.setParams(t),()=>clearTimeout(i)}},[K,F,l,ty,eF,M]),(0,s.jsx)(c.Fi.Provider,{value:t_,children:t})});rZ.displayName="Memo(DocumentPaneProvider)";let rX=e=>{let t,n,i,r,o,a,d,c;let u=(0,l.c)(37),{params:p}=eJ(),m=void 0===p?nl:p,h=si(e.pane.options,m),f=(0,g.pDY)(),x=h.type,y=!!f.get(h.type)?.liveEdit,{selectedPerspectiveName:b,selectedReleaseId:j,selectedPerspective:v}=(0,g.QO2)(),{data:_}=(0,g.gJZ)();u[0]!==h.id?(t=(0,g.IMx)(h.id),u[0]=h.id,u[1]=t):t=u[1];let w=(0,g.zX2)(t,x,"default",j),I=y&&"drafts"===v&&!w?.draft,{rev:S,since:E}=m,k=m.historyVersion;e:{if(I){let e;u[2]!==h.id?(e=(0,g.IMx)(h.id),u[2]=h.id,u[3]=e):e=u[3],n=e;break e}if(k&&_.some(e=>(0,g._hI)(e._id)===k)){let e;u[4]!==k||u[5]!==h.id?(e=(0,g.ctg)(h.id,k),u[4]=k,u[5]=h.id,u[6]=e):e=u[6],n=e;break e}if(typeof b>"u"){let e;u[7]!==h.id?(e=(0,g.T4)(h.id),u[7]=h.id,u[8]=e):e=u[8],n=e;break e}if("published"===b){let e;u[9]!==h.id?(e=(0,g.IMx)(h.id),u[9]=h.id,u[10]=e):e=u[10],n=e;break e}if(j){let e;u[11]!==h.id||u[12]!==b?(e=(0,g.ctg)(h.id,b),u[11]=h.id,u[12]=b,u[13]=e):e=u[13],n=e;break e}n=h.id}let T=n;u[14]!==T||u[15]!==h.type||u[16]!==S||u[17]!==E?(i={documentId:T,documentType:h.type,rev:S,since:E},u[14]=T,u[15]=h.type,u[16]=S,u[17]=E,u[18]=i):i=u[18];let C=(0,g.Sjd)(i),D=C.error,z=C.revision?.revisionId||null,R=!!(C.revision?.document&&C.revision?.revisionId),A=C.revision?.document||null,P=C.sinceRevision?.document||null,M=!C.loading,$=0===C.events.length;return u[19]!==C.events?(o=C.events.find(r0)?.id||null,u[19]=C.events,u[20]=o):o=u[20],u[21]!==C.error||u[22]!==M||u[23]!==$||u[24]!==o||u[25]!==z||u[26]!==R||u[27]!==A||u[28]!==P?(a={error:D,revisionId:z,onOlderRevision:R,revisionDocument:A,sinceDocument:P,ready:M,isPristine:$,lastNonDeletedRevId:o},u[21]=C.error,u[22]=M,u[23]=$,u[24]=o,u[25]=z,u[26]=R,u[27]=A,u[28]=P,u[29]=a):a=u[29],r=a,u[30]!==r||u[31]!==k||u[32]!==e?(d=k?(0,s.jsx)(g.g19,{selectedPerspectiveName:k,excludedPerspectives:g.Mlv,children:(0,s.jsx)(rZ,{...e,historyStore:r})}):(0,s.jsx)(rZ,{...e,historyStore:r}),u[30]=r,u[31]=k,u[32]=e,u[33]=d):d=u[33],u[34]!==d||u[35]!==C?(c=(0,s.jsx)(g.tGd,{value:C,children:d}),u[34]=d,u[35]=C,u[36]=c):c=u[36],c};function r0(e){return!(0,g.GDb)(e)&&!(0,g.zOx)(e)}let r1=e=>{let t,n,i,r,o;let a=(0,l.c)(20),{pane:c}=e,u=eJ(),p=si(c.options,u.params),m=u.params||nl,[h,f]=(0,d.useState)(null);a[0]!==p.id?(t=(0,g.IMx)(p.id),a[0]=p.id,a[1]=t):t=a[1],a[2]!==p.type||a[3]!==m.rev||a[4]!==m.since||a[5]!==t?(n={documentId:t,documentType:p.type,onError:f,rev:m.rev,since:m.since},a[2]=p.type,a[3]=m.rev,a[4]=m.since,a[5]=t,a[6]=n):n=a[6];let x=(0,g.Az$)(n),y=(0,g.SfM)(x,r2),b=(0,g.SfM)(x,r3),j=(0,g.SfM)(x,r4),v=(0,g.SfM)(x,r5),_=(0,g.SfM)(x,r6),w=(0,g.SfM)(x,r8),I=(0,g.SfM)(x,r7),S=b?.id||null,E=!!w;return a[7]!==I||a[8]!==y||a[9]!==x||a[10]!==S||a[11]!==v||a[12]!==j||a[13]!==E||a[14]!==h||a[15]!==_?(r={store:x,error:h,revisionId:S,onOlderRevision:y,revisionDocument:v,sinceDocument:j,ready:_,isPristine:E,lastNonDeletedRevId:I},a[7]=I,a[8]=y,a[9]=x,a[10]=S,a[11]=v,a[12]=j,a[13]=E,a[14]=h,a[15]=_,a[16]=r):r=a[16],i=r,a[17]!==i||a[18]!==e?(o=(0,s.jsx)(rZ,{...e,historyStore:i}),a[17]=i,a[18]=e,a[19]=o):o=a[19],o};function r2(e){return e.onOlderRevision}function r3(e){return e.revTime}function r4(e){return e.sinceAttributes}function r5(e){return e.timelineDisplayed}function r6(e){return e.timelineReady}function r8(e){return e.isPristine}function r7(e){return e.lastNonDeletedRevId}let r9=(0,d.memo)(e=>{let t;let n=(0,l.c)(4);if(g.For().beta?.eventsAPI?.documents){let t;return n[0]!==e?(t=(0,s.jsx)(rX,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,s.jsx)(r1,{...e}),n[2]=e,n[3]=t):t=n[3],t});r9.displayName="Memo(DocumentPaneProviderWrapper)";let se=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(5),{name:r}=(0,g.For)(),o=e.pane.source||r;return i[0]!==e?(t=(0,s.jsx)(g.K1$,{children:(0,s.jsx)(st,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,s.jsx)(g.NeO,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function st(e){let t,n,i,r,a,c,u,p,m,h,f,x;let y=(0,l.c)(53),{pane:b,paneKey:j}=e,{resolveNewDocumentOptions:v}=(0,g.For)().document,{selectedPerspectiveName:_}=(0,g.QO2)(),w=eJ(),I=si(b.options,w.params),{documentType:S,isLoaded:E}=(0,g.fRg)(I.id,I.type);!function(){let e,t,n,i,r;let s=(0,l.c)(9),{params:o,setParams:a}=eJ(),c=void 0===o?nl:o,{selectedPerspectiveName:u}=(0,g.QO2)(),p=(0,d.useRef)(!1);s[0]!==c||s[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>c[e])&&a({...c,rev:"true"===c.preserveRev?c.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},s[0]=c,s[1]=a,s[2]=e):e=s[2];let m=(0,eb.J)(e);s[3]!==u||s[4]!==m?(t=()=>{p.current&&m(u)},n=[u,m],s[3]=u,s[4]=m,s[5]=t,s[6]=n):(t=s[5],n=s[6]),(0,d.useEffect)(t,n),s[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),r=[],s[7]=i,s[8]=r):(i=s[7],r=s[8]),(0,d.useEffect)(i,r)}();let k=function(){let e;let t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:rq,defaultComponent:rK},t[0]=e):e=t[0],(0,g.A1m)(e)}();y[0]!==I.id||y[1]!==I.type||y[2]!==v?(n=v({type:"document",documentId:I.id,schemaType:I.type}),y[0]=I.id,y[1]=I.type,y[2]=v,y[3]=n):n=y[3],t=n,y[4]!==t?(i={templateItems:t},y[4]=t,y[5]=i):i=y[5];let[T,C]=(0,g.CzS)(i),z=E&&!C;y[6]!==S||y[7]!==z||y[8]!==I||y[9]!==e?(a=z&&S&&I.type!==S?{...e,pane:{...e.pane,options:{...I,type:S}}}:e,y[6]=S,y[7]=z,y[8]=I,y[9]=e,y[10]=a):a=y[10],r=a;let{ReferenceChildLink:R,handleEditReference:A,groupIndex:P,routerPanesState:M}=w;y[11]!==P||y[12]!==M?(c=M[P+1]?.[0].params||{},y[11]=P,y[12]=M,y[13]=c):c=y[13];let $=c,L=M.length,{parentRefPath:O}=$;y[14]!==P||y[15]!==O||y[16]!==L?(p=O?{path:(0,D.sH)(O),state:P>=L-1?"none":P>=L-2?"selected":"pressed"}:{path:[],state:"none"},y[14]=P,y[15]=O,y[16]=L,y[17]=p):p=y[17],u=p;let{t:B}=(0,g.Bdt)(eM);if("*"===I.type&&!z){let e,t;return y[18]!==B?(e=B("panes.document-pane.document-not-found.loading"),y[18]=B,y[19]=e):e=y[19],y[20]!==j||y[21]!==e?(t=(0,s.jsx)(t8,{flex:2.5,minWidth:320,paneKey:j,title:e}),y[20]=j,y[21]=e,y[22]=t):t=y[22],t}if(!S){let e,t,n,i,r;return y[23]!==B?(e=B("panes.document-pane.document-not-found.title"),y[23]=B,y[24]=e):e=y[24],y[25]!==I.id?(t={id:I.id},y[25]=I.id,y[26]=t):t=y[26],y[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sn},y[27]=n):n=y[27],y[28]!==B||y[29]!==t?(i=(0,s.jsx)(o.BJ,{space:4,children:(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(g.HTc,{t:B,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),y[28]=B,y[29]=t,y[30]=i):i=y[30],y[31]!==j||y[32]!==i||y[33]!==e?(r=(0,s.jsx)(t4,{flex:2.5,minWidth:320,paneKey:j,title:e,children:i}),y[31]=j,y[32]=i,y[33]=e,y[34]=r):r=y[34],r}let H=`${S}-${I.id}-${_||""}`;return y[35]!==k||y[36]!==I.id||y[37]!==I.type?(m=(0,s.jsx)(k,{documentId:I.id,documentType:I.type}),y[35]=k,y[36]=I.id,y[37]=I.type,y[38]=m):m=y[38],y[39]!==I.id||y[40]!==I.type||y[41]!==m?(h=(0,s.jsx)(t9,{documentId:I.id,documentType:I.type,children:m}),y[39]=I.id,y[40]=I.type,y[41]=m,y[42]=h):h=y[42],y[43]!==R||y[44]!==u||y[45]!==A||y[46]!==h||y[47]!==T?(f=(0,s.jsx)(g.NO5,{EditReferenceLinkComponent:R,onEditReference:A,initialValueTemplateItems:T,activePath:u,children:h}),y[43]=R,y[44]=u,y[45]=A,y[46]=h,y[47]=T,y[48]=f):f=y[48],y[49]!==r||y[50]!==f||y[51]!==H?(x=(0,s.jsx)(r9,{...r,children:f},H),y[49]=r,y[50]=f,y[51]=H,y[52]=x):x=y[52],x}function sn(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function si(e,t){let n,i;let r=(0,l.c)(8);r[0]!==t?(n=void 0===t?{}:t,r[0]=t,r[1]=n):n=r[1];let s=n,o=(0,g.bgA)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let l=e.template||s.template;r[2]!==l||r[3]!==o?(t=l?o.find(e=>e.id===l):void 0,r[2]=l,r[3]=o,r[4]=t):t=r[4];let a=t?.schemaType;if(!a){i=e;break e}r[5]!==a||r[6]!==e?(n={...e,type:a},r[5]=a,r[6]=e,r[7]=n):n=r[7],i=n}return i}let sr={by:[{field:"_updatedAt",direction:"desc"}]},ss={},sl=(0,I.I4)(o.az)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,so=(0,I.I4)(o.az)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,sa=[...Array(30).keys()];function sd(e){let t,n;let i=(0,l.c)(4),{layout:r}=e;return i[0]!==r?(t=sa.map(e=>(0,s.jsx)(g.m6P,{isPlaceholder:!0,layout:r},e)),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(o.BJ,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function sc(e){let t,n,i,r,a,c,u;let p=(0,l.c)(59),{childItemId:m,error:h,filterIsSimpleTypeConstraint:f,hasMaxItems:x,hasSearchQuery:y,isActive:b,isLazyLoading:j,isLoading:v,items:_,layout:w,loadingVariant:I,onEndReached:S,onRetry:E,paneTitle:k,searchInputElement:T,showIcons:C}=e,D=(0,g.pDY)(),{collapsed:z}=eW(),{collapsed:R,index:A}=ta(),[P,M]=(0,d.useState)(!R),{t:$}=(0,g.Bdt)(eM);p[0]!==S||p[1]!==P?(t=()=>{P&&S()},p[0]=S,p[1]=P,p[2]=t):t=p[2];let L=t;p[3]!==R?(n=()=>{if(R)return;let e=setTimeout(()=>{M(!0)},0);return()=>{clearTimeout(e)}},p[3]=R,p[4]=n):n=p[4],p[5]!==R||p[6]!==_?(i=[R,_],p[5]=R,p[6]=_,p[7]=i):i=p[7],(0,d.useEffect)(n,i),p[8]!==m||p[9]!==x||p[10]!==b||p[11]!==j||p[12]!==_.length||p[13]!==w||p[14]!==D||p[15]!==C||p[16]!==$?(r=(e,t)=>{let{activeIndex:n}=t,i=(0,g.IMx)(e._id),r=m===i,l=!b&&r,a=b&&r,d=n===_.length-1,c=d&&j,u=d&&x;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t0,{icon:!1!==C&&void 0,id:i,layout:w,marginBottom:1,pressed:l,schemaType:D.get(e._type),selected:a,value:e}),c&&(0,s.jsx)(g.gd4,{}),u&&(0,s.jsx)(o.az,{marginY:1,paddingX:3,paddingY:4,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,size:1,children:$("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=x,p[10]=b,p[11]=j,p[12]=_.length,p[13]=w,p[14]=D,p[15]=C,p[16]=$,p[17]=r):r=p[17];let O=r;e:{let e,t;if(y){let e,t;p[18]!==$?(e=$("panes.document-list-pane.no-documents.text"),p[18]=$,p[19]=e):e=p[19],p[20]!==e?(t=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,children:e})})})}),p[20]=e,p[21]=t):t=p[21],a=t;break e}p[22]!==f||p[23]!==$?(e=$(f?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[22]=f,p[23]=$,p[24]=e):e=p[24],p[25]!==e?(t=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,children:e})})})}),p[25]=e,p[26]=t):t=p[26],a=t}let B=a;t:{let e,t;if(!P){c=null;break t}if(h){let e,t,n,i,r,l,a;p[27]!==$?(e=$("panes.document-list-pane.error.title"),p[27]=$,p[28]=e):e=p[28],p[29]!==e?(t=(0,s.jsx)(o.DZ,{as:"h3",children:e}),p[29]=e,p[30]=t):t=p[30],p[31]!==h.message?(n={error:h.message},p[31]=h.message,p[32]=n):n=p[32],p[33]===Symbol.for("react.memo_cache_sentinel")?(i={Code:su},p[33]=i):i=p[33],p[34]!==$||p[35]!==n?(r=(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(g.HTc,{t:$,i18nKey:"panes.document-list-pane.error.text",values:n,components:i})}),p[34]=$,p[35]=n,p[36]=r):r=p[36],p[37]!==h||p[38]!==E?(l=(0,s.jsx)(g.kbS,{error:h,eventId:null,onRetry:E}),p[37]=h,p[38]=E,p[39]=l):l=p[39],p[40]!==r||p[41]!==l||p[42]!==t?(a=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsxs)(o.BJ,{paddingX:4,paddingY:5,space:4,children:[t,r,l]})})}),p[40]=r,p[41]=l,p[42]=t,p[43]=a):a=p[43],c=a;break t}if(!v&&0===_.length){c=B;break t}if("initial"===I&&v){let e;p[44]!==w?(e=(0,s.jsx)(tn,{ms:300,children:(0,s.jsx)(sd,{layout:w})}),p[44]=w,p[45]=e):e=p[45],c=e;break t}if("spinner"===I&&v){c=null;break t}let n=`${A}-${R}`,i="subtle"===I?.8:1;p[46]!==L||p[47]!==_||p[48]!==n||p[49]!==k||p[50]!==O||p[51]!==T?(e=(0,s.jsx)(so,{children:(0,s.jsx)(g.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:k,canReceiveFocus:!0,inputElement:T,itemHeight:51,items:_,onEndReached:L,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:O,wrapAround:!1},n)}),p[46]=L,p[47]=_,p[48]=n,p[49]=k,p[50]=O,p[51]=T,p[52]=e):e=p[52],p[53]!==i||p[54]!==e?(t=(0,s.jsx)(sl,{overflow:"hidden",height:"fill",$opacity:i,children:e}),p[53]=i,p[54]=e,p[55]=t):t=p[55],c=t}let H=c,N=z||"initial"===I?"hidden":"auto";return p[56]!==H||p[57]!==N?(u=(0,s.jsx)(td,{"data-testid":"document-list-pane",overflow:N,children:H}),p[56]=H,p[57]=N,p[58]=u):u=p[58],u}function su(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function sp(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base?null:"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,eD.qg)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let sm=["_id","_type","_createdAt","_updatedAt","_rev"];function sh(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[r,...s]=n;if(!("fields"in t))return"";let l=t.fields.find(e=>e.name===r);if(!l){if(!sm.includes(r)){let e=`The current ordering config targeted the nonexistent field "${r}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in l.type&&"reference"===l.type.name){let t=l.type.to;return`${r}->{${t.map(t=>e(t,s)).join(",")}}`}let o=s.length>0&&e(l.type,s),a=o?`{${o}}`:"";return s.length>0?`${r}${a}`:r})(e,t.field.split("."),n)).join(", ")}let sf=(0,g.pTS)({maxSize:100});function sg(e){let{client:t,schema:n,sort:i,perspective:r,limit:s,params:l,filter:o,searchQuery:a,staticTypeNames:d,maxFieldDepth:c,searchStrategy:u}=e,p=i.by,m=i?.extendedProjection,h=(0,U.v)(()=>t.listen(`*[${o}]`,l,{events:["welcome","mutation","reconnect"],includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,F.Z)((e,t)=>0===t&&"welcome"!==e.type?(0,W.$)(()=>Error("reconnect"===e.type?"Could not establish EventSource connection":`Received unexpected type of first event "${e.type}"`)):(0,P.of)(e)),(0,K.u)()),[f,x]=(0,Q.j)(h,e=>"welcome"===e.type),y=JSON.stringify({filter:o,limit:s,params:l,searchQuery:a,perspective:r,sort:i,staticTypeNames:d});return(0,M.h)(f.pipe((0,q.s)(1)),x.pipe((0,J.c)(1e3,G.E,{leading:!0,trailing:!0}))).pipe((0,eR.L)(e=>(d?(0,P.of)(d):t.observable.fetch(`array::unique(*[${o}][]._type)`,l)).pipe((0,F.Z)(h=>{let f=(0,g._oG)(n,d||[]).filter(e=>!!h.includes(e.name)&&(sh(e,i.by,!0),!0)),x=(0,g.XZv)(f,t,{filter:o,params:l,strategy:u,maxDepth:c}),y=()=>x({query:a||"",types:f},{__unstable_extendedProjection:m,comments:[`findability-source: ${a?"list-query":"list"}`],limit:s,skipSortByScore:!0,sort:p,perspective:r}).pipe((0,$.T)(e=>e.hits.map(({hit:e})=>e)));return"mutation"===e.type&&"query"!==e.visibility?(0,R.O)(1200).pipe((0,F.Z)(y)):y()}))),sf(y),(0,$.T)(({fromCache:e,value:t})=>({fromCache:e,documents:t})))}let sx={error:null,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},sy="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",sb=(0,I.i7)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sj=(0,I.i7)`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,sv=(0,I.I4)(u.Nl1)`
  animation: ${sb} 500ms linear infinite;
`,s_=(0,I.I4)(u.Nl1)`
  animation: ${sb} 1500ms linear infinite;
  opacity: 0.4;
`,sw=(0,I.I4)(u.Nl1)`
  animation:
    ${sb} 1500ms linear infinite,
    ${sj} 1000ms linear;
  opacity: 0.4;
`,sI=(0,d.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:r,sortOrder:l,layout:a}=e,c=(0,g.pDY)(),p=(0,g.K0D)(),{perspectiveStack:m}=(0,g.QO2)(),{displayOptions:h,options:f}=i,{apiVersion:y,filter:b}=f,j=s0(f.params||ss),v=(0,d.useMemo)(()=>{let e=sp(b,j);return e?.length===1?e[0]:null},[b,j]),_=h?.showIcons!==!1,{t:w}=(0,g.Bdt)(eM),{title:I}=(0,g.FP1)(i),[S,k]=(0,d.useState)(""),[T,C]=(0,d.useState)(""),[A,L]=(0,d.useState)(null),H=v&&l?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=D.sH(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,x.tA)(e)||(0,x.wr)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,x.do)(t)){i=t;continue}let[r,s]=t.to||[];if(s||!r)return;i=r}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(l,c.get(v)):l,Y=(0,g.$6H)(H),{error:V,isLoadingFullList:U,isLoading:W,items:Q,fromCache:J,onLoadFullList:G,onRetry:ee}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:r,perspective:s,apiVersion:l}=e,o=(0,g.tH7)({...g.miu,apiVersion:l||g.miu.apiVersion}),{strategy:a}=(0,g.hA9)().search,c=(0,g.pDY)(),u=(0,g.xx_)(),p=(0,d.useMemo)(()=>sp(t,n),[t,n]),[[m,h]]=(0,d.useState)(()=>(0,ez.t)()),[[f,x]]=(0,d.useState)(()=>(0,ez.t)()),y=(0,d.useMemo)(()=>{let e={client:o,filter:t,limit:100,params:n,schema:c,perspective:s,searchQuery:r||"",sort:i||sr,staticTypeNames:p,maxFieldDepth:u,searchStrategy:a},l=sg(e).pipe((0,en.t)({refCount:!0,bufferSize:1})),d=f.pipe((0,el.E)(l),(0,N.p)(([,e])=>e?.documents.length===100),(0,q.s)(1),(0,F.Z)(()=>(0,B.x)((0,P.of)({type:"loadFullList"}),sg({...e,limit:2e3}).pipe((0,$.T)(e=>({type:"result",result:e}))))),(0,K.u)());return(0,M.h)(l.pipe((0,$.T)(e=>({type:"result",result:e})),(0,eo.Q)(d)),d).pipe((0,O.W)((e,t)=>(0,B.x)((0,P.of)({type:"error",error:e instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${sy}`):Error(`${String(e)} ${sy}`)}),(0,M.h)((0,z.R)(window,"online"),m).pipe((0,q.s)(1),(0,F.Z)(()=>t)))),(0,ea.S)((e,t)=>{if("error"===t.type)return{...e,error:t.error};if("result"===t.type){var n;return{...e,error:null,fromCache:t.result.fromCache,isLoading:!1,items:(n=t.result.documents,(0,g.Zck)(n).map(e=>{let t=e.draft||e.published,n=t?.id&&(0,g.A_X)(t._id),i=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:i,isVersion:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error("Unexpected")},sx))},[o,t,n,c,s,r,i,p,u,a,f,m]),{error:b,items:j,isLoading:v,fromCache:_,isLoadingFullList:w}=(0,E.J)(y,sx);return{error:b,onRetry:h,isLoading:v,items:j,fromCache:_,onLoadFullList:x,isLoadingFullList:w}}({apiVersion:y,filter:b,perspective:0===m.length?"raw":m,params:j,searchQuery:S?.trim(),sortOrder:Y}),et=W||p.loading,ei=(0,E.N)(e=>e.pipe((0,$.T)(e=>e.target.value),(0,Z.M)(C),(0,X.s)(e=>""===e?(0,P.of)(""):(0,R.O)(300)),(0,Z.M)(k))),er=(0,d.useCallback)(()=>{k(""),C("")},[]),es=(0,d.useCallback)(e=>{"Escape"===e.key&&er()},[er]),[ed,ec]=(0,d.useState)();(0,d.useEffect)(()=>{ed||et||ec(r)},[ed,et,r]),(0,d.useEffect)(()=>{er(),ec()},[r,er]);let eu=(0,d.useMemo)(()=>et&&ed===r?"spinner":J?"subtle":"initial",[ed,J,et,r]),ep=(0,d.useMemo)(()=>"spinner"===eu?sv:T&&"subtle"===eu?s_:u.WIv,[eu,T]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.az,{paddingX:3,paddingBottom:3,children:(0,s.jsx)(o.ks,{"aria-label":w("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!S,disabled:!!V,fontSize:[2,2,1],icon:ep,iconRight:"subtle"!==eu||T?null:sw,onChange:ei,onClear:er,onKeyDown:es,padding:2,placeholder:w("panes.document-list-pane.search-input.placeholder"),radius:2,ref:L,spellCheck:!1,value:T})}),(0,s.jsx)(sc,{childItemId:t,error:V,filterIsSimpleTypeConstraint:!!v,hasMaxItems:2e3===Q.length,hasSearchQuery:!!S,isActive:n,isLazyLoading:U,isLoading:et,items:Q,layout:a,loadingVariant:eu,onEndReached:G,onRetry:ee,paneTitle:I,searchInputElement:A,showIcons:_},r)]})}),sS=(0,d.memo)(e=>{let t,n,i,o,a,d,c,p,m,h;let f=(0,l.c)(27),{contentAfter:g,index:x,initialValueTemplates:y,menuItemGroups:b,menuItems:j,setLayout:v,setSortOrder:_,title:w}=e;f[0]!==y?(t=void 0===y?[]:y,f[0]=y,f[1]=t):t=f[1];let I=t;f[2]!==b?(n=void 0===b?[]:b,f[2]=b,f[3]=n):n=f[3];let S=n;f[4]!==j?(i=void 0===j?[]:j,f[4]=j,f[5]=i):i=f[5];let E=i,{features:k}=ns(),{collapsed:T,isLast:C}=ta(),D=C&&!T?-1:0;return f[6]!==v?(a=e=>{let{layout:t}=e;v(t)},f[6]=v,f[7]=a):a=f[7],f[8]!==_?(d=e=>{_(e)},f[8]=_,f[9]=d):d=f[9],f[10]!==a||f[11]!==d?(c={setLayout:a,setSortOrder:d},f[10]=a,f[11]=d,f[12]=c):c=f[12],o=c,f[13]!==o||f[14]!==I||f[15]!==S||f[16]!==E?(p=(0,s.jsx)(tJ,{initialValueTemplateItems:I,actionHandlers:o,menuItemGroups:S,menuItems:E}),f[13]=o,f[14]=I,f[15]=S,f[16]=E,f[17]=p):p=f[17],f[18]!==k.backButton||f[19]!==x?(m=k.backButton&&x>0&&(0,s.jsx)(r.$n,{as:eF,"data-as":"a",icon:u.A60,mode:"bleed",tooltipProps:{content:"Back"}}),f[18]=k.backButton,f[19]=x,f[20]=m):m=f[20],f[21]!==g||f[22]!==p||f[23]!==m||f[24]!==D||f[25]!==w?(h=(0,s.jsx)(r.vE,{children:(0,s.jsx)(tT,{actions:p,backButton:m,contentAfter:g,tabIndex:D,title:w})}),f[21]=g,f[22]=p,f[23]=m,f[24]=D,f[25]=w,f[26]=h):h=f[26],h});function sE(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:r}=n.options.meta||{},l=(0,d.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,r=e<i?e:i,s=e<i?i:e,l=n.getRowModel().flatRows.slice(r,s+1).map(({id:e})=>e),o=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...l,...o].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,r,n]);return(0,s.jsx)(o.Sc,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:l})}sS.displayName="Memo(PaneHeader)";let sk=()=>{let e=(0,d.useContext)(c.YW);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e};function sT({children:e,table:t}){let[n,i]=(0,d.useState)(null),[r,l]=(0,d.useState)([]),o=(0,d.useCallback)((e=null)=>{n?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),i(e),l([])},[n]),a=(0,d.useCallback)(()=>o(),[o]),u=(0,d.useCallback)(e=>{if(!n)return;let i=t.getVisibleLeafColumns(),r=i.findIndex(e=>e.id===n.colId)+("left"===e?-1:1);r<0||r>=i.length||o({colId:i[r].id,rowIndex:n.rowIndex,state:"selected"})},[o,n,t]),p=(0,d.useCallback)(e=>{n&&l(t=>{let{rowIndex:i}=n,r=t=>t+("down"===e?1:-1);if(!t.length){let e=r(i);return e<0?[]:[e]}let s=r(t[t.length-1]);return s<0?t:s===i?[]:t.includes(s)?t.slice(0,-1):[...t,s]})},[n]),m=(0,d.useCallback)((e,t)=>{o({colId:e,rowIndex:t,state:"selected"})},[o]),h=(0,d.useCallback)(()=>{n&&(r.length?l([]):o("selected"===n.state?null:{...n,state:"selected"}))},[o,n,r.length]),f=(0,d.useCallback)((e,t)=>{if(!n)return;let i="ArrowDown"===t?"down":"up",r="down"===i?1:-1;if(e)p(i);else{let e=n.rowIndex+r;if(e<0)return;m(n.colId,e)}},[p,n,m]),g=(0,d.useCallback)(e=>{if(!n)return;let{key:t,shiftKey:i}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(i,t);break;case"ArrowLeft":case"ArrowRight":"selected"===n.state&&(e.preventDefault(),u("ArrowLeft"===t?"left":"right"))}},[n,h,f,u]),x=(0,d.useCallback)(e=>{n&&(document.getElementById(`cell-${n.colId}-${n.rowIndex}`)?.contains(e.target)||a())},[a,n]);(0,d.useEffect)(()=>(n&&(document.addEventListener("keydown",g),document.addEventListener("click",x)),()=>{n&&(document.removeEventListener("keydown",g),document.removeEventListener("click",x))}),[x,g,n]);let y=(0,d.useCallback)(()=>i(e=>e?{...e,state:"focused"}:null),[]),b=(0,d.useCallback)((e,t)=>n?.colId!==e?null:n.rowIndex===t?"focused"===n.state?"focused":"selectedAnchor":r.includes(t)?"selectedRange":null,[n,r]),j=(0,d.useCallback)(()=>{n&&o({colId:n.colId,rowIndex:n.rowIndex+1,state:"selected"})},[o,n]),v=(0,d.useMemo)(()=>({focusAnchorCell:y,resetFocusSelection:a,setSelectedAnchorCell:m,getStateByCellId:b,submitFocusedCell:j}),[y,a,m,b,j]);return(0,s.jsx)(c.YW.Provider,{value:v,children:e})}let sC=I.I4.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,sD=(0,I.I4)(sC)`
  position: sticky;
  z-index: 2;
`;function sz(e){let{getValue:t,column:n,row:i,fieldType:r}=e,l=`cell-${n.id}-${i.index}`,[a,c]=(0,d.useState)(t()),[u,p]=(0,d.useState)(!1),m=(0,d.useRef)(null),{focusAnchorCell:h,resetFocusSelection:f,setSelectedAnchorCell:g,getStateByCellId:x,submitFocusedCell:y}=sk(),b=x(n.id,i.index),j=(0,d.useCallback)(()=>{g(n.id,i.index),h()},[n.id,h,i.index,g]),{patchDocument:v}=e.table.options.meta||{},_=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},w=(0,d.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===b&&_(),"focused"===b&&y())},[b,y]),I=(0,d.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(c(t),v?.(i.id,n.id,t))},[n.id,v,i.id]),S=(0,d.useCallback)(()=>{navigator.clipboard.writeText(a.toString())},[a]);(0,d.useEffect)(()=>(("selectedAnchor"===b||"focused"===b)&&document.addEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.addEventListener("paste",I),"selectedAnchor"===b&&document.addEventListener("copy",S),()=>{("selectedAnchor"===b||"focused"===b)&&document.removeEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.removeEventListener("paste",I),"selectedAnchor"===b&&document.removeEventListener("copy",S)}),[l,b,n.id,x,S,w,I,i.index]);let E=()=>"focused"===b?"2px solid blue":"selectedRange"===b?"1px solid green":"selectedAnchor"===b?"1px solid blue":"1px solid transparent",k={onFocus:j,onBlur:()=>{u&&(v?.(i.id,n.id,a),p(!1)),f()},onMouseDown:e=>{2===e.detail?_():(e.preventDefault(),g(n.id,i.index))},"aria-selected":!!b,"data-testid":l,id:l,ref:e=>{m.current=e}};return"boolean"===r.name?(0,s.jsxs)(o.l6,{...k,onChange:()=>null,radius:0,style:{boxShadow:"none",border:E(),padding:0},value:JSON.stringify(a),children:[(0,s.jsx)("option",{value:"True",children:"True"}),(0,s.jsx)("option",{value:"False",children:"False"})]}):(0,s.jsx)(o.ks,{...k,size:0,radius:0,border:!1,style:{border:E(),padding:"22px 16px"},value:"string"==typeof a||"number"==typeof a?a:JSON.stringify(a),onChange:e=>{p(!0),c(e.target.value)}})}function sR(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(t?sD:sC,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:(0,eA.Kv)(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let sA=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,r=(0,d.useMemo)(()=>(0,g.TU6)(t,i,n.original._id,"Document title"),[t,n.original._id,i]),{draft:l,published:a,isLoading:c}=(0,E.J)(r,{draft:null,isLoading:!0,published:null});if(c)return(0,s.jsx)(o.EY,{size:1,muted:!0,children:"Loading..."});let u=l?.title??a?.title??"Untitled";return(0,s.jsxs)(o.so,{align:"center",gap:3,children:[(0,s.jsx)(g.ZDR,{draft:l,published:a,versions:void 0}),(0,s.jsx)(o.EY,{size:1,children:u})]})},sP=(0,eP.FB)(),sM=["string","number","boolean"],s$=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:r}=n;return sM.includes(i.name)?[...e,sP.accessor(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,s.jsx)(sz,{...e,fieldType:i})})]:"object"===i.name&&(0,x.$d)(i)&&!t?[...e,sP.group({header:r,columns:s$(i,n.name)})]:e},[]),sL=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?sL(e.columns):[]);function sO({table:e}){let{t}=(0,g.Bdt)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,d.useCallback)(()=>{e.resetColumnVisibility()},[e]),l=e=>()=>{e.toggleVisibility()},a=t=>{let i=t.getIsVisible(),r=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return n&&!i||r&&i};return(0,s.jsx)(r.IU,{button:(0,s.jsx)(r.$n,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,s.jsx)(o.W1,{padding:3,paddingTop:4,style:{width:240},children:(0,s.jsxs)(o.so,{direction:"column",height:"fill",gap:3,children:[(0,s.jsx)(o.EY,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,s.jsx)(o.so,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,s.jsx)(o.BJ,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>(0,s.jsxs)(o.so,{marginY:2,align:"center",children:[(0,s.jsx)(o.Sc,{readOnly:a(e),checked:e.getIsVisible(),onChange:l(e),id:`col-visibility-${e.id}`,style:{display:"block"}}),(0,s.jsx)(o.az,{flex:1,paddingLeft:3,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)("label",{htmlFor:`col-visibility-${e.id}`,children:e.columnDef.header?.toString()})})})]},e.id))})}),(0,s.jsx)(r.$n,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let sB=(0,I.I4)(o.so)`
  flex-shrink: 0;
`;function sH(){let e,t,n;let i=(0,l.c)(5),{state:r}=(0,g.Z_W)(),{filtersVisible:o}=r;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.w1_,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,s.jsx)(g.CuW,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsxs)(sB,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let sN=I.I4.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,sY=(0,I.I4)(sN)`
  position: sticky;
  z-index: 2;
`,sV=I.I4.div`
  visibility: hidden;

  ${sN}:hover & {
    visibility: visible;
  }
`;function sU(e){let{header:t,headerGroup:n}=e,{t:i}=(0,g.Bdt)(),l=t.column.getIsPinned(),a=n.depth>0&&!t.column.parent?null:(0,s.jsx)(o.EY,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,eA.Kv)(t.column.columnDef.header,t.getContext())}),d=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),c=l&&t.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(l?sY:sN,{style:{left:t.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,s.jsxs)(o.so,{justify:"space-between",marginX:2,align:"baseline",children:[(0,s.jsx)(r.m_,{delay:500,content:a,children:(0,s.jsx)(o.az,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:a})}),d&&(0,s.jsx)(sV,{children:(0,s.jsx)(r.IU,{button:(0,s.jsx)(r.$n,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:u.riS,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,s.jsx)(o.W1,{children:(0,s.jsx)(r.Dr,{text:i("sheet-list.hide-field"),icon:u.USm,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function sF({table:e}){return(0,s.jsx)(r.vE,{children:(0,s.jsxs)(o.so,{gap:3,align:"center",children:[(0,s.jsx)(r.$n,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:u.Zxx,tooltipProps:{content:"Go to first page"}}),(0,s.jsx)(r.$n,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:u.YJP,tooltipProps:{content:"Go to previous page"}}),(0,s.jsxs)(o.EY,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,s.jsx)(r.$n,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:u.vKP,tooltipProps:{content:"Go to next page"}}),(0,s.jsx)(r.$n,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:u.yBO,tooltipProps:{content:"Go to last page"}}),(0,s.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})})}function sW(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,r={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:r}}}default:return e}}let sK={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",tag:"document-sheet-list-store"},sQ=(0,I.I4)(o.so)`
  height: 100%;
`,sq=I.I4.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,sJ=I.I4.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function sG({documentSchemaType:e}){let{dispatch:t,state:n}=(0,g.Z_W)(),{columns:i,initialColumnsVisibility:r}=function(e){let t=(0,g.yKO)(),n=(0,d.useMemo)(()=>e?[sP.display({id:"selected",enableHiding:!1,header:e=>(0,s.jsxs)(o.az,{children:[(0,s.jsx)(o.Sc,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:sE}),sP.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,s.jsx)(sA,{...n,documentPreviewStore:t,schemaType:e})}),...s$(e)]:[],[t,e]),[i]=(0,d.useMemo)(()=>sL(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:a}=function({typeName:e}){let{state:t}=(0,g.Z_W)(),n=(0,d.useMemo)(()=>{let e=new Map;return t.result.hits.forEach(t=>e.set((0,g.IMx)(t.hit._id),t.hit)),e},[t.result.hits]),{data:i,isLoading:r}=function(e){let t,n,i,r,s,o,a,c,u,p;let m=(0,l.c)(25),{filter:h,params:f,apiVersion:x}=e,y=`*[${h}][0...2000]`,b=x||g.miu.apiVersion;m[0]!==b?(t={...g.miu,apiVersion:b},m[0]=b,m[1]=t):t=m[1];let j=(0,g.tH7)(t);m[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},m[2]=n):n=m[2];let[v,_]=(0,d.useReducer)(sW,n),[w,I]=(0,d.useState)(null!==j),[S,E]=(0,d.useState)(null);m[3]!==y||m[4]!==j||m[5]!==f?(i=async()=>{if(!j){I(!1);return}try{let e=await j.fetch(y,f);_({type:"DOCUMENTS_SET",documents:e}),I(!1)}catch(e){E(e)}},m[3]=y,m[4]=j,m[5]=f,m[6]=i):i=m[6];let k=i;m[7]!==k?(r=async e=>{if("welcome"===e.type&&(I(!0),await k(),I(!1)),"reconnect"===e.type&&I(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&_({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_UPDATED",payload:t})}}},m[7]=k,m[8]=r):r=m[8];let T=r;e:{let e;if(!j){let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,P.of)(),m[9]=e):e=m[9],s=e;break e}if(m[10]!==y||m[11]!==j.observable||m[12]!==f){let t;m[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(E(e),(0,P.of)(e)),m[14]=t):t=m[14],e=j.observable.listen(y,f,sK).pipe((0,O.W)(t)),m[10]=y,m[11]=j.observable,m[12]=f,m[13]=e}else e=m[13];s=e}let C=s;return m[15]!==T||m[16]!==C?(o=()=>{let e=C.subscribe(T);return()=>{e?.unsubscribe()}},a=[T,C],m[15]=T,m[16]=C,m[17]=o,m[18]=a):(o=m[17],a=m[18]),(0,d.useEffect)(o,a),m[19]!==v.documents?(u=Object.values(Object.keys(v.documents).reduce((e,t)=>{let n=v.documents[t],i=n._id===(0,g.T4)(n._id),r=i?n._id:(0,g.T4)(n._id);return e[r]&&!i||(e[r]=n),e},{})),m[19]=v.documents,m[20]=u):u=m[20],c=u,m[21]!==c||m[22]!==S||m[23]!==w?(p={data:c,isLoading:w,error:S},m[21]=c,m[22]=S,m[23]=w,m[24]=p):p=m[24],p}({filter:`_type == "${e}"`});return{data:(0,d.useMemo)(()=>i.filter(e=>n.has((0,g.IMx)(e._id))),[i,n]),isLoading:r}}({typeName:e.name}),[c,u]=(0,d.useState)(null),p=n.result.hits.length,m=(0,eA.N4)({data:a,columns:i,getCoreRowModel:(0,eP.HT)(),getFilteredRowModel:(0,eP.hM)(),getPaginationRowModel:(0,eP.kW)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:r},getRowId:e=>e._id,meta:{selectedAnchor:c,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:h}=m.getRowModel();(0,d.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,d.useCallback)(e=>(0,s.jsx)(o.az,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,d.createElement)(sR,{...t,key:e.original._id+t.id}))},e.original._id+e.id),[]),x=`Total: ${p} rows, showing ${h.length} rows`;return(0,s.jsxs)(sQ,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,s.jsxs)(o.so,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,s.jsxs)(o.so,{direction:"row",align:"center",children:[(0,s.jsx)(sH,{}),(0,s.jsx)(o.EY,{size:0,muted:!0,children:x})]}),(0,s.jsx)(sO,{table:m})]}),(0,s.jsx)(sq,{children:(0,s.jsx)(sT,{table:m,children:(0,s.jsxs)(sJ,{children:[(0,s.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,s.jsx)(o.az,{as:"tr",children:e.headers.map(t=>(0,s.jsx)(sU,{header:t,headerGroup:e},t.id))},e.id))}),(0,s.jsx)("tbody",{children:m.getRowModel().rows.map(f)})]})})}),(0,s.jsx)(o.so,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,s.jsx)(sF,{table:m})})]})}function sZ(e){let t=(0,g.pDY)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,x.JR)(i))throw Error(`Schema type "${n}" not found or not a document schema`);return(0,s.jsx)(g.YLU,{children:(0,s.jsx)(sG,{...e,documentSchemaType:i})})}let sX=e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:eI(n?.by,e?.params?.by||g.Mlv)}:{...e,selected:!1})};function s0(e){let[t,n]=(0,d.useState)(e);return eS(t,e)?t:(n(e),e)}let s1=(0,d.memo)(function(e){let t,n,i,r,o,a,c,u,p,m,h;let f=(0,l.c)(36),{index:x,isSelected:y,pane:b,paneKey:j}=e,{name:v}=(0,g.For)(),{defaultLayout:_,initialValueTemplates:w,menuItemGroups:I,menuItems:S,options:E}=b,k=void 0===w?g.Mlv:w,{defaultOrdering:T,filter:C}=E,D=void 0===T?g.Mlv:T,z=s0(E.params||ss),R=b.source;e:{let e;f[0]!==C||f[1]!==z?(e=sp(C,z),f[0]=C,f[1]=z,f[2]=e):e=f[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let A=t,[P,M]=ny("layout",A??b.id,void 0===_?"default":_),{title:$}=(0,g.FP1)(b);f[3]!==D?(i=D?.length>0?{by:D}:sr,f[3]=D,f[4]=i):i=f[4],n=i;let[L,O]=ny("sort-order",A??b.id,n);f[5]!==P||f[6]!==S||f[7]!==L?(o=sX({menuItems:S,sortOrderRaw:L,layout:P}),f[5]=P,f[6]=S,f[7]=L,f[8]=o):o=f[8],r=o;let B="sheetList"===P;f[9]!==B||f[10]!==P||f[11]!==e||f[12]!==L?(a=B?(0,d.createElement)(sZ,{...e,key:e.pane.id}):(0,s.jsx)(sI,{...e,sortOrder:L,layout:P}),f[9]=B,f[10]=P,f[11]=e,f[12]=L,f[13]=a):a=f[13];let H=a,N=R||v;return f[14]!==B?(c=B?{}:{currentMaxWidth:350,maxWidth:640},f[14]=B,f[15]=c):c=f[15],f[16]!==b.source?(u=nt,f[16]=b.source,f[17]=u):u=f[17],f[18]!==x||f[19]!==k||f[20]!==I||f[21]!==r||f[22]!==M||f[23]!==O||f[24]!==$?(p=(0,s.jsx)(sS,{index:x,initialValueTemplates:k,menuItemGroups:I,menuItems:r,setLayout:M,setSortOrder:O,title:$}),f[18]=x,f[19]=k,f[20]=I,f[21]=r,f[22]=M,f[23]=O,f[24]=$,f[25]=p):p=f[25],f[26]!==y||f[27]!==j||f[28]!==H||f[29]!==c||f[30]!==u||f[31]!==p?(m=(0,s.jsxs)(tl,{"data-ui":"DocumentListPane",id:j,minWidth:320,...c,selected:y,children:[u,p,H]}),f[26]=y,f[27]=j,f[28]=H,f[29]=c,f[30]=u,f[31]=p,f[32]=m):m=f[32],f[33]!==m||f[34]!==N?(h=(0,s.jsx)(g.NeO,{name:N,children:m}),f[33]=m,f[34]=N,f[35]=h):h=f[35],h});s1.displayName="Memo(PaneContainer)";class s2 extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";let r=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${r} (${i})`:r)}withHelpUrl(e){return this.helpId=e,this}}let s3=function(e){return e.ID_REQUIRED="structure-node-id-required",e.TITLE_REQUIRED="structure-title-required",e.FILTER_REQUIRED="structure-filter-required",e.INVALID_LIST_ITEM="structure-invalid-list-item",e.COMPONENT_REQUIRED="structure-view-component-required",e.DOCUMENT_ID_REQUIRED="structure-document-id-required",e.DOCUMENT_TYPE_REQUIRED="structure-document-type-required",e.SCHEMA_TYPE_REQUIRED="structure-schema-type-required",e.SCHEMA_TYPE_NOT_FOUND="structure-schema-type-not-found",e.LIST_ITEMS_MUST_BE_ARRAY="structure-list-items-must-be-array",e.QUERY_PROVIDED_FOR_FILTER="structure-query-provided-for-filter",e.ACTION_OR_INTENT_REQUIRED="structure-action-or-intent-required",e.LIST_ITEM_IDS_MUST_BE_UNIQUE="structure-list-item-ids-must-be-unique",e.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE="structure-action-and-intent-mutually-exclusive",e.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER="structure-api-version-required-for-custom-filter",e}({}),s4={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:eM}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},s5=[s4,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:eM}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function s6(e,t,n){return e instanceof s8?e.serialize({path:n,index:t}):e}class s8{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new s2("`title` is required for menu item",e.path,e.index,t).withHelpUrl(s3.TITLE_REQUIRED)}if(!n&&!i)throw new s2(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(s3.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new s2("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(s3.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new s8(this._context);return t.spec={...this.spec,...e||{}},t}}function s7(e,{by:t,title:n,i18n:i},r){let s=new s8(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(u.ycB).action("setSortOrder").params({by:t,extendedProjection:r});return i&&(s=s.i18n(i)),s}function s9(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(s5):s5).map(t=>s7(e,t,sh(i,t.by))):[]}function le(e,t,n){return e instanceof lt?e.serialize({path:n,index:t}):e}class lt{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new lt(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new lt(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new lt(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){let{_id:t,_title:n,_i18n:i}=this;if(!t)throw new s2("`id` is required for a menu item group",e.path,e.index,n).withHelpUrl(s3.ID_REQUIRED);if(!n)throw new s2("`title` is required for a menu item group",e.path,t).withHelpUrl(s3.TITLE_REQUIRED);return{id:t,title:n,i18n:i}}}let ln=/([^A-Za-z0-9-_.])/;function li(e,t,n){if("string"!=typeof e)throw new s2(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(ln)||[];if(i)throw new s2(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new s2("Structure node id cannot start with __edit__",t,n);return e}function lr(e,t){if(t)return t;let n=p(e);return ln.test(n)?p(m(e)):n}class ls{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lr(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:r,component:s}=this.spec;if(!t)throw new s2("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(s3.ID_REQUIRED);if(!s)throw new s2("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(s3.ID_REQUIRED);return{id:li(t,e.path,e.index),title:n,type:"component",child:i,component:s,canHandleIntent:this.spec.canHandleIntent,options:r||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>s6(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>le(t,n,e.path))}}clone(e){let t=new ls;return t.spec={...this.spec,...e||{}},t}}async function ll(e,t){let n=(0,g.IMx)(t),i=(0,g.T4)(t);return(await e(g.miu).fetch("*[_id in [$documentId, $draftId]]._type",{documentId:n,draftId:i},{tag:"structure.resolve-type"}))[0]}class lo{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new s2("`id` is required for view item",e.path,e.index).withHelpUrl(s3.ID_REQUIRED);if(!n)throw new s2("`title` is required for view item",e.path,e.index).withHelpUrl(s3.TITLE_REQUIRED);return{id:li(t,e.path,e.index),title:n,icon:i}}}function la(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}let ld=e=>(0,g.u4i)(e)&&"component"===e.type;class lc extends lo{constructor(e){let t=ld(e)?{...e}:{options:{}};super(),this.spec=t;let n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new s2("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(s3.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new lc;return t.spec={...this.spec,...e||{}},t}}class lu extends lo{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new lu;return t.spec={...this.spec,...e||{}},t}}let lp=e=>new lu(e),lm=e=>new lc(e);var lh=Object.freeze({__proto__:null,ComponentViewBuilder:lc,FormViewBuilder:lu,GenericViewBuilder:lo,component:lm,form:lp,maybeSerializeView:la});let lf=({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:r})=>{let s=i.type,l=r.slice(0,r.length-1),o=r[r.length-1];if(s||(s=await ll(t,n)),!s)throw new s2("Failed to resolve document, and no type provided in parameters.",l,o);return e({documentId:n,schemaType:s})};class lg{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lr(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options||{},id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options||{},type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options||{},template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){let i=e[t||e.length-1],r=this.spec.id||i&&`${i}`||"",s={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new s2("`id` is required for document nodes",e,t,n).withHelpUrl(s3.ID_REQUIRED);if(!s||!s.id)throw new s2("document id (`id`) is required for document nodes",e,r,n).withHelpUrl(s3.DOCUMENT_ID_REQUIRED);if(!s||!s.type)throw new s2("document type (`schemaType`) is required for document nodes",e,r,n);let l=(this.spec.views&&this.spec.views.length>0?this.spec.views:[lp()]).map((t,n)=>la(t,n,e)),o=l.map(e=>e.id),a=y(o.filter((e,t)=>o.includes(e,t+1)));if(a.length>0)throw new s2(`document node has views with duplicate IDs: ${a.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||lf(this._context),id:li(r,e,t),type:"document",options:function(e){let t={id:e.id||"",type:e.type||"*"};return e.template&&(t.template=e.template),e.templateParameters&&(t.templateParameters=e.templateParameters),t}(s),views:l}}clone(e={}){let t=new lg(this._context),n={...this.spec.options||{},...e.options||{}};return t.spec={...this.spec,...e,options:n},t}}function lx(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new lg(e);if(!t)return n;let{id:i,type:r,template:s,templateParameters:l}=t.options;return n=n.id(t.id).documentId(i),r&&(n=n.schemaType(r)),s&&(n=n.initialValueTemplate(s,l)),t.child&&(n=n.child(t.child)),n}function ly({resolveDocumentNode:e,templates:t},n,i){let r=t.find(e=>e.id===n);if(!r)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:r.schemaType}).initialValueTemplate(n,i)}class lb{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){let{spec:i,_context:r}=this,{templates:s}=r;if("string"!=typeof i.id||!i.id)throw new s2("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(s3.ID_REQUIRED);if(!i.templateId)throw new s2("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(s3.ID_REQUIRED);let l=s.find(e=>e.id===i.templateId);if(!l)throw new s2("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(s3.ID_REQUIRED);return{id:i.id,templateId:i.id,schemaType:l.schemaType,type:"initialValueTemplateItem",description:i.description||l.description,title:i.title||l.title,subtitle:i.subtitle,icon:i.icon||l.icon,initialDocumentId:i.initialDocumentId,parameters:i.parameters}}clone(e={}){let t=new lb(this._context);return t.spec={...this.spec,...e},t}}function lj(e){let{schema:t,getStructureBuilder:n,templates:i}=e,r=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>r.indexOf(e.schemaType)-r.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function lv(e,t,n){return e instanceof lb?e.serialize({path:n,index:t}):e}function l_(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let r=i.find(e=>e.id===t.templateId),s=t.title||r?.title||"Create",l={};r&&r.schemaType&&(l.type=r.schemaType),t.templateId&&(l.template=t.templateId);let o=t.parameters?[l,t.parameters]:l,a=r&&n.get(r.schemaType),d=t.i18n||r?.i18n,c=new s8(e).title(s).icon(r&&r.icon||a?.icon||u.REV).intent({type:"create",params:o});return d&&(c=c.i18n(d)),c.serialize()})}let lw=Symbol("Document type list canHandleIntent"),lI=(e,t,{pane:n})=>{let i="create"===e,r=n.options?.filter||"",s=n.options?.params||{},l=n.schemaTypeName?[n.schemaTypeName]:lR(r,s),o=n.initialValueTemplates||[];return i&&t.template?o.some(e=>e.templateId===t.template):"edit"===e&&t.id&&l.includes(t.type)||i&&l.includes(t.type)};lI.identity=lw;let lS=["default","card","media","detail","block"];function lE(){}let lk=(e,t,{pane:n,index:i})=>i<=1&&lI(e,t,{pane:n});class lT{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lr(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!lS.includes(i))throw new s2(`\`layout\` must be one of ${lS.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let r=(this.spec.initialValueTemplates||[]).map((e,t)=>lv(e,t,n));return{id:li(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||lE,canHandleIntent:this.spec.canHandleIntent||lk,displayOptions:this.spec.displayOptions,initialValueTemplates:r,menuItems:(this.spec.menuItems||[]).map((e,t)=>s6(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>le(e,t,n))}}}let lC=(e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new s2(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(s3.QUERY_PROVIDED_FOR_FILTER);return n},lD=e=>(t,n)=>{let i=n.parent,r=n.params?.template?e.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(r?r.schemaType:i.schemaTypeName||ll(e.getClient,t)).then(n=>n?e.resolveDocumentNode({schemaType:n,documentId:t}):new lg(e).id("editor").documentId(t).schemaType(""))};class lz extends lT{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options||{},filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new s2("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(s3.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new s2("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(s3.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,j.i)(s3.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||lD(this._context),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||g.miu.apiVersion,filter:lC(this.spec,e)}}}clone(e){let t=new lz(this._context);return t.spec={...this.spec,...e||{}},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:r}=t,{filter:s,params:l}=r||{filter:"",params:{}},o=i?[i]:Array.from(new Set(lR(s,l)));if(0!==o.length)return o.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:u.REV}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},r=lR(n,i);return 1===r.length?r[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function lR(e,t={}){let n=function(e,t={}){let n;let i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,r=[];for(;null!==(n=i.exec(e));)r.push(n[1]||n[2]);return r.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let lA=e=>e instanceof lL?"ListBuilder":!function(e){return(0,g.u4i)(e)&&"function"==typeof e.then}(e)?Array.isArray(e)?"array":typeof e:"Promise",lP=e=>"listItem"===e.type,lM=(e,t,n)=>(n.pane.items||[]).filter(lN).some(e=>e.schemaType.name===t.type&&e._id===t.id)||lk(e,t,n),l$=(e,t)=>{let n=(t.parent.items.filter(lP).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class lL extends lT{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new s2("`id` is required for lists",e.path,e.index).withHelpUrl(s3.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new s2("`items` must be an array of items",e.path,e.index).withHelpUrl(s3.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),r=n.map((e,t)=>(function(e,t,n){if(e instanceof lO)return e.serialize({path:n,index:t});if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){let i=e&&e.type||lA(e);throw new s2(`List items must be of type "listItem", got "${i}"${"array"===i?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(s3.INVALID_LIST_ITEM)}return e})(e,t,i)),s=r.filter((e,t)=>v(r,{id:e.id},t+1));if(s.length>0){let t=s.map(e=>e.id).slice(0,5),n=s.length>5?`${t.join(", ")}...`:t.join(", ");throw new s2(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(s3.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||lM,child:this.spec.child||l$,items:r}}clone(e){let t=new lL(this._context);return t.spec={...this.spec,...e||{}},t}}class lO{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lr(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new s2("`id` is required for list items",e.path,e.index).withHelpUrl(s3.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new s2("`title` is required for list items",e.path,t).withHelpUrl(s3.TITLE_REQUIRED);let r=this.spec.schemaType;if("string"==typeof r){let n=this._context.schema.get(r);if(!n)throw new s2(`Could not find type "${r}" in schema`,e.path,t).withHelpUrl(s3.SCHEMA_TYPE_NOT_FOUND);r=n}let s={path:e.path.concat(t),hint:"child"},l=i instanceof ls||i instanceof lz||i instanceof lg||i instanceof lL?i.serialize(s):i;if("function"==typeof l){let e=l;l=(t,n)=>e(t,{...n,serializeOptions:s})}return{...this.spec,id:li(t,e.path,e.index),schemaType:r,child:l,title:n,type:"listItem"}}clone(e){let t=new lO(this._context);return t.spec={...this.spec,...e||{}},t}}let lB=(e,t)=>n=>{let i=t.schemaType&&("string"==typeof t.schemaType?t.schemaType:t.schemaType.name);return i?e.resolveDocumentNode({schemaType:i,documentId:n}):new lg(e).id("documentEditor").documentId(n)};class lH extends lO{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t=super.serialize({...e,titleIsOptional:!0});if(!t.schemaType)throw new s2("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(s3.SCHEMA_TYPE_REQUIRED);let n=t.child||lB(this._context,t);return{...t,child:n,schemaType:t.schemaType,_id:t.id}}clone(e){let t=new lH(this._context);return t.spec={...this.spec,...e||{}},t}}function lN(e){return(0,g.u4i)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class lY extends lz{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new lY(this._context);return n.spec={...this.spec,...t.getSpec(),...e||{}},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new lY(this._context),i=this.spec.canHandleIntent,r=i&&i.identity===lw?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e||{},...r},n}}let lV=["sanity.imageAsset","sanity.fileAsset"];function lU(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!lV.includes(e))})(e).map(t=>lF(e,t))}function lF(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let r=i.title||_(t);return new lO(e).id(t).title(r).schemaType(i).child((n,i)=>{let r=i.parent,s="list"===r.type?r.items.find(e=>e.id===n):null,l=lW(e,t);return s&&s.title&&(l=l.title(s.title)),l})}function lW(e,t){let{schema:n,resolveDocumentNode:i}=e,r="string"==typeof t?t:t.schemaType,s="string"==typeof r?r:r.name,l="string"==typeof t?{}:t,o=n.get(s);if(!o)throw Error(`Schema type with name "${s}" not found`);let a=o.title||_(s);return new lY(e).id(l.id||s).title(l.title||a).filter("_type == $type").params({type:s}).schemaType(o).defaultOrdering(s4.by).menuItemGroups(l.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:eM}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:eM}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:eM}}}]).child(l.child||(e=>i({schemaType:s,documentId:e}))).canHandleIntent(l.canHandleIntent||lI).menuItems(l.menuItems||[...s9(e,o),new s8(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:eM}}).title("Compact view").icon(u.dSb).action("setLayout").params({layout:"default"}),new s8(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:eM}}).title("Detailed view").icon(u.m1D).action("setLayout").params({layout:"detail"})])}function lK({defaultDocumentNode:e,source:t}){let n=(0,g.VMk)(t),i={...t,getStructureBuilder:()=>r,resolveDocumentNode:t=>{let s=e?.(r,{...t,...n})||new lg(i);return s.getId()||(s=s.id("documentEditor")),t.documentId&&(s=s.documentId((0,g.IMx)(t.documentId))),s.schemaType(t.schemaType)}},r={defaults:()=>(function(e){let t=lU(e);return new lL(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:eM}}).items(t).showIcons(t.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))})(i),documentTypeList:(...e)=>lW(i,...e),documentTypeListItem:(...e)=>lF(i,...e),documentTypeListItems:(...e)=>lU(i,...e),document:(...e)=>new lg(i,...e),documentWithInitialValueTemplate:(...e)=>ly(i,...e),defaultDocument:i.resolveDocumentNode,list:(...e)=>new lL(i,...e),listItem:(...e)=>new lO(i,...e),menuItem:(...e)=>new s8(i,...e),menuItemGroup:(...e)=>new lt(i,...e),menuItemsFromInitialValueTemplateItems:(...e)=>l_(i,...e),documentList:(...e)=>new lz(i,...e),documentListItem:(...e)=>new lH(i,...e),orderingMenuItem:(...e)=>s7(i,...e),orderingMenuItemsForType:(...e)=>s9(i,...e),editor:(...e)=>lx(i,...e),defaultInitialValueTemplateItems:(...e)=>lj(i,...e),initialValueTemplateItem:(e,t)=>new lb(i,{id:e,parameters:t,templateId:e}),component:e=>(0,f.isValidElementType)(e)?new ls().component(e):new ls(e),divider:()=>({id:h("__divider__"),type:"divider"}),view:lh,context:i};return r}let lQ=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};lQ.displayName="LiveEditBadge";let lq={activePanes:[]};function lJ(e){lq.activePanes=e}function lG(e,t,n,i){let r=n?.panes||[],s=lq.activePanes||[],l=t.id||(0,w.A)(),o="create"===e&&t.template,a="create"===e&&t.version;for(let n=s.length-1;n>=0;n--){let d=s[n];if("object"==typeof d&&(d.canHandleIntent?.(e,t,{pane:d,index:n})||"documentList"===d.type&&d.schemaTypeName===t.type&&"_type == $type"===d.options.filter))return o&&(nn.template=t.template),a&&(nn.version=t.version),{panes:r.slice(0,n).concat([[{id:l,params:nn,payload:i}]])}}return{intent:e,params:t,payload:i}}let lZ=(0,I.I4)(g.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,lX=(0,I.I4)(o.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function l0(e){let t,n,i,r,a,c,u,p,m,h,f,x,y;let b=(0,l.c)(39),{showChanges:j}=e,{documentId:v,schemaType:_,timelineError:w,timelineStore:I,value:S}=t7(),{selectedReleaseId:E}=(0,g.QO2)(),[k,T]=(0,d.useState)(null),C=(0,g.SfM)(I,l5),D=(0,g.SfM)(I,l4),z=(0,g.SfM)(I,l3),R=(0,g.SfM)(I,l2),A=(0,g.SfM)(I,l1),P="loading"===R,M=!z,{t:$}=(0,g.Bdt)(eM);if(b[0]!==D||b[1]!==v||b[2]!==M||b[3]!==_||b[4]!==S?(n={documentId:v,schemaType:_,FieldWrapper:g.uD1,rootDiff:D,isComparingCurrent:M,value:S,showFromValue:!0},b[0]=D,b[1]=v,b[2]=M,b[3]=_,b[4]=S,b[5]=n):n=b[5],t=n,E){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:(0,s.jsx)(ro,{versionError:!0})})}),b[6]=e):e=b[6],e}return b[7]!==$?(i=$("changes.from.label"),b[7]=$,b[8]=i):i=b[8],b[9]!==i?(r=(0,s.jsx)(o.EY,{size:1,muted:!0,children:i}),b[9]=i,b[10]=r):r=b[10],b[11]!==A?(a=(0,s.jsx)(rc,{mode:"since",chunk:A,placement:"bottom-start"}),b[11]=A,b[12]=a):a=b[12],b[13]!==$?(c=$("changes.to.label"),b[13]=$,b[14]=c):c=b[14],b[15]!==c?(u=(0,s.jsx)(o.EY,{size:1,muted:!0,children:c}),b[15]=c,b[16]=u):u=b[16],b[17]!==C?(p=(0,s.jsx)(rc,{chunk:C,mode:"rev",placement:"bottom-end"}),b[17]=C,b[18]=p):p=b[18],b[19]!==r||b[20]!==a||b[21]!==u||b[22]!==p?(m=(0,s.jsx)(o.az,{padding:3,children:(0,s.jsxs)(lX,{paddingX:2,paddingBottom:2,children:[r,a,u,p]})}),b[19]=r,b[20]=a,b[21]=u,b[22]=p,b[23]=m):m=b[23],b[24]!==D||b[25]!==t||b[26]!==P||b[27]!==_||b[28]!==j||b[29]!==w?(h=j&&(0,s.jsx)(l6,{diff:D,documentContext:t,error:w,loading:P,schemaType:_}),b[24]=D,b[25]=t,b[26]=P,b[27]=_,b[28]=j,b[29]=w,b[30]=h):h=b[30],b[31]!==h?(f=(0,s.jsx)(lZ,{"data-ui":"Scroller",ref:T,children:(0,s.jsx)(o.az,{flex:1,paddingX:3,height:"fill",children:h})}),b[31]=h,b[32]=f):f=b[32],b[33]!==k||b[34]!==f?(x=(0,s.jsx)(o.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(o.EZ,{element:k,children:f})}),b[33]=k,b[34]=f,b[35]=x):x=b[35],b[36]!==x||b[37]!==m?(y=(0,s.jsxs)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,x]}),b[36]=x,b[37]=m,b[38]=y):y=b[38],y}function l1(e){return e.sinceTime}function l2(e){return e.selectionState}function l3(e){return e.onOlderRevision}function l4(e){return e.diff}function l5(e){return e.revTime}function l6(e){let t,n;let i=(0,l.c)(9),{error:r,diff:o,documentContext:a,loading:d,schemaType:u}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.J7,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.gd4,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.J7,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==u?(t=(0,s.jsx)(g.Vki,{diff:o,schemaType:u}),i[3]=o,i[4]=u,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,s.jsx)(c.HU.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let l8=e=>!(0,g.zOx)(e)&&!(0,g.GDb)(e)&&!(0,g.ayN)(e)&&!(0,g.Bkf)(e)&&!(0,g.azN)(e);function l7(e){let t,n,i,a,d,c,u,p;let m=(0,l.c)(27),{event:h,isSelected:f,onSelect:x,optionsMenu:y}=e,{t:b}=(0,g.Bdt)("studio");m[0]!==h?(t=l8(h),m[0]=h,m[1]=t):t=m[1];let j=t;m[2]!==h||m[3]!==j||m[4]!==x?(n=e=>{e.preventDefault(),e.stopPropagation(),j&&x(h)},m[2]=h,m[3]=j,m[4]=x,m[5]=n):n=m[5];let v=n;m[6]!==j||m[7]!==b?(i=j?"":b("changes.not-selectable"),m[6]=j,m[7]=b,m[8]=i):i=m[8];let _=j?"button":"div",w=j?"pointer":"default";return m[9]!==w?(a={cursor:w},m[9]=w,m[10]=a):a=m[10],m[11]!==h?(d=(0,s.jsx)(g.JhA,{event:h,showChangesBy:"tooltip"}),m[11]=h,m[12]=d):d=m[12],m[13]!==h.timestamp||m[14]!==v||m[15]!==f||m[16]!==_||m[17]!==a||m[18]!==d?(c=(0,s.jsx)(o.Zp,{as:_,onClick:v,padding:2,pressed:f,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":h.timestamp,style:a,children:d}),m[13]=h.timestamp,m[14]=v,m[15]=f,m[16]=_,m[17]=a,m[18]=d,m[19]=c):c=m[19],m[20]!==y||m[21]!==c?(u=(0,s.jsxs)(o.so,{gap:1,children:[c,y]}),m[20]=y,m[21]=c,m[22]=u):u=m[22],m[23]!==j||m[24]!==i||m[25]!==u?(p=(0,s.jsx)(r.m_,{content:i,disabled:j,children:u}),m[23]=j,m[24]=i,m[25]=u,m[26]=p):p=m[26],p}function l9(e){let t,n,i,a,d,c,u,p,m,h,f;let x=(0,l.c)(37),{event:y}=e,{t:b}=(0,g.Bdt)(eM),j=(0,o.WP)(),{params:v,setParams:_}=(0,T.usePaneRouter)(),w=(0,g._T7)();x[0]!==y.id||x[1]!==y.versionId||x[2]!==y.versionRevisionId||x[3]!==v||x[4]!==_?(t=()=>{_({...v,rev:y.versionRevisionId||"@lastPublished",since:void 0,historyEvent:y.id,historyVersion:(0,g._Sr)(y.versionId)})},x[0]=y.id,x[1]=y.versionId,x[2]=y.versionRevisionId,x[3]=v,x[4]=_,x[5]=t):t=x[5];let I=t;x[6]!==y.versionRevisionId||x[7]!==v||x[8]!==_||x[9]!==w?(n=()=>{_({...v,rev:y.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{w("drafts")},100)},x[6]=y.versionRevisionId,x[7]=v,x[8]=_,x[9]=w,x[10]=n):n=x[10];let S=n;x[11]!==y.release?(i=e=>{let{children:t}=e;return(0,s.jsx)(g.RwK,{$tone:y.release?(0,g.Y73)(y.release):void 0,children:t})},x[11]=y.release,x[12]=i):i=x[12];let E=i,C=`timeline-item-menu-button-${y.versionId}`;x[13]!==b?(a=b("timeline-item.menu-button.aria-label"),x[13]=b,x[14]=a):a=x[14],x[15]!==b?(d=b("timeline-item.menu-button.tooltip"),x[15]=b,x[16]=d):d=x[16],x[17]!==d?(c={content:d},x[17]=d,x[18]=c):c=x[18],x[19]!==a||x[20]!==c?(u=(0,s.jsx)(g.VJU,{"aria-label":a,tooltipProps:c}),x[19]=a,x[20]=c,x[21]=u):u=x[21],x[22]!==E||x[23]!==y.release||x[24]!==y.versionRevisionId||x[25]!==S||x[26]!==I||x[27]!==b?(p=(0,s.jsx)(o.W1,{padding:1,children:y.release?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.RZ,{intent:g.wwz,params:{id:y.release?.name},style:{textDecoration:"none"},children:(0,s.jsx)(o.Dr,{padding:3,children:(0,s.jsx)(o.so,{align:"center",children:(0,s.jsx)(o.EY,{size:1,style:{textDecoration:"none"},children:(0,s.jsx)(g.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsxs)(E,{children:[t," "]})}},i18nKey:"events.open.release",values:{releaseTitle:y.release.metadata.title},t:b})})})})}),(0,s.jsx)(o.Dr,{onClick:I,children:(0,s.jsx)(o.so,{align:"center",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsxs)(E,{children:[t," "]})}},i18nKey:"events.inspect.release",values:{releaseTitle:y.release.metadata.title},t:b})})})})]}):(0,s.jsx)(o.Dr,{onClick:S,disabled:!y.versionRevisionId,children:(0,s.jsx)(o.so,{align:"center",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(g.HTc,{components:{VersionBadge:oe},i18nKey:"events.open.draft",t:b})})})})}),x[22]=E,x[23]=y.release,x[24]=y.versionRevisionId,x[25]=S,x[26]=I,x[27]=b,x[28]=p):p=x[28];let D=!j.elements?.[rd]||rd;return x[29]===Symbol.for("react.memo_cache_sentinel")?(m=["bottom-end","bottom-start"],x[29]=m):m=x[29],x[30]!==D?(h={portal:D,placement:"bottom",fallbackPlacements:m},x[30]=D,x[31]=h):h=x[31],x[32]!==h||x[33]!==C||x[34]!==u||x[35]!==p?(f=(0,s.jsx)(r.IU,{id:C,button:u,menu:p,popover:h}),x[32]=h,x[33]=C,x[34]=u,x[35]=p,x[36]=f):f=x[36],f}function oe(e){let{children:t}=e;return(0,s.jsx)(g.RwK,{$tone:"caution",children:t})}let ot=S.P.create(o.az),on={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},oi=({events:e,hasMoreEvents:t,selectedEventId:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)",fetchEventChildren:a})=>{let[c,u]=(0,d.useState)(!1),{t:p}=(0,g.Bdt)("studio"),[m,h]=(0,d.useState)(()=>{if(n){let t=e.find(e=>e.id===n);if(t&&"parentId"in t&&t.parentId)return new Set([t.parentId])}return new Set}),[f,x]=(0,d.useState)(new Set),y=(0,d.useMemo)(()=>e.filter(t=>(0,g.y4b)(t)&&t.parentId?e[e.length-1].id===t.id||m.has(t.parentId):!(0,g.WUV)(t)||!t.parentId||m.has(t.parentId)),[m,e]),b=(0,d.useCallback)(e=>async()=>{let t=e.id,n=!1;h(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(x(e=>{let n=new Set(e);return n.add(t),n}),await a(e),x(e=>{let n=new Set(e);return n.delete(t),n}))},[a,x]),j=(0,d.useCallback)(e=>{r(e)},[r]),v=(0,d.useCallback)(e=>{let t=(0,g.tfA)(e.documentId);return(0,g.BaK)(e)&&"published"===t?(0,s.jsx)(l9,{event:e}):(0,g.BaK)(e)&&"draft"===t&&e.creationEvent?(0,s.jsx)(iX,{isExpanded:m.has(e.id),onExpand:b(e)}):null},[m,b]),_=(0,d.useCallback)((e,{activeIndex:i})=>{let r=(0,g.y4b)(e)&&e.parentId&&f.has(e.parentId),l=i===y.length-1;return r?(0,s.jsx)(ot,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,s.jsx)(o.so,{align:"center",justify:"center",style:{height:57},children:(0,s.jsx)(o.y$,{})})}):(0,s.jsxs)(ot,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?on:void 0,paddingLeft:((0,g.WUV)(e)||(0,g.y4b)(e))&&e.parentId&&!l?4:1,children:[(0,s.jsx)(l7,{event:e,isSelected:e.id===n,onSelect:j,optionsMenu:v(e)}),l&&t&&(0,s.jsx)(g.gd4,{})]},e.timestamp)},[f,n,j,v,y.length,t]);(0,d.useEffect)(()=>u(!0),[]);let w=y.findIndex(e=>e.id===n);return(0,s.jsx)(i2,{$visible:!w||c,"data-ui":"timeline",children:y.length>0?(0,s.jsx)(i1,{direction:"column",$maxHeight:l,id:"timeline-list-wrapper",children:(0,s.jsx)(g.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:y,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:_,wrapAround:!1})}):(0,s.jsxs)(o.BJ,{padding:3,space:3,children:[(0,s.jsx)(o.EY,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]})})};oi.displayName="EventsTimeline";let or=(0,I.I4)(r.AM)`
  overflow: hidden;
  overflow: clip;
`,os={timestamp:{dateStyle:"medium",timeStyle:"short"}};function ol({event:e,events:t,mode:n,placement:i}){let{setTimelineRange:l}=t7(),[c,p]=(0,d.useState)(!1),[m,h]=(0,d.useState)(null),[f,x]=(0,d.useState)(null),y=(0,a.dj)(),{nextCursor:b,loading:j,error:v,findRangeForRevision:_,findRangeForSince:w,loadMoreEvents:I,expandEvent:S}=(0,g.LJN)(),{t:E}=(0,g.Bdt)("studio"),k=(0,d.useCallback)(()=>{p(!0)},[]),T=(0,d.useCallback)(()=>{p(!1)},[]),C=(0,d.useCallback)(e=>{c&&("Escape"===e.key||"Tab"===e.key)&&(T(),m?.focus())},[m,T,c]);(0,o.Pm)(C),(0,o.PR)(c&&T,()=>[m,f]);let D=(0,d.useCallback)(e=>{try{if((0,g.zOx)(e)||(0,g.GDb)(e)||(0,g.ayN)(e)||(0,g.Bkf)(e)||(0,g.azN)(e)){console.error("Event is not selectable");return}let[t,n]=_(e?.id);l(t,n),T()}catch(e){y.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[E,y,l,_,T]),z=(0,d.useCallback)(e=>{try{let[t,n]=w(e.id);l(t,n),T()}catch(e){y.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[w,l,y,E,T]),R=(0,d.useCallback)(()=>{!j&&b&&I()},[j,I,b]),A=(0,d.useMemo)(()=>v?(0,s.jsx)(ro,{}):(0,s.jsx)(oi,{events:t,fetchEventChildren:S,hasMoreEvents:!!b,selectedEventId:e?.id,onLoadMore:R,onSelect:"rev"===n?D:z}),[v,n,S,t,b,e?.id,R,z,D]),P=e?E(g.uMx[e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:os}):E("timeline.latest-revision"),M=e?E(g.uMx[e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:os}):t.length>0?E("timeline.since-version-missing"):E("timeline.no-previous-events"),$="rev"===n?P:M;return(0,s.jsx)(o.GD,{__unstable_elements:{"timeline-menu":f},children:(0,s.jsx)(or,{"data-testid":"timeline-menu",constrainSize:!0,content:c&&A,"data-ui":"versionMenu",open:c,placement:i,matchReferenceWidth:!0,portal:!0,ref:x,children:(0,s.jsx)(o.so,{width:"fill",children:(0,s.jsx)(r.$n,{"data-testid":c?"timeline-menu-close-button":"timeline-menu-open-button",disabled:j||!t.length,mode:"ghost",onClick:c?T:k,ref:h,selected:c,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:u.D3D,text:j?E("timeline.loading-history"):$})})})})}let oo=(0,I.I4)(g.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,oa=(0,I.I4)(o.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,od=(0,I.I4)(o.so)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,oc={diff:null,loading:!0};function ou({showChanges:e}){let{documentId:t,schemaType:n,timelineError:i,value:r,formState:l}=t7(),[a,c]=(0,d.useState)(null),{events:u,revision:p,sinceRevision:m,getChangesList:h}=(0,g.LJN)(),f=!p?.revisionId,x=(0,d.useMemo)(()=>h(),[h]),{diff:y,loading:b}=(0,E.J)(x,oc),{t:j}=(0,g.Bdt)("studio"),v=(0,d.useMemo)(()=>({documentId:t,schemaType:n,FieldWrapper:g.uD1,rootDiff:y,isComparingCurrent:f&&!l?.readOnly,value:r,showFromValue:!0}),[y,t,f,l?.readOnly,n,r]),[_,w]=(0,d.useMemo)(()=>u?[u.find(e=>e.id===m?.revisionId)||null,u.find(e=>e.id===p?.revisionId)||u[0]]:[null,null],[u,p?.revisionId,m?.revisionId]),I=(0,d.useMemo)(()=>w?u.slice(u.indexOf(w)+1).map(e=>"parentId"in w&&"parentId"in e&&e.parentId===w.parentId?{...e,parentId:void 0}:e):u.slice(1),[u,w]);return(0,s.jsxs)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,s.jsxs)(o.az,{padding:3,style:{position:"relative"},children:[(0,s.jsxs)(oa,{paddingX:2,paddingBottom:2,children:[(0,s.jsx)(o.EY,{size:1,muted:!0,children:j("changes.inspector.from-label")}),(0,s.jsx)(ol,{event:_||null,events:I,mode:"since",placement:"bottom-start"}),(0,s.jsx)(o.EY,{size:1,muted:!0,children:j("changes.inspector.to-label")}),(0,s.jsx)(ol,{event:w||null,events:u,mode:"rev",placement:"bottom-end"})]}),b&&(0,s.jsx)(S.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsxs)(od,{justify:"center",align:"center",gap:2,children:[(0,s.jsx)(o.EY,{muted:!0,size:0,children:j("changes.loading-changes")}),(0,s.jsx)(o.y$,{size:0})]})})]}),(0,s.jsx)(o.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(o.EZ,{element:a,children:(0,s.jsx)(oo,{"data-ui":"Scroller",ref:c,children:(0,s.jsx)(o.az,{flex:1,paddingX:3,height:"fill",children:e&&(0,s.jsx)(op,{documentContext:v,error:i,loading:p?.loading||m?.loading||!1,schemaType:n})})})})})]})}function op(e){let t,n;let i=(0,l.c)(9),{error:r,documentContext:o,loading:a,schemaType:d}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.isY,{}),i[0]=e):e=i[0],e}if(a){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.gd4,{showText:!0}),i[1]=e):e=i[1],e}if(!o.rootDiff){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(S.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsx)(g.J7,{})}),i[2]=e):e=i[2],e}return i[3]!==o.rootDiff||i[4]!==d?(t=(0,s.jsx)(g.Vki,{diff:o.rootDiff,schemaType:d}),i[3]=o.rootDiff,i[4]=d,i[5]=t):t=i[5],i[6]!==o||i[7]!==t?(n=(0,s.jsx)(c.HU.Provider,{value:o,children:t}),i[6]=o,i[7]=t,i[8]=n):n=i[8],n}let om=(0,I.I4)(g.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function oh({showList:e}){let[t,n]=(0,d.useState)(null),[i,r]=(0,d.useState)(0),{setTimelineRange:l}=(0,T.useDocumentPane)(),c=(0,d.useCallback)(e=>{!i&&e&&(r(e.clientHeight?e.clientHeight-1:0),n(e))},[i]),{events:u,nextCursor:p,loading:m,error:h,revision:f,loadMoreEvents:x,findRangeForRevision:y,expandEvent:b}=(0,g.LJN)(),{t:j}=(0,g.Bdt)("studio"),v=(0,a.dj)(),_=(0,d.useCallback)(e=>{try{if((0,g.zOx)(e)||(0,g.GDb)(e)||(0,g.ayN)(e)||(0,g.Bkf)(e)||(0,g.azN)(e)){console.error("Event is not selectable");return}let[t,n]=y(e.id);l(t,n)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:j("timeline.error.unable-to-load-revision")})}},[j,v,l,y]),w=m&&!u.length;return(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:h?(0,s.jsx)(ro,{}):(0,s.jsx)(o.EZ,{element:t,children:(0,s.jsxs)(om,{"data-ui":"Scroller",ref:c,children:[i&&e&&!w?(0,s.jsx)(oi,{events:u,fetchEventChildren:b,hasMoreEvents:!!p,selectedEventId:f?.revisionId||u[0]?.id,onLoadMore:x,onSelect:_,listMaxHeight:`${i}px`}):null,m&&(0,s.jsx)(g.gd4,{})]})})})})}let of=(0,I.I4)(g.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function og({showList:e}){let{timelineError:t,setTimelineRange:n,timelineStore:i}=t7(),{selectedReleaseId:r}=(0,g.QO2)(),[l,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(0),m=(0,d.useCallback)(e=>{e?.clientHeight&&(p(e.clientHeight-1),c(e))},[]),h=(0,g.SfM)(i,e=>e.chunks),f=(0,g.SfM)(i,e=>e.realRevChunk),x=(0,g.SfM)(i,e=>e.hasMoreChunks),y=(0,g.SfM)(i,e=>e.isLoading),{t:b}=(0,g.Bdt)("studio"),j=(0,a.dj)(),v=(0,d.useCallback)(e=>{try{let[t,r]=i?.findRangeForRev(e)||[null,null];n(t,r)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:b("timeline.error.unable-to-load-revision")})}},[n,b,i,j]),_=(0,d.useCallback)(()=>{y||i?.loadMore()},[y,i]);return(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:t||r?(0,s.jsx)(ro,{versionError:!!r}):(0,s.jsx)(o.EZ,{element:l,children:(0,s.jsx)(of,{"data-ui":"Scroller",ref:m,children:u&&e?(0,s.jsx)(rl,{chunks:h,hasMoreChunks:x,lastChunk:f,onLoadMore:_,onSelect:v,listMaxHeight:`${u}px`}):null})})})})}let ox=(0,I.I4)(o.so)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,oy=["history","review"],ob=e=>e&&oy.includes(e),oj={error:u.YZv,warning:u.sAQ,info:u.YzR},ov={error:"critical",warning:"caution",info:"primary"};function o_(e){let t,n,i,a;let c=(0,l.c)(17),{marker:u,onOpen:p,schemaType:m,value:h}=e;c[0]!==u.path||c[1]!==p?(t=()=>p(u.path),c[0]=u.path,c[1]=p,c[2]=t):t=c[2];let f=t,[g,x]=(0,d.useState)(null),y=oj[u.level];return c[3]!==g?(n=g&&(0,s.jsx)(o.Zp,{padding:3,radius:2,tone:"critical",children:(0,s.jsx)(o.EY,{size:1,children:g.error.message})}),c[3]=g,c[4]=n):n=c[4],c[5]!==y||c[6]!==g||c[7]!==f||c[8]!==u.level||c[9]!==u.message||c[10]!==u.path||c[11]!==m||c[12]!==h?(i=!g&&(0,s.jsx)(o.Zp,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:ov[u.level],children:(0,s.jsxs)(o.so,{align:"flex-start",gap:3,children:[(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(y,{})})}),(0,s.jsxs)(o.BJ,{flex:1,space:2,children:[(0,s.jsx)(ow,{path:u.path,schemaType:m,value:h}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:u.message})]})]})}),c[5]=y,c[6]=g,c[7]=f,c[8]=u.level,c[9]=u.message,c[10]=u.path,c[11]=m,c[12]=h,c[13]=i):i=c[13],c[14]!==n||c[15]!==i?(a=(0,s.jsxs)(r.tH,{onCatch:x,children:[n,i]}),c[14]=n,c[15]=i,c[16]=a):a=c[16],a}function ow(e){let{path:t,schemaType:n,value:i}=e,r=(0,d.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,r=[],s=n,l=i;for(let e of t){if("string"==typeof e){if(!(0,g.u4i)(l)&&void 0!==l)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==s.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);l=l?.[e];let t=s.fields.find(t=>t.name===e);if(!t)return r.push({name:e}),r;s=t.type,r.push(s);continue}if("number"==typeof e){if(!(0,g.cyL)(l)&&void 0!==l)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==s.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);l=l?.[e];let t=s.of.find(e=>"string"==typeof l?"string"===e.jsonType:"number"==typeof l?"number"===e.jsonType:"boolean"==typeof l?"boolean"===e.jsonType:!!(0,g.u4i)(l)&&e.name===l?._type);if(!t)throw Error(`Item type not found: [${e}]`);s=t,r.push(s);continue}if((0,g.u4i)(e)&&e._key){if(!(0,g.cyL)(l))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==s.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(l=(l??[]).find(t=>(0,g.u4i)(t)&&t._key===e._key),!(0,g.u4i)(l))throw Error(`Array item not found: [_key == ${e._key}]`);let t=s.of.find(e=>(0,g.u4i)(l)&&e.name===l?._type);if(!t)throw Error(`Array item type not found: .${l?._type}`);s=t,r.push(s);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return r}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return r?.length?(0,s.jsx)(o.EY,{size:1,children:r.map((e,t)=>(0,s.jsxs)(d.Fragment,{children:[t>0&&(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,s.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let oI={},oS=k.wE.create("/",[k.wE.intents("/intent"),k.wE.create("/edit/:type/:editDocumentId",[k.wE.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),k.wE.create({path:"/:panes",children:[k.wE.create("/:action",k.wE.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,r]=n.match(oE)||[];if(!e){n=n.slice(1);continue}let s=r&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(r);t.push({id:i,payload:s}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(",");return function(e,t){let n={...t,params:oI,payload:void 0};return e.reduce((e,t)=>{if(ok(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else oT(t)?e.payload=function(e){try{return e?(0,k.fA)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},n)}(n,{id:t})});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...C(t.params,oC),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(oz).join("|")).map(encodeURIComponent).join(";")}}}})]),oE=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,ok=e=>/^[a-z0-9]+=[^=]+/i.test(e),oT=e=>/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(e),oC=["view","since","rev","inspect","comment"],oD=Boolean;function oz(e,t,n){let{payload:i,params:r={},id:s}=e,[l]=n,o=e===l,a=0!==t&&s===l.id,d=typeof i>"u"?void 0:(0,k.nk)(i),c=Object.entries(r).filter(e=>{let[t,n]=e;return!!n&&(!!o||!(n===l.params?.[t]&&!oC.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":s].concat([c.length>0&&c,d].filter(oD).flat()).join(",")||","}let oR=[iE,iT,iy,ij,ig,i_],oA=[lQ],oP=[{name:"sanity/structure/validation",component:function(e){let t,n,i,r,a,d,c,u;let p=(0,l.c)(25),{onClose:m}=e,{onFocus:h,onPathOpen:f,schemaType:x,validation:y,value:b}=t7(),{t:j}=(0,g.Bdt)("validation");p[0]!==h||p[1]!==f?(t=e=>{f(e),h(e)},p[0]=h,p[1]=f,p[2]=t):t=p[2];let v=t;return p[3]!==j?(n=j("panel.close-button-aria-label"),p[3]=j,p[4]=n):n=p[4],p[5]!==j?(i=j("panel.title"),p[5]=j,p[6]=i):i=p[6],p[7]!==m||p[8]!==n||p[9]!==i?(r=(0,s.jsx)(ng,{as:"header",closeButtonLabel:n,flex:"none",onClose:m,title:i}),p[7]=m,p[8]=n,p[9]=i,p[10]=r):r=p[10],p[11]!==j||p[12]!==y.length?(a=0===y.length&&(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:j("panel.no-errors-message")})}),p[11]=j,p[12]=y.length,p[13]=a):a=p[13],p[14]!==v||p[15]!==x||p[16]!==y||p[17]!==b?(d=y.length>0&&(0,s.jsx)(o.BJ,{space:2,children:y.map((e,t)=>(0,s.jsx)(o_,{marker:e,onOpen:v,schemaType:x,value:b},t))}),p[14]=v,p[15]=x,p[16]=y,p[17]=b,p[18]=d):d=p[18],p[19]!==a||p[20]!==d?(c=(0,s.jsxs)(o.Zp,{flex:1,overflow:"auto",padding:3,children:[a,d]}),p[19]=a,p[20]=d,p[21]=c):c=p[21],p[22]!==r||p[23]!==c?(u=(0,s.jsxs)(o.so,{direction:"column",height:"fill",overflow:"hidden",children:[r,c]}),p[22]=r,p[23]=c,p[24]=u):u=p[24],u},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,g.Bdt)("validation"),{selectedReleaseId:r}=(0,g.QO2)(),{validation:s}=(0,g.dWw)(t,n,r),l=(0,d.useMemo)(()=>s.map(e=>({level:e.level,message:e.message,path:e.path})),[s]),o=l.some(x.Ah),a=l.some(x.ci),c=(0,d.useMemo)(()=>o?u.YZv:a?u.sAQ:u.Dee,[o,a]),p=(0,d.useMemo)(()=>o?"critical":a?"caution":"positive",[o,a]);return{hidden:0===l.length,icon:c,title:i("panel.title"),tone:p,showAsAction:!0}}},{name:nd,useMenuItem:()=>{let{features:e}=ns(),{t}=(0,g.Bdt)();return{hidden:!e.reviewChanges,icon:u.G2W,title:t("changes.title")}},component:function(e){let t,n,i,d,c,p,m,h,f,x,y,b,j,v,_,w,I,S,E;let k=(0,l.c)(54),{params:T,setParams:C}=eJ(),D=(0,g.For)(),{t:z}=(0,g.Bdt)(eM),R=T?.inspect===nd;k[0]!==T?(t=ob(T?.changesInspectorTab)?T.changesInspectorTab:oy[0],k[0]=T,k[1]=t):t=k[1];let A=t;k[2]!==T||k[3]!==C?(n=e=>C({...T,changesInspectorTab:e,since:"history"===e?void 0:T?.since}),k[2]=T,k[3]=C,k[4]=n):n=k[4];let P=n,M=R?"":void 0;k[5]!==z?(i=z("changes.tab.history"),k[5]=z,k[6]=i):i=k[6],k[7]!==P?(d=()=>P("history"),k[7]=P,k[8]=d):d=k[8];let $="history"===A;k[9]!==i||k[10]!==d||k[11]!==$?(c=(0,s.jsx)(r.oz,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:d,selected:$}),k[9]=i,k[10]=d,k[11]=$,k[12]=c):c=k[12],k[13]!==z?(p=z("changes.tab.review-changes"),k[13]=z,k[14]=p):p=k[14],k[15]!==P?(m=()=>P("review"),k[15]=P,k[16]=m):m=k[16];let L="review"===A;k[17]!==p||k[18]!==m||k[19]!==L?(h=(0,s.jsx)(r.oz,{"aria-controls":"review-changes-panel",id:"changes-tab",label:p,onClick:m,selected:L}),k[17]=p,k[18]=m,k[19]=L,k[20]=h):h=k[20],k[21]!==h||k[22]!==c?(f=(0,s.jsxs)(o.wb,{space:1,flex:1,children:[c,h]}),k[21]=h,k[22]=c,k[23]=f):f=k[23],k[24]!==z?(x=z("changes.action.close-label"),k[24]=z,k[25]=x):x=k[25];let O=e.onClose;k[26]!==z?(y=z("document-inspector.close-button.tooltip"),k[26]=z,k[27]=y):y=k[27],k[28]!==y?(b={content:y},k[28]=y,k[29]=b):b=k[29],k[30]!==e.onClose||k[31]!==x||k[32]!==b?(j=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(r.$n,{"aria-label":x,icon:u.USm,mode:"bleed",onClick:O,tooltipProps:b})}),k[30]=e.onClose,k[31]=x,k[32]=b,k[33]=j):j=k[33],k[34]!==f||k[35]!==j?(v=(0,s.jsxs)(o.so,{align:"center",padding:3,gap:2,children:[f,j]}),k[34]=f,k[35]=j,k[36]=v):v=k[36];let B="history"!==A;k[37]!==A||k[38]!==D.beta?.eventsAPI?.documents?(_=D.beta?.eventsAPI?.documents?(0,s.jsx)(oh,{showList:"history"===A}):(0,s.jsx)(og,{showList:"history"===A}),k[37]=A,k[38]=D.beta?.eventsAPI?.documents,k[39]=_):_=k[39],k[40]!==B||k[41]!==_?(w=(0,s.jsx)(a.Kp,{"aria-labelledby":"history-tab",height:"fill",hidden:B,id:"history-panel",children:_}),k[40]=B,k[41]=_,k[42]=w):w=k[42];let H="review"!==A;return k[43]!==A||k[44]!==D.beta?.eventsAPI?.documents?(I=D.beta?.eventsAPI?.documents?(0,s.jsx)(s.Fragment,{children:"review"===A?(0,s.jsx)(ou,{showChanges:"review"===A}):null}):(0,s.jsx)(l0,{showChanges:"review"===A}),k[43]=A,k[44]=D.beta?.eventsAPI?.documents,k[45]=I):I=k[45],k[46]!==H||k[47]!==I?(S=(0,s.jsx)(a.Kp,{"aria-labelledby":"review-tab",hidden:H,id:"review-panel",height:"fill",children:I}),k[46]=H,k[47]=I,k[48]=S):S=k[48],k[49]!==v||k[50]!==M||k[51]!==w||k[52]!==S?(E=(0,s.jsxs)(ox,{direction:"column",padding:0,height:"fill","data-ready":M,children:[v,w,S]}),k[49]=v,k[50]=M,k[51]=w,k[52]=S,k[53]=E):E=k[53],E},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],oM=(0,g.bzQ)(e=>{let t=e?.icon||u.tN2;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...oR])),badges:e=>Array.from(new Set([...e,...oA])),inspectors:e=>Array.from(new Set([...e,...oP]))},tools:[{name:e?.name||"structure",title:e?.title||"Structure",icon:t,component:(0,d.lazy)(()=>n.e(574).then(n.bind(n,1574))),canHandleIntent:(e,t)=>"create"===e?function(e){return"type"in e&&(!("template"in e)||{template:!0})}(t):"edit"===e&&function(e){return"id"in e&&(!("mode"in e)||{mode:"structure"===e.mode})}(t),getIntentState:lG,controlsDocumentTitle:!0,options:e,router:oS,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[e$]}}});function o$({defaultDocumentNode:e,structure:t,children:n}){let[i,r]=(0,d.useState)(!1),l=(0,g.For)(),o=(0,g.Yfj)(l),a=(0,g.q3J)(),u=(0,d.useMemo)(()=>lK({defaultDocumentNode:e,source:l}),[e,l]),p=(0,d.useMemo)(()=>t?t(u,{...o,documentStore:a}):u.defaults(),[u,t,o,a]),m=(0,d.useMemo)(()=>({backButton:i,resizablePanes:!i,reviewChanges:!i,splitPanes:!i,splitViews:!i}),[i]),h=(0,d.useMemo)(()=>({features:m,layoutCollapsed:i,setLayoutCollapsed:r,rootPaneNode:p,structureContext:u.context}),[m,i,p,u.context]);return(0,s.jsx)(c.DI.Provider,{value:h,children:n})}var oL=Object.freeze({__proto__:null,default:se}),oO=Object.freeze({__proto__:null,default:s1})}}]);